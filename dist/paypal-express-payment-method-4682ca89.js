"use strict";(self.webpackJsonpCheckout=self.webpackJsonpCheckout||[]).push([[3450],{31698:(e,t,n)=>{n.d(t,{A:()=>m});var i=n(31635),s=n(44218),a=n(69440),d=n(70355),r=n(65685),o=n(94611),u=n(11474),c=n(40646),l=n(68801);const m=e=>{const{description:t,isInitializing:n=!1,initializePayment:m,method:g,onUnhandledError:h=a.noop,deinitializePayment:y}=e,[p,f]=(0,d.useState)(!1),[I,b]=(0,d.useState)(),k=function(e){const t=(0,s.memoizeOne)(((e=[])=>e.filter(r.A))),n=(0,s.memoizeOne)(((e=[])=>e.filter((({trustedShippingAddress:e})=>e)))),{checkoutService:i,checkoutState:a,isUsingMultiShipping:d=!1,method:u}=e,{data:{getCart:c,getConfig:l,getCustomer:m,getInstruments:g,isPaymentDataRequired:h,isPaymentDataSubmitted:y},statuses:{isLoadingInstruments:p}}=a,f=c(),I=l(),b=m();if(!I||!f||!b)throw new Error("Unable to get checkout");const k=t(g(u)),v=n(k);return{instruments:v,isNewAddress:0===v.length&&k.length>0,isInstrumentFeatureAvailable:!y(u.id,u.gateway)&&(0,o.A)({config:I,customer:b,isUsingMultiShipping:d,paymentMethod:u}),isLoadingInstruments:p(),isPaymentDataRequired:h(),loadInstruments:i.loadInstruments}}(e),{isLoadingInstruments:v,instruments:w,isNewAddress:A,isInstrumentFeatureAvailable:E}=k,S=(0,d.useCallback)((()=>{if(!p&&w.length)return(0,a.find)(w,{defaultInstrument:!0})||w[0]}),[p,w]),C=(0,d.useCallback)((()=>{f(!0),b(void 0)}),[]),P=(0,d.useCallback)((e=>{f(!1),b((0,a.find)(w,{bigpayToken:e}))}),[w]);(0,d.useEffect)((()=>{(0,i.__awaiter)(void 0,void 0,void 0,(function*(){try{yield m({gatewayId:g.gateway,methodId:g.id}),E&&(yield k.loadInstruments())}catch(e){h(e)}}))}),[m,g.gateway,g.id,E,k,h]),(0,d.useEffect)((()=>()=>{(0,i.__awaiter)(void 0,void 0,void 0,(function*(){try{yield y({gatewayId:g.gateway,methodId:g.id})}catch(e){h(e)}}))}),[y,g.gateway,g.id,h]);const z=I||S(),M=n||v,U=E&&(w.length>0||A);return t||E?d.createElement(l.A,{hideContentWhenLoading:!0,isLoading:M},d.createElement("div",{className:"paymentMethod paymentMethod--hosted"},t,U&&d.createElement(u.A,{instruments:w,onSelectInstrument:P,onUseNewInstrument:C,selectedInstrument:z}),E&&d.createElement(c.A,{instrumentId:z&&z.bigpayToken,instruments:w,isAccountInstrument:!0}))):null}},79517:(e,t,n)=>{n.r(t),n.d(t,{PaypalExpressPaymentMethod:()=>d});var i=n(31635),s=n(70355),a=n(31698);const d=(0,n(19285).A)((e=>{var{checkoutService:t,isEmbedded:n=!1}=e,d=(0,i.__rest)(e,["checkoutService","isEmbedded"]);const r=(0,s.useCallback)((e=>t.initializePayment(Object.assign(Object.assign({},e),{paypalexpress:{useRedirectFlow:n}}))),[t,n]);return s.createElement(a.A,Object.assign({},d,{checkoutService:t,deinitializePayment:t.deinitializePayment,initializePayment:r}))}),[{id:"paypalexpress"}])},94611:(e,t,n)=>{function i({config:e,customer:t,isUsingMultiShipping:n,paymentMethod:i}){return!(!e.checkoutSettings.isCardVaultingEnabled||!i.config.isVaultingEnabled||t.isGuest||n)}n.d(t,{A:()=>i})}}]);
//# sourceMappingURL=paypal-express-payment-method-4682ca89.js.map