"use strict";(self.webpackJsonpCheckout=self.webpackJsonpCheckout||[]).push([[2343],{31698:(e,t,n)=>{n.d(t,{A:()=>l});var i=n(31635),a=n(44218),s=n(69440),r=n(70355),o=n(65685),d=n(94611),u=n(11474),c=n(40646),m=n(68801);const l=e=>{const{description:t,isInitializing:n=!1,initializePayment:l,method:g,onUnhandledError:h=s.noop,deinitializePayment:y}=e,[f,p]=(0,r.useState)(!1),[I,v]=(0,r.useState)(),A=function(e){const t=(0,a.memoizeOne)(((e=[])=>e.filter(o.A))),n=(0,a.memoizeOne)(((e=[])=>e.filter((({trustedShippingAddress:e})=>e)))),{checkoutService:i,checkoutState:s,isUsingMultiShipping:r=!1,method:u}=e,{data:{getCart:c,getConfig:m,getCustomer:l,getInstruments:g,isPaymentDataRequired:h,isPaymentDataSubmitted:y},statuses:{isLoadingInstruments:f}}=s,p=c(),I=m(),v=l();if(!I||!p||!v)throw new Error("Unable to get checkout");const A=t(g(u)),k=n(A);return{instruments:k,isNewAddress:0===k.length&&A.length>0,isInstrumentFeatureAvailable:!y(u.id,u.gateway)&&(0,d.A)({config:I,customer:v,isUsingMultiShipping:r,paymentMethod:u}),isLoadingInstruments:f(),isPaymentDataRequired:h(),loadInstruments:i.loadInstruments}}(e),{isLoadingInstruments:k,instruments:w,isNewAddress:b,isInstrumentFeatureAvailable:S}=A,E=(0,r.useCallback)((()=>{if(!f&&w.length)return(0,s.find)(w,{defaultInstrument:!0})||w[0]}),[f,w]),C=(0,r.useCallback)((()=>{p(!0),v(void 0)}),[]),P=(0,r.useCallback)((e=>{p(!1),v((0,s.find)(w,{bigpayToken:e}))}),[w]);(0,r.useEffect)((()=>{(0,i.__awaiter)(void 0,void 0,void 0,(function*(){try{yield l({gatewayId:g.gateway,methodId:g.id}),S&&(yield A.loadInstruments())}catch(e){h(e)}}))}),[l,g.gateway,g.id,S,A,h]),(0,r.useEffect)((()=>()=>{(0,i.__awaiter)(void 0,void 0,void 0,(function*(){try{yield y({gatewayId:g.gateway,methodId:g.id})}catch(e){h(e)}}))}),[y,g.gateway,g.id,h]);const z=I||E(),M=n||k,_=S&&(w.length>0||b);return t||S?r.createElement(m.A,{hideContentWhenLoading:!0,isLoading:M},r.createElement("div",{className:"paymentMethod paymentMethod--hosted"},t,_&&r.createElement(u.A,{instruments:w,onSelectInstrument:P,onUseNewInstrument:C,selectedInstrument:z}),S&&r.createElement(c.A,{instrumentId:z&&z.bigpayToken,instruments:w,isAccountInstrument:!0}))):null}},81074:(e,t,n)=>{n.r(t),n.d(t,{AffirmPaymentMethod:()=>o});var i=n(31635),a=n(70355),s=n(31698),r=n(49655);const o=(0,n(19285).A)((e=>{var{checkoutService:t}=e,n=(0,i.__rest)(e,["checkoutService"]);const o=(0,a.useMemo)((()=>a.createElement(r.A,{id:"payment.affirm_body_text"})),[]);return a.createElement(s.A,Object.assign({},n,{checkoutService:t,deinitializePayment:t.deinitializePayment,description:o,initializePayment:t.initializePayment}))}),[{id:"affirm"}])},94611:(e,t,n)=>{function i({config:e,customer:t,isUsingMultiShipping:n,paymentMethod:i}){return!(!e.checkoutSettings.isCardVaultingEnabled||!i.config.isVaultingEnabled||t.isGuest||n)}n.d(t,{A:()=>i})}}]);
//# sourceMappingURL=affirm-payment-method-59e9a2f4.js.map