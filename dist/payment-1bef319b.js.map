{"version":3,"file":"payment-1bef319b.js","mappings":"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","sources":["webpack://checkout/./packages/paypal-express-integration/src/PaypalExpressPaymentMethod.tsx","webpack://checkout/./packages/braintree-integration/src/BraintreePaypalPaymentMethod.tsx","webpack://checkout/./packages/bolt-integration/src/BoltPaymentMethod.tsx","webpack://checkout/./packages/bluesnap-direct-integration/src/validation-schemas/getIdealValidationSchema.ts","webpack://checkout/./packages/bluesnap-direct-integration/src/BlueSnapDirectIdealPaymentMethod.tsx","webpack://checkout/./packages/braintree-integration/src/BraintreeAch/constants.ts","webpack://checkout/./packages/braintree-integration/src/BraintreeAch/hooks/useBraintreeAchInstruments.ts","webpack://checkout/./packages/braintree-integration/src/BraintreeAch/hooks/useBraintreeAchValidation.ts","webpack://checkout/./packages/braintree-integration/src/BraintreeAch/components/BraintreeAchFormFields.tsx","webpack://checkout/./packages/braintree-integration/src/BraintreeAch/components/BraintreeAchMandateText.tsx","webpack://checkout/./packages/braintree-integration/src/BraintreeAch/components/BraintreeAchPaymentForm.tsx","webpack://checkout/./packages/braintree-integration/src/BraintreeAch/BraintreeAchPaymentMethod.tsx","webpack://checkout/./packages/ppsdk-integration/src/usePropsToOnMount.ts","webpack://checkout/./packages/ppsdk-integration/src/initializationComponentMap.ts","webpack://checkout/./packages/ppsdk-integration/src/NoUI.tsx","webpack://checkout/./packages/ppsdk-integration/src/PPSDKPaymentMethod.tsx","webpack://checkout/./packages/ui/src/accordion/AccordionItem.tsx","webpack://checkout/./packages/core/src/app/ui/form/ChecklistItemInput.tsx","webpack://checkout/./packages/core/src/app/ui/form/ChecklistItem.tsx","webpack://checkout/./packages/core/src/app/ui/tooltip/TooltipTrigger.tsx","webpack://checkout/./packages/bolt-integration/src/BoltClientPaymentMethod.tsx","webpack://checkout/./packages/clearpay-integration/src/ClearpayPaymentMethod.tsx","webpack://checkout/./packages/apple-pay-integration/src/ApplePayPaymentMethod.tsx","webpack://checkout/./packages/core/src/app/payment/paymentMethod/PaymentMethodType.ts","webpack://checkout/./packages/barclay-integration/src/BarclaycardPaymentMethod.tsx","webpack://checkout/./packages/braintree-integration/src/BraintreeFastlane/hooks/useBraintreeFastlaneInstruments.ts","webpack://checkout/./packages/braintree-integration/src/BraintreeFastlane/components/BraintreeFastlaneCreditCardForm.tsx","webpack://checkout/./packages/braintree-integration/src/BraintreeFastlane/components/BraintreeFastlaneInstrumentsForm.tsx","webpack://checkout/./packages/braintree-integration/src/BraintreeFastlane/components/BraintreeFastlaneForm.tsx","webpack://checkout/./packages/braintree-integration/src/BraintreeFastlane/index.ts","webpack://checkout/./packages/braintree-integration/src/BraintreeFastlane/BraintreeFastlanePaymentMethod.tsx","webpack://checkout/./packages/squarev2-integration/src/SquareV2Form.tsx","webpack://checkout/./packages/squarev2-integration/src/SquareV2PaymentMethod.tsx","webpack://checkout/./packages/affirm-integration/src/AffirmPaymentMethod.tsx","webpack://checkout/./packages/amazon-pay-v2-integration/src/AmazonPayV2PaymentMethod.tsx","webpack://checkout/./packages/hosted-credit-card-integration/src/HostedCreditCardPaymentMethod.tsx","webpack://checkout/./packages/braintree-integration/src/VisaCheckout/VisaCheckoutPaymentMethod.tsx","webpack://checkout/./packages/adyen-integration/src/adyenv3/AdyenV3CardValidation.tsx","webpack://checkout/./packages/adyen-integration/src/adyenv3/AdyenV3Form.tsx","webpack://checkout/./packages/adyen-integration/src/adyenv3/AdyenV3PaymentMethod.tsx","webpack://checkout/./packages/hosted-payment-integration/src/HostedPaymentMethod.tsx","webpack://checkout/./packages/hosted-payment-integration/src/components/HostedPaymentComponent.tsx","webpack://checkout/./packages/core/src/app/coupon/AppliedCoupon.tsx","webpack://checkout/./packages/core/src/app/giftCertificate/AppliedGiftCertificate.tsx","webpack://checkout/./packages/core/src/app/ui/icon/IconRemove.tsx","webpack://checkout/./packages/core/src/app/cart/AppliedRedeemable.tsx","webpack://checkout/./packages/core/src/app/cart/AppliedRedeemables.tsx","webpack://checkout/./packages/core/src/app/cart/Redeemable.tsx","webpack://checkout/./packages/google-pay-integration/src/GooglePayPaymentMethod.tsx","webpack://checkout/./packages/core/src/app/payment/PaymentContext.tsx","webpack://checkout/./packages/core/src/app/payment/creditCard/unformatCreditCardNumber.ts","webpack://checkout/./packages/core/src/app/payment/paymentMethod/PaymentMethodProviderType.ts","webpack://checkout/./packages/bluesnap-direct-integration/src/BlueSnapDirectAlternativePaymentMethod.tsx","webpack://checkout/./packages/moneris-integration/src/MonerisPaymentMethod.tsx","webpack://checkout/./packages/offline-payment-integration/src/OfflinePaymentMethod.tsx","webpack://checkout/./packages/bluesnap-direct-integration/src/BlueSnapV2PaymentMethod.tsx","webpack://checkout/./packages/core/src/app/ui/tooltip/Tooltip.tsx","webpack://checkout/./packages/bluesnap-direct-integration/src/fields/BlueSnapDirectTextField.tsx","webpack://checkout/./packages/mollie-integration/src/MollieAPMCustomForm.tsx","webpack://checkout/./packages/mollie-integration/src/MollieCustomCardForm.tsx","webpack://checkout/./packages/mollie-integration/src/MolliePaymentMethod.tsx","webpack://checkout/./packages/klarna-integration/src/klarna/KlarnaPaymentMethod.tsx","webpack://checkout/./packages/bluesnap-direct-integration/src/BlueSnapDirectInitializationData.ts","webpack://checkout/./packages/checkoutcom-integration/src/checkoutcomFieldsets/getCheckoutcomFieldsetValidationSchemas.tsx","webpack://checkout/./packages/core/src/app/ui/form/withForm.tsx","webpack://checkout/./packages/bluesnap-direct-integration/src/hooks/useSepaInstruments.ts","webpack://checkout/./packages/bluesnap-direct-integration/src/validation-schemas/getSepaValidationSchema.ts","webpack://checkout/./packages/bluesnap-direct-integration/src/BlueSnapDirectSepaPaymentMethod.tsx","webpack://checkout/./packages/core/src/app/cart/mapToRedeemableProps.ts","webpack://checkout/./packages/core/src/app/payment/withPayment.tsx","webpack://checkout/./packages/braintree-integration/src/BraintreeLocalPaymentMethod.tsx","webpack://checkout/./packages/bolt-integration/src/BoltCustomForm.tsx","webpack://checkout/./packages/bolt-integration/src/BoltEmbeddedPaymentMethod.tsx","webpack://checkout/./packages/bluesnap-direct-integration/src/validation-schemas/getPayByBankValidationSchema.ts","webpack://checkout/./packages/bluesnap-direct-integration/src/BlueSnapDirectPayByBankPaymentMethod.tsx","webpack://checkout/./packages/bluesnap-direct-integration/src/constants.ts","webpack://checkout/./packages/bluesnap-direct-integration/src/fields/BlueSnapDirectNumberField.tsx","webpack://checkout/./packages/bluesnap-direct-integration/src/fields/BlueSnapDirectEcpFieldset.tsx","webpack://checkout/./packages/bluesnap-direct-integration/src/hooks/useEcpInstruments.ts","webpack://checkout/./packages/bluesnap-direct-integration/src/validation-schemas/getEcpValidationSchema.ts","webpack://checkout/./packages/bluesnap-direct-integration/src/BlueSnapDirectEcpPaymentMethod.tsx","webpack://checkout/./packages/ui/src/accordion/Accordion.tsx","webpack://checkout/./packages/core/src/app/ui/form/Checklist.tsx","webpack://checkout/./packages/braintree-integration/src/BraintreeVenmo/BraintreeVenmoPaymentMethod.tsx","webpack://checkout/./packages/core/src/app/ui/form/TextArea.tsx","webpack://checkout/./packages/core/src/app/ui/modal/ModalLink.tsx","webpack://checkout/./packages/core/src/app/ui/text/MultiLineText.tsx","webpack://checkout/./packages/core/src/app/termsConditions/TermsConditionsField.tsx","webpack://checkout/./packages/core/src/app/payment/mapSubmitOrderErrorMessage.ts","webpack://checkout/./packages/core/src/app/payment/creditCard/unformatCreditCardExpiryDate.ts","webpack://checkout/./packages/core/src/app/payment/paymentMethod/getUniquePaymentMethodId.ts","webpack://checkout/./packages/core/src/app/payment/paymentMethod/CreditCardFieldsetValues.ts","webpack://checkout/./packages/core/src/app/termsConditions/TermsConditions.tsx","webpack://checkout/./packages/core/src/app/payment/getPaymentValidationSchema.ts","webpack://checkout/./packages/core/src/app/termsConditions/getTermsConditionsValidationSchema.ts","webpack://checkout/./packages/core/src/app/ui/form/CustomChecklistItem.tsx","webpack://checkout/./packages/bigcommerce-payments-utils/src/BigCommercePaymentsPayLaterBanner.tsx","webpack://checkout/./packages/paypal-utils/src/BraintreePaypalCreditBanner.tsx","webpack://checkout/./packages/paypal-utils/src/PaypalCommerceCreditBanner.tsx","webpack://checkout/./packages/ui/src/icon/CreditCardIconList.tsx","webpack://checkout/./packages/core/src/app/payment/paymentMethod/PaymentMethodTitle.tsx","webpack://checkout/./packages/core/src/app/payment/paymentMethod/getPaymentMethodDisplayName.tsx","webpack://checkout/./packages/core/src/app/payment/paymentMethod/HostedCreditCardFieldsetValues.ts","webpack://checkout/./packages/payment-integration-api/src/contexts/payment-form-context/PaymentFormProvider.tsx","webpack://checkout/./packages/core/src/app/generated/paymentIntegrations/lazy.ts","webpack://checkout/./packages/core/src/app/payment/paymentMethod/PaymentMethod.tsx","webpack://checkout/./packages/core/src/app/payment/paymentMethod/PaymentMethodV2.tsx","webpack://checkout/./packages/core/src/app/payment/resolvePaymentMethod.ts","webpack://checkout/./packages/core/src/app/payment/createPaymentFormService.ts","webpack://checkout/./packages/core/src/app/payment/paymentMethod/PaymentMethodList.tsx","webpack://checkout/./packages/core/src/app/common/utility/isMobile.ts","webpack://checkout/./packages/core/src/app/payment/PaymentRedeemables.tsx","webpack://checkout/./packages/core/src/app/payment/PaymentSubmitButton.tsx","webpack://checkout/./packages/core/src/app/payment/SpamProtectionField.tsx","webpack://checkout/./packages/core/src/app/payment/storeCredit/StoreCreditField.tsx","webpack://checkout/./packages/core/src/app/payment/storeCredit/StoreCreditOverlay.tsx","webpack://checkout/./packages/core/src/app/payment/PaymentForm.tsx","webpack://checkout/./packages/core/src/app/payment/Payment.tsx","webpack://checkout/./packages/core/src/app/payment/mapToOrderRequestBody.ts","webpack://checkout/./packages/core/src/app/common/error/isCartChangedError.ts","webpack://checkout/./packages/core/src/app/common/form/connectFormik.tsx","webpack://checkout/./packages/core/src/app/ui/modal/ModalTrigger.tsx","webpack://checkout/./packages/adyen-integration/src/adyenv2/AdyenV2CardValidation.tsx","webpack://checkout/./packages/adyen-integration/src/adyenv2/AdyenV2Form.tsx","webpack://checkout/./packages/adyen-integration/src/adyenv2/AdyenV2PaymentMethod.tsx","webpack://checkout/./packages/bluesnap-direct-integration/src/fields/BlueSnapDirectSelectField.tsx","webpack://checkout/./packages/klarna-integration/src/klarnav2/KlarnaV2PaymentMethod.tsx","webpack://checkout/./packages/afterpay-integration/src/AfterpayPaymentMethod.tsx","webpack://checkout/./packages/wallet-button-integration/src/normalizeWalletPaymentData.ts","webpack://checkout/./packages/payment-integration-api/src/PaymentMethodType.ts","webpack://checkout/./packages/payment-integration-api/src/getPaymentMethodName.ts","webpack://checkout/./packages/instrument-utils/src/storedInstrument/SignOutLink/SignOutLink.tsx","webpack://checkout/./packages/wallet-button-integration/src/PaymentView.tsx","webpack://checkout/./packages/wallet-button-integration/src/SignInView.tsx","webpack://checkout/./packages/wallet-button-integration/src/WalletButtonPaymentMethodComponent.tsx","webpack://checkout/./packages/core/src/app/payment/paymentMethod/getPaymentMethodName.ts","webpack://checkout/./packages/checkoutcom-integration/src/checkoutcomFieldsets/TextFieldForm.tsx","webpack://checkout/./packages/checkoutcom-integration/src/CheckoutcomCustomFormFields.tsx","webpack://checkout/./packages/checkoutcom-integration/src/CheckoutcomCustomPaymentMethod.tsx","webpack://checkout/./packages/worldpay-access-integration/src/WorldpayCreditCardPaymentMethod.tsx"],"sourcesContent":["import { type PaymentInitializeOptions } from '@bigcommerce/checkout-sdk';\nimport React, { type FunctionComponent, useCallback } from 'react';\n\nimport { HostedPaymentComponent } from '@bigcommerce/checkout/hosted-payment-integration';\nimport {\n    type PaymentMethodProps,\n    type PaymentMethodResolveId,\n    toResolvableComponent,\n} from '@bigcommerce/checkout/payment-integration-api';\n\nexport interface PaypalExpressPaymentMethodProps {\n    isEmbedded?: boolean;\n}\n\nconst PaypalExpressPaymentMethod: FunctionComponent<\n    PaymentMethodProps & PaypalExpressPaymentMethodProps\n> = ({ checkoutService, isEmbedded = false, ...rest }) => {\n    const initializePaypalExpressPayment = useCallback(\n        (options: PaymentInitializeOptions) =>\n            checkoutService.initializePayment({\n                ...options,\n                paypalexpress: {\n                    useRedirectFlow: isEmbedded,\n                },\n            }),\n        [checkoutService, isEmbedded],\n    );\n\n    return (\n        <HostedPaymentComponent\n            {...rest}\n            checkoutService={checkoutService}\n            deinitializePayment={checkoutService.deinitializePayment}\n            initializePayment={initializePaypalExpressPayment}\n        />\n    );\n};\n\nexport default toResolvableComponent<PaymentMethodProps, PaymentMethodResolveId>(\n    PaypalExpressPaymentMethod,\n    [{ id: 'paypalexpress' }],\n);\n","import { type PaymentInitializeOptions } from '@bigcommerce/checkout-sdk';\nimport React, { type FunctionComponent, useCallback } from 'react';\n\nimport { HostedPaymentComponent } from '@bigcommerce/checkout/hosted-payment-integration';\nimport {\n    type PaymentMethodProps,\n    type PaymentMethodResolveId,\n    toResolvableComponent,\n} from '@bigcommerce/checkout/payment-integration-api';\n\nconst BraintreePaypalPaymentMethod: FunctionComponent<PaymentMethodProps> = ({\n    checkoutService,\n    ...rest\n}) => {\n    const initializeBraintreePaypalPaymentMethod = useCallback(\n        (defaultOptions: PaymentInitializeOptions) => {\n            const { onUnhandledError, language, method, paymentForm } = rest;\n\n            return checkoutService.initializePayment({\n                ...defaultOptions,\n                braintree: {\n                    containerId: '#checkout-payment-continue',\n                    submitForm: () => {\n                        paymentForm.setSubmitted(true);\n                        paymentForm.submitForm();\n                    },\n                    onError: (error: Error) => {\n                        if (error.message === 'INSTRUMENT_DECLINED') {\n                            onUnhandledError?.(\n                                new Error(language.translate('payment.errors.instrument_declined')),\n                            );\n                        } else {\n                            onUnhandledError?.(error);\n                        }\n                    },\n                    onRenderButton: () => {\n                        paymentForm.hidePaymentSubmitButton(method, true);\n                    },\n                },\n            });\n        },\n        [rest, checkoutService],\n    );\n\n    return (\n        <HostedPaymentComponent\n            {...rest}\n            checkoutService={checkoutService}\n            deinitializePayment={checkoutService.deinitializePayment}\n            initializePayment={initializeBraintreePaypalPaymentMethod}\n        />\n    );\n};\n\nexport default toResolvableComponent<PaymentMethodProps, PaymentMethodResolveId>(\n    BraintreePaypalPaymentMethod,\n    [{ id: 'braintreepaypal' }],\n);\n","import React, { type FunctionComponent } from 'react';\n\nimport {\n    type PaymentMethodProps,\n    type PaymentMethodResolveId,\n    toResolvableComponent,\n} from '@bigcommerce/checkout/payment-integration-api';\n\nimport BoltClientPaymentMethod from './BoltClientPaymentMethod';\nimport BoltEmbeddedPaymentMethod from './BoltEmbeddedPaymentMethod';\n\nconst BoltPaymentMethod: FunctionComponent<PaymentMethodProps> = ({\n    checkoutService,\n    checkoutState,\n    method,\n    paymentForm,\n    ...rest\n}) => {\n    const useBoltEmbedded = method.initializationData?.embeddedOneClickEnabled;\n\n    if (useBoltEmbedded) {\n        return (\n            <BoltEmbeddedPaymentMethod\n                checkoutService={checkoutService}\n                checkoutState={checkoutState}\n                method={method}\n                paymentForm={paymentForm}\n                {...rest}\n            />\n        );\n    }\n\n    return (\n        <BoltClientPaymentMethod\n            checkoutService={checkoutService}\n            checkoutState={checkoutState}\n            method={method}\n            paymentForm={paymentForm}\n            {...rest}\n        />\n    );\n};\n\nexport default toResolvableComponent<PaymentMethodProps, PaymentMethodResolveId>(\n    BoltPaymentMethod,\n    [{ id: 'bolt' }],\n);\n","import { type LanguageService } from '@bigcommerce/checkout-sdk';\nimport { memoize } from '@bigcommerce/memoize';\nimport { object, type ObjectSchema, string } from 'yup';\n\nexport default memoize(function getIdealValidationSchema(language: LanguageService): ObjectSchema {\n    return object({\n        bic: string().required(language.translate('payment.ideal_bic_required')),\n    });\n});\n","import React, { type FunctionComponent, useCallback, useEffect } from 'react';\n\nimport {\n    type PaymentMethodProps,\n    type PaymentMethodResolveId,\n    toResolvableComponent,\n} from '@bigcommerce/checkout/payment-integration-api';\nimport { Fieldset, Legend } from '@bigcommerce/checkout/ui';\n\nimport { isBlueSnapDirectInitializationData } from './BlueSnapDirectInitializationData';\nimport BlueSnapDirectSelectField from './fields/BlueSnapDirectSelectField';\nimport getIdealValidationSchema from './validation-schemas/getIdealValidationSchema';\n\nconst BlueSnapDirectIdealPaymentMethod: FunctionComponent<PaymentMethodProps> = ({\n    method,\n    checkoutService: { initializePayment, deinitializePayment },\n    paymentForm: { setValidationSchema },\n    language,\n}) => {\n    if (!isBlueSnapDirectInitializationData(method.initializationData)) {\n        throw new Error('Unable to get initialization data');\n    }\n\n    const { idealIssuers } = method.initializationData;\n\n    const idealIssuersSelectOptions = idealIssuers.map((issuer) => ({\n        value: issuer.issuerId,\n        label: issuer.issuerName,\n    }));\n\n    const initializeIdeal = useCallback(async () => {\n        setValidationSchema(method, getIdealValidationSchema(language));\n\n        await initializePayment({\n            gatewayId: method.gateway,\n            methodId: method.id,\n        });\n    }, [initializePayment, method, setValidationSchema, language]);\n\n    const deinitializeIdeal = useCallback(async () => {\n        await deinitializePayment({\n            gatewayId: method.gateway,\n            methodId: method.id,\n        });\n    }, [deinitializePayment, method.gateway, method.id]);\n\n    useEffect(() => {\n        void initializeIdeal();\n\n        return () => {\n            void deinitializeIdeal();\n        };\n    }, [deinitializeIdeal, initializeIdeal]);\n\n    return (\n        <Fieldset\n            legend={<Legend hidden>{language.translate('payment.ideal.label')}</Legend>}\n            style={{ paddingBottom: '1rem' }}\n        >\n            <BlueSnapDirectSelectField\n                labelContent={language.translate('payment.ideal.label')}\n                name=\"bic\"\n                options={{\n                    helperLabel: language.translate('payment.select_your_bank'),\n                    items: idealIssuersSelectOptions,\n                }}\n            />\n        </Fieldset>\n    );\n};\n\nexport default toResolvableComponent<PaymentMethodProps, PaymentMethodResolveId>(\n    BlueSnapDirectIdealPaymentMethod,\n    [{ id: 'ideal', gateway: 'bluesnapdirect' }],\n);\n","import { type FormField } from '@bigcommerce/checkout-sdk';\n\nimport { DynamicFormFieldType } from '@bigcommerce/checkout/ui';\n\nexport enum BraintreeAchFieldType {\n    BusinessName = 'businessName',\n    AccountType = 'accountType',\n    AccountNumber = 'accountNumber',\n    RoutingNumber = 'routingNumber',\n    OwnershipType = 'ownershipType',\n    FirstName = 'firstName',\n    LastName = 'lastName',\n}\n\nexport enum OwnershipTypes {\n    Personal = 'Personal',\n    Business = 'Business',\n}\n\nexport enum AccountTypes {\n    Savings = 'Savings',\n    Checking = 'Checking',\n}\n\nconst accountTypeOptions = [\n    {\n        value: AccountTypes.Savings,\n        label: AccountTypes.Savings,\n    },\n    {\n        value: AccountTypes.Checking,\n        label: AccountTypes.Checking,\n    },\n];\n\nexport const ownershipTypeOptions = [\n    {\n        value: OwnershipTypes.Personal,\n        label: OwnershipTypes.Personal,\n    },\n    {\n        value: OwnershipTypes.Business,\n        label: OwnershipTypes.Business,\n    },\n];\n\nexport const defaultBraintreeAchFormFields: FormField[] = [\n    {\n        name: BraintreeAchFieldType.AccountType,\n        custom: false,\n        id: BraintreeAchFieldType.AccountType,\n        label: 'Account Type',\n        required: true,\n        fieldType: DynamicFormFieldType.DROPDOWM,\n        options: {\n            items: accountTypeOptions,\n        },\n    },\n    {\n        name: BraintreeAchFieldType.AccountNumber,\n        custom: false,\n        id: BraintreeAchFieldType.AccountNumber,\n        label: 'Account Number',\n        required: true,\n        max: 9,\n        min: 8,\n    },\n    {\n        name: BraintreeAchFieldType.RoutingNumber,\n        custom: false,\n        id: BraintreeAchFieldType.RoutingNumber,\n        label: 'Routing Number',\n        required: true,\n    },\n    {\n        name: BraintreeAchFieldType.OwnershipType,\n        custom: false,\n        id: BraintreeAchFieldType.OwnershipType,\n        label: 'Ownership Type',\n        required: true,\n        fieldType: DynamicFormFieldType.DROPDOWM,\n        options: {\n            items: ownershipTypeOptions,\n        },\n    },\n];\n\nexport const personalBraintreeAchFormFields: FormField[] = [\n    ...defaultBraintreeAchFormFields,\n    {\n        name: BraintreeAchFieldType.FirstName,\n        custom: false,\n        id: BraintreeAchFieldType.FirstName,\n        label: 'First Name',\n        required: true,\n    },\n    {\n        name: BraintreeAchFieldType.LastName,\n        custom: false,\n        id: BraintreeAchFieldType.LastName,\n        label: 'Last Name',\n        required: true,\n    },\n];\n\nexport const businessBraintreeAchFormFields: FormField[] = [\n    ...defaultBraintreeAchFormFields,\n    {\n        name: BraintreeAchFieldType.BusinessName,\n        custom: false,\n        id: BraintreeAchFieldType.BusinessName,\n        label: 'Business Name',\n        required: true,\n    },\n];\n","import { type AchInstrument, type PaymentMethod } from '@bigcommerce/checkout-sdk';\nimport { find } from 'lodash';\nimport { useCallback, useEffect, useMemo, useState } from 'react';\n\nimport { isAchInstrument } from '@bigcommerce/checkout/instrument-utils';\nimport { useCheckout, usePaymentFormContext } from '@bigcommerce/checkout/payment-integration-api';\n\nconst useBraintreeAchInstruments = (method: PaymentMethod) => {\n    const [currentInstrument, setCurrentInstrument] = useState<AchInstrument | undefined>();\n\n    const { checkoutState } = useCheckout();\n    const customer = checkoutState.data.getCustomer();\n    const instruments = checkoutState.data.getInstruments(method) || [];\n\n    const { paymentForm } = usePaymentFormContext();\n    const { setFieldValue } = paymentForm;\n\n    const accountInstruments = useMemo(() => instruments.filter(isAchInstrument), [instruments]);\n    const isInstrumentFeatureAvailable =\n        !customer?.isGuest && Boolean(method.config.isVaultingEnabled);\n    const shouldShowInstrumentFieldset =\n        isInstrumentFeatureAvailable && accountInstruments.length > 0;\n    const shouldCreateNewInstrument = shouldShowInstrumentFieldset && !currentInstrument;\n    const shouldConfirmInstrument =\n        shouldShowInstrumentFieldset &&\n        !!currentInstrument &&\n        !currentInstrument.trustedShippingAddress;\n\n    const getDefaultInstrument = useCallback((): AchInstrument | undefined => {\n        if (!accountInstruments.length) {\n            return;\n        }\n\n        const defaultAccountInstrument = accountInstruments.filter(\n            ({ defaultInstrument }) => defaultInstrument,\n        );\n\n        return defaultAccountInstrument[0] || accountInstruments[0];\n    }, [accountInstruments]);\n\n    useEffect(() => {\n        setCurrentInstrument(isInstrumentFeatureAvailable ? getDefaultInstrument() : undefined);\n    }, [isInstrumentFeatureAvailable, getDefaultInstrument]);\n\n    useEffect(() => {\n        if (!shouldShowInstrumentFieldset) {\n            setFieldValue('instrumentId', '');\n        }\n    }, [setFieldValue, shouldShowInstrumentFieldset]);\n\n    const handleSelectInstrument = useCallback(\n        (id: string) => {\n            setCurrentInstrument(find(accountInstruments, { bigpayToken: id }));\n            setFieldValue('instrumentId', id);\n            setFieldValue('shouldSetAsDefaultInstrument', false);\n        },\n        [accountInstruments, setFieldValue],\n    );\n\n    const handleUseNewInstrument = useCallback(() => {\n        setCurrentInstrument(undefined);\n        setFieldValue('instrumentId', '');\n        setFieldValue('shouldSaveInstrument', false);\n        setFieldValue('shouldSetAsDefaultInstrument', false);\n    }, [setFieldValue]);\n\n    return {\n        accountInstruments,\n        currentInstrument,\n        handleSelectInstrument,\n        handleUseNewInstrument,\n        isInstrumentFeatureAvailable,\n        shouldShowInstrumentFieldset,\n        shouldCreateNewInstrument,\n        shouldConfirmInstrument,\n    };\n};\n\nexport default useBraintreeAchInstruments;\n","import { type PaymentMethod } from '@bigcommerce/checkout-sdk';\nimport { useCallback } from 'react';\nimport { object, string, type StringSchema } from 'yup';\n\nimport { useLocale } from '@bigcommerce/checkout/locale';\nimport {\n    type PaymentFormValues,\n    usePaymentFormContext,\n} from '@bigcommerce/checkout/payment-integration-api';\n\nimport {\n    BraintreeAchFieldType,\n    businessBraintreeAchFormFields,\n    OwnershipTypes,\n    personalBraintreeAchFormFields,\n} from '../constants';\n\nconst useBraintreeAchValidation = (method: PaymentMethod) => {\n    const { paymentForm } = usePaymentFormContext();\n    const { language } = useLocale();\n\n    const getValidationSchema = () => {\n        const ownershipType = paymentForm.getFieldValue('ownershipType');\n        const formFields =\n            ownershipType === OwnershipTypes.Business\n                ? businessBraintreeAchFormFields\n                : personalBraintreeAchFormFields;\n\n        const requiredFieldErrorTranslationIds: { [fieldName: string]: string } = {\n            [BraintreeAchFieldType.FirstName]: 'address.first_name',\n            [BraintreeAchFieldType.LastName]: 'address.last_name',\n            [BraintreeAchFieldType.AccountNumber]: 'payment.errors.account_number',\n            [BraintreeAchFieldType.RoutingNumber]: 'payment.errors.routing_number',\n            [BraintreeAchFieldType.BusinessName]: 'payment.errors.business_name',\n        };\n\n        return object(\n            formFields.reduce(\n                (schema, { id, required }) => {\n                    if (required) {\n                        if (requiredFieldErrorTranslationIds[id]) {\n                            schema[id] = string().required(\n                                language.translate(\n                                    `${requiredFieldErrorTranslationIds[id]}_required_error`,\n                                ),\n                            );\n\n                            if (id === BraintreeAchFieldType.AccountNumber) {\n                                schema[id] = schema[id].matches(\n                                    /^\\d+$/,\n                                    language.translate('payment.errors.only_numbers_error', {\n                                        label: language.translate('payment.account_number_label'),\n                                    }),\n                                );\n                            }\n\n                            if (id === BraintreeAchFieldType.RoutingNumber) {\n                                schema[id] = schema[id]\n                                    .matches(\n                                        /^\\d+$/,\n                                        language.translate('payment.errors.only_numbers_error', {\n                                            label: language.translate(\n                                                'payment.account_routing_label',\n                                            ),\n                                        }),\n                                    )\n                                    .min(\n                                        8,\n                                        language.translate('customer.min_error', {\n                                            label: language.translate(\n                                                'payment.account_routing_label',\n                                            ),\n                                            min: 8,\n                                        }),\n                                    )\n                                    .max(\n                                        9,\n                                        language.translate('customer.max_error', {\n                                            label: language.translate(\n                                                'payment.account_routing_label',\n                                            ),\n                                            max: 9,\n                                        }),\n                                    );\n                            }\n                        }\n                    }\n\n                    return schema;\n                },\n                // eslint-disable-next-line @typescript-eslint/prefer-reduce-type-parameter\n                {} as { [key: string]: StringSchema },\n            ),\n        );\n    };\n\n    const validateBraintreeAchForm = useCallback(\n        async (braintreeAchFormValues: PaymentFormValues): Promise<boolean> => {\n            const {\n                accountNumber,\n                businessName,\n                routingNumber,\n                ownershipType,\n                firstName,\n                lastName,\n            } = braintreeAchFormValues;\n\n            const validationSchema = getValidationSchema();\n\n            paymentForm.setValidationSchema(method, validationSchema);\n\n            const [\n                isValidAccountNumber,\n                isValidRoutingNumber,\n                isValidFirstName,\n                isValidLastName,\n                isValidBusinessName,\n            ] = await Promise.all([\n                await validationSchema.fields.accountNumber?.isValid(accountNumber),\n                await validationSchema.fields.routingNumber?.isValid(routingNumber),\n                await validationSchema.fields.firstName?.isValid(firstName),\n                await validationSchema.fields.lastName?.isValid(lastName),\n                await validationSchema.fields.businessName?.isValid(businessName),\n            ]);\n\n            const isValidDepositoryName =\n                ownershipType === OwnershipTypes.Business\n                    ? isValidBusinessName\n                    : isValidFirstName && isValidLastName;\n\n            return isValidRoutingNumber && isValidAccountNumber && isValidDepositoryName;\n        },\n        [getValidationSchema],\n    );\n\n    const resetFormValidation = useCallback(() => {\n        paymentForm.setValidationSchema(method, null);\n    }, [paymentForm, method]);\n\n    return {\n        validateBraintreeAchForm,\n        resetFormValidation,\n    };\n};\n\nexport default useBraintreeAchValidation;\n","import { type LanguageService } from '@bigcommerce/checkout-sdk';\nimport React, { type FunctionComponent, useCallback } from 'react';\n\nimport { useLocale } from '@bigcommerce/checkout/locale';\nimport { usePaymentFormContext } from '@bigcommerce/checkout/payment-integration-api';\nimport { DynamicFormField } from '@bigcommerce/checkout/ui';\n\nimport {\n    BraintreeAchFieldType,\n    businessBraintreeAchFormFields,\n    OwnershipTypes,\n    personalBraintreeAchFormFields,\n} from '../constants';\n\nconst isBraintreeAchFormFieldName = (fieldName: string): fieldName is BraintreeAchFieldType => {\n    return Object.values(BraintreeAchFieldType).includes(fieldName as BraintreeAchFieldType);\n};\n\nconst getTranslatedLabelByFieldName = (fieldName: string, language: LanguageService) => {\n    const braintreeAchFormLabelsMap = {\n        firstName: language.translate('address.first_name_label'),\n        lastName: language.translate('address.last_name_label'),\n        accountNumber: language.translate('payment.account_number_label'),\n        routingNumber: language.translate('payment.account_routing_label'),\n        businessName: language.translate('payment.business_name_label'),\n        ownershipType: language.translate('payment.ownership_type_label'),\n        accountType: language.translate('payment.account_type_label'),\n    };\n\n    return isBraintreeAchFormFieldName(fieldName)\n        ? braintreeAchFormLabelsMap[fieldName]\n        : fieldName;\n};\n\nconst BraintreeAchFormFields: FunctionComponent = () => {\n    const { language } = useLocale();\n    const { paymentForm } = usePaymentFormContext();\n    const { getFieldValue, setFieldValue } = paymentForm;\n\n    const ownershipTypeValue = getFieldValue(BraintreeAchFieldType.OwnershipType);\n    const fieldValues =\n        ownershipTypeValue === OwnershipTypes.Business\n            ? businessBraintreeAchFormFields\n            : personalBraintreeAchFormFields;\n\n    const handleChange = useCallback(\n        (fieldId: string) => (value: string) => {\n            setFieldValue(fieldId, value);\n        },\n        [setFieldValue],\n    );\n\n    return (\n        <>\n            {fieldValues.map((field) => (\n                <DynamicFormField\n                    extraClass={`dynamic-form-field--${field.id}`}\n                    field={field}\n                    key={field.id}\n                    label={getTranslatedLabelByFieldName(field.name, language)}\n                    onChange={handleChange(field.id)}\n                />\n            ))}\n        </>\n    );\n};\n\nexport default BraintreeAchFormFields;\n","import React, { type FunctionComponent, useEffect } from 'react';\n\nimport { useLocale } from '@bigcommerce/checkout/locale';\nimport { useCheckout, usePaymentFormContext } from '@bigcommerce/checkout/payment-integration-api';\nimport { CheckboxFormField } from '@bigcommerce/checkout/ui';\n\nimport { OwnershipTypes } from '../constants';\n\nexport interface BraintreeAchMandateTextProps {\n    isInstrumentFeatureAvailable?: boolean;\n    updateMandateText: (mandateText: string) => void;\n}\n\nconst BraintreeAchMandateText: FunctionComponent<BraintreeAchMandateTextProps> = ({\n    isInstrumentFeatureAvailable,\n    updateMandateText,\n}) => {\n    const { checkoutState } = useCheckout();\n    const { paymentForm } = usePaymentFormContext();\n    const { language } = useLocale();\n\n    const {\n        businessName,\n        accountType,\n        accountNumber,\n        routingNumber,\n        ownershipType,\n        firstName,\n        lastName,\n    } = paymentForm.getFormValues();\n\n    const fullName = `${String(firstName)} ${String(lastName)}`;\n\n    const depositoryName = ownershipType === OwnershipTypes.Business ? businessName : fullName;\n    const outstandingBalance = checkoutState.data.getCheckout()?.outstandingBalance;\n    const storeName = checkoutState.data.getConfig()?.storeProfile.storeName;\n    const symbol = checkoutState.data.getCart()?.currency.symbol;\n\n    const mandateTextTranslationKey = isInstrumentFeatureAvailable\n        ? 'payment.braintreeach_vaulting_mandate_text'\n        : 'payment.braintreeach_mandate_text';\n\n    const currentDate = new Date(Date.now()).toJSON().slice(0, 10); // yyyy-mm-dd\n    const formattedDate = currentDate.split('-').reverse().join('.'); // dd.mm.yyyy\n\n    const mandateTextTranslationProps = {\n        accountType: String(accountType).toLowerCase(),\n        accountNumber: String(accountNumber),\n        currentDate: formattedDate,\n        depositoryName: String(depositoryName),\n        routingNumber: String(routingNumber),\n        outstandingBalance: `${symbol || ''}${outstandingBalance || ''}`,\n        storeName: String(storeName),\n    };\n\n    const mandateText = language.translate(mandateTextTranslationKey, mandateTextTranslationProps);\n\n    useEffect(() => {\n        updateMandateText(mandateText);\n    }, [mandateText, updateMandateText]);\n\n    const handleChange = (value: boolean) => {\n        paymentForm.setFieldValue('orderConsent', value);\n    };\n\n    return (\n        <div className=\"mandate-text\" data-test=\"mandate-text\">\n            <CheckboxFormField\n                labelContent={mandateText}\n                name=\"orderConsent\"\n                onChange={handleChange}\n            />\n        </div>\n    );\n};\n\nexport default BraintreeAchMandateText;\n","import { type PaymentMethod } from '@bigcommerce/checkout-sdk';\nimport React, { type FunctionComponent, useEffect, useState } from 'react';\n\nimport {\n    AccountInstrumentFieldset,\n    StoreInstrumentFieldset,\n} from '@bigcommerce/checkout/instrument-utils';\nimport { TranslatedString } from '@bigcommerce/checkout/locale';\nimport { useCheckout, usePaymentFormContext } from '@bigcommerce/checkout/payment-integration-api';\n\nimport { AccountTypes, OwnershipTypes } from '../constants';\nimport useBraintreeAchInstruments from '../hooks/useBraintreeAchInstruments';\nimport useBraintreeAchValidation from '../hooks/useBraintreeAchValidation';\n\nimport BraintreeAchFormFields from './BraintreeAchFormFields';\nimport BraintreeAchMandateText from './BraintreeAchMandateText';\n\nexport interface BraintreeAchPaymentFormProps {\n    method: PaymentMethod;\n    updateMandateText: (mandateText: string) => void;\n}\n\nconst BraintreeAchPaymentForm: FunctionComponent<BraintreeAchPaymentFormProps> = ({\n    method,\n    updateMandateText,\n}) => {\n    const [isValidForm, setIsValidForm] = useState(false);\n    const { checkoutState } = useCheckout();\n    const { paymentForm } = usePaymentFormContext();\n    const { disableSubmit, getFieldValue, getFormValues, setFieldValue } = paymentForm;\n    const {\n        accountInstruments,\n        currentInstrument,\n        handleSelectInstrument,\n        handleUseNewInstrument,\n        isInstrumentFeatureAvailable,\n        shouldShowInstrumentFieldset,\n        shouldCreateNewInstrument,\n        shouldConfirmInstrument,\n    } = useBraintreeAchInstruments(method);\n    const { validateBraintreeAchForm, resetFormValidation } = useBraintreeAchValidation(method);\n\n    const resetFormValues = () => {\n        const { firstName, lastName } = checkoutState.data.getBillingAddress() || {};\n\n        const defaultFormValues = {\n            ownershipType: OwnershipTypes.Personal,\n            accountType: AccountTypes.Savings,\n            accountNumber: '',\n            routingNumber: '',\n            businessName: '',\n            firstName: firstName || '',\n            lastName: lastName || '',\n            shouldSaveInstrument: false,\n            shouldSetAsDefaultInstrument: false,\n            instrumentId: currentInstrument?.bigpayToken || '',\n            orderConsent: false,\n        };\n\n        for (const [key, value] of Object.entries(defaultFormValues)) {\n            setFieldValue(key, value);\n        }\n    };\n\n    useEffect(() => {\n        resetFormValues();\n    }, [currentInstrument?.bigpayToken]);\n\n    const shouldShowForm =\n        !shouldShowInstrumentFieldset || shouldCreateNewInstrument || shouldConfirmInstrument;\n    const shouldShowMandateTextCheckbox = shouldShowForm && isValidForm && !shouldConfirmInstrument;\n\n    useEffect(() => {\n        if (shouldShowForm) {\n            const validate = async () => {\n                const braintreeAchFormValues = getFormValues();\n                const isValid = await validateBraintreeAchForm(braintreeAchFormValues);\n\n                if (!isValid && getFieldValue('orderConsent')) {\n                    setFieldValue('orderConsent', false);\n                }\n\n                setIsValidForm(isValid);\n            };\n\n            void validate();\n        } else {\n            resetFormValidation();\n        }\n    }, [\n        getFormValues,\n        setFieldValue,\n        setIsValidForm,\n        shouldShowForm,\n        validateBraintreeAchForm,\n        resetFormValidation,\n    ]);\n\n    useEffect(() => {\n        const mandateTextConfirmationCheckboxValue = getFieldValue('orderConsent');\n\n        const inValidForInstrumentConfirmation = shouldConfirmInstrument && !isValidForm;\n        const inValidForDefaultTransactions =\n            shouldShowMandateTextCheckbox && !mandateTextConfirmationCheckboxValue;\n\n        const shouldDisableSubmit = shouldShowForm\n            ? inValidForInstrumentConfirmation || inValidForDefaultTransactions\n            : false;\n\n        disableSubmit(method, shouldDisableSubmit);\n    }, [disableSubmit, getFieldValue, isValidForm, method, shouldShowMandateTextCheckbox]);\n\n    return (\n        <div className=\"checkout-ach-form\" data-test=\"checkout-ach-form\">\n            {shouldShowInstrumentFieldset && (\n                <div className=\"checkout-ach-form__instrument\">\n                    <AccountInstrumentFieldset\n                        instruments={accountInstruments}\n                        onSelectInstrument={handleSelectInstrument}\n                        onUseNewInstrument={handleUseNewInstrument}\n                        selectedInstrument={currentInstrument}\n                    />\n                </div>\n            )}\n\n            {shouldConfirmInstrument && (\n                <p>\n                    <strong>\n                        <TranslatedString id=\"payment.bank_account_instrument_trusted_shipping_address_title_text\" />\n                    </strong>\n\n                    <br />\n\n                    <TranslatedString id=\"payment.bank_account_instrument_trusted_shipping_address_text\" />\n                </p>\n            )}\n\n            {shouldShowForm && <BraintreeAchFormFields />}\n\n            {isInstrumentFeatureAvailable && (\n                <StoreInstrumentFieldset\n                    instrumentId={currentInstrument?.bigpayToken}\n                    instruments={accountInstruments}\n                    isAccountInstrument\n                />\n            )}\n\n            {shouldShowMandateTextCheckbox && (\n                <BraintreeAchMandateText\n                    isInstrumentFeatureAvailable={isInstrumentFeatureAvailable}\n                    updateMandateText={updateMandateText}\n                />\n            )}\n        </div>\n    );\n};\n\nexport default BraintreeAchPaymentForm;\n","import React, { type FunctionComponent, useEffect, useRef } from 'react';\n\nimport { LocaleProvider } from '@bigcommerce/checkout/locale';\nimport {\n    CheckoutContext,\n    PaymentFormContext,\n    type PaymentMethodProps,\n    type PaymentMethodResolveId,\n    toResolvableComponent,\n} from '@bigcommerce/checkout/payment-integration-api';\nimport { FormContext, LoadingOverlay } from '@bigcommerce/checkout/ui';\n\nimport BraintreeAchPaymentForm from './components/BraintreeAchPaymentForm';\n\nconst BraintreeAchPaymentMethod: FunctionComponent<PaymentMethodProps> = ({\n    method,\n    checkoutService,\n    checkoutState,\n    onUnhandledError,\n    paymentForm,\n}) => {\n    const currentMandateTextRef = useRef('');\n    const updateMandateText = (currentMandateText: string) => {\n        currentMandateTextRef.current = currentMandateText;\n    };\n\n    useEffect(() => {\n        const initializePaymentOrThrow = async () => {\n            try {\n                await checkoutService.initializePayment({\n                    gatewayId: method.gateway,\n                    methodId: method.id,\n                    braintreeach: {\n                        getMandateText: () => currentMandateTextRef.current,\n                    },\n                });\n            } catch (error) {\n                if (error instanceof Error) {\n                    onUnhandledError(error);\n                }\n            }\n        };\n\n        void initializePaymentOrThrow();\n\n        return () => {\n            const deinitializePaymentOrThrow = async () => {\n                try {\n                    await checkoutService.deinitializePayment({\n                        gatewayId: method.gateway,\n                        methodId: method.id,\n                    });\n                } catch (error) {\n                    if (error instanceof Error) {\n                        onUnhandledError(error);\n                    }\n                }\n            };\n\n            void deinitializePaymentOrThrow();\n        };\n    }, [checkoutService, method.gateway, method.id, onUnhandledError]);\n\n    useEffect(() => {\n        const loadInstrumentsOrThrow = async () => {\n            try {\n                await checkoutService.loadInstruments();\n            } catch (error) {\n                if (error instanceof Error) {\n                    onUnhandledError(error);\n                }\n            }\n        };\n\n        const { isGuest } = checkoutState.data.getCustomer() || {};\n\n        const shouldLoadInstruments = !isGuest && method.config.isVaultingEnabled;\n\n        if (shouldLoadInstruments) {\n            void loadInstrumentsOrThrow();\n        }\n    }, []);\n\n    const isLoading =\n        checkoutState.statuses.isLoadingInstruments() ||\n        checkoutState.statuses.isLoadingPaymentMethod(method.id);\n\n    const formContextProps = {\n        isSubmitted: paymentForm.isSubmitted(),\n        setSubmitted: paymentForm.setSubmitted,\n    };\n\n    return (\n        <FormContext.Provider value={formContextProps}>\n            <CheckoutContext.Provider value={{ checkoutState, checkoutService }}>\n                <LocaleProvider checkoutService={checkoutService}>\n                    <PaymentFormContext.Provider value={{ paymentForm }}>\n                        <LoadingOverlay hideContentWhenLoading isLoading={isLoading}>\n                            <BraintreeAchPaymentForm\n                                method={method}\n                                updateMandateText={updateMandateText}\n                            />\n                        </LoadingOverlay>\n                    </PaymentFormContext.Provider>\n                </LocaleProvider>\n            </CheckoutContext.Provider>\n        </FormContext.Provider>\n    );\n};\n\nexport default toResolvableComponent<PaymentMethodProps, PaymentMethodResolveId>(\n    BraintreeAchPaymentMethod,\n    [{ id: 'braintreeach' }],\n);\n","import { noop } from 'lodash';\nimport { useCallback, useMemo } from 'react';\n\nimport { type PaymentMethodProps } from '@bigcommerce/checkout/payment-integration-api';\n\nexport const usePropsToOnMount = (props: PaymentMethodProps): (() => () => void) => {\n    const { checkoutService, method, onUnhandledError = noop } = props;\n    const { initializePayment, deinitializePayment } = checkoutService;\n\n    const options = useMemo(\n        () => ({\n            gatewayId: method.gateway,\n            methodId: method.id,\n        }),\n        [method.gateway, method.id],\n    );\n\n    const onInit = useCallback(() => initializePayment(options), [initializePayment, options]);\n    const onDeinit = useCallback(\n        () => deinitializePayment(options),\n        [deinitializePayment, options],\n    );\n\n    return useCallback(() => {\n        onInit().catch(onUnhandledError);\n\n        return () => {\n            onDeinit().catch(onUnhandledError);\n        };\n    }, [onInit, onUnhandledError, onDeinit]);\n};\n","import { type ComponentType } from 'react';\n\nimport { HostedCreditCardPaymentMethod } from '@bigcommerce/checkout/hosted-credit-card-integration';\n\nimport { NoUI } from './NoUI';\n\ntype ComponentMap = Record<string, ComponentType<any>>;\n\nexport const initializationComponentMap: ComponentMap = {\n    // eslint-disable-next-line @typescript-eslint/naming-convention\n    card_ui: HostedCreditCardPaymentMethod,\n    none: NoUI,\n};\n","import React, { useEffect } from 'react';\n\nimport { type PaymentMethodProps } from '@bigcommerce/checkout/payment-integration-api';\n\nimport { usePropsToOnMount } from './usePropsToOnMount';\n\nexport const NoUI = (props: PaymentMethodProps) => {\n    const onMount = usePropsToOnMount(props);\n\n    useEffect(onMount, [onMount]);\n\n    // eslint-disable-next-line react/jsx-no-useless-fragment\n    return <></>;\n};\n","import { noop } from 'lodash';\nimport React, { type FunctionComponent } from 'react';\n\nimport {\n    type PaymentMethodProps,\n    toResolvableComponent,\n} from '@bigcommerce/checkout/payment-integration-api';\n\nimport { initializationComponentMap } from './initializationComponentMap';\n\nconst PPSDKPaymentMethod: FunctionComponent<PaymentMethodProps> = (props) => {\n    const { method, onUnhandledError = noop } = props;\n\n    const componentKey = method.initializationStrategy?.type || '';\n    const Component = initializationComponentMap[componentKey];\n\n    // eslint-disable-next-line @typescript-eslint/no-unnecessary-condition\n    if (!Component) {\n        onUnhandledError(new Error('PPSDK initialization strategy not found'));\n\n        return null;\n    }\n\n    return <Component {...props} />;\n};\n\nexport default toResolvableComponent(PPSDKPaymentMethod, [\n    {\n        type: 'PAYMENT_TYPE_SDK',\n    },\n]);\n","import classNames from 'classnames';\nimport React, {\n    type FunctionComponent,\n    memo,\n    type ReactNode,\n    useCallback,\n    useContext,\n} from 'react';\nimport { CSSTransition } from 'react-transition-group';\n\nimport AccordionContext from './AccordionContext';\n\nexport interface AccordionItemProps {\n    bodyClassName?: string;\n    children?: ReactNode;\n    className?: string;\n    classNameSelected?: string;\n    headerClassName?: string;\n    headerClassNameSelected?: string;\n    itemId: string;\n    headerContent(props: AccordionItemHeaderProps): ReactNode;\n}\n\nexport interface AccordionItemHeaderProps {\n    isSelected: boolean;\n    onToggle(id: string): void;\n}\n\nconst AccordionItem: FunctionComponent<AccordionItemProps> = ({\n    bodyClassName = 'accordion-item-body',\n    children,\n    className = 'accordion-item',\n    classNameSelected = 'accordion-item--selected',\n    headerClassName = 'accordion-item-header',\n    headerClassNameSelected = 'accordion-item-header--selected',\n    headerContent,\n    itemId,\n}) => {\n    const { onToggle, selectedItemId } = useContext(AccordionContext);\n    const isSelected = selectedItemId === itemId;\n\n    const transitionEndListener = useCallback((node: Node, done: () => void) => {\n        node.addEventListener('transitionend', ({ target }: Event) => {\n            if (target === node) {\n                done();\n            }\n        });\n    }, []);\n\n    return (\n        <li className={classNames(className, { [classNameSelected]: isSelected })}>\n            <div className={classNames(headerClassName, { [headerClassNameSelected]: isSelected })}>\n                {headerContent({ isSelected, onToggle })}\n            </div>\n\n            {children ? (\n                <CSSTransition\n                    addEndListener={transitionEndListener}\n                    classNames={bodyClassName}\n                    in={isSelected}\n                    mountOnEnter\n                    timeout={{}}\n                    unmountOnExit\n                >\n                    <div aria-live=\"polite\" className={bodyClassName}>\n                        {children}\n                    </div>\n                </CSSTransition>\n            ) : null}\n        </li>\n    );\n};\n\nexport default memo(AccordionItem);\n","import React, { type FunctionComponent, type InputHTMLAttributes } from 'react';\n\nimport Input from './Input';\nimport Label from './Label';\n\nexport interface ChecklistItemInputProps extends InputHTMLAttributes<HTMLInputElement> {\n    isSelected: boolean;\n}\n\nconst ChecklistItemInput: FunctionComponent<ChecklistItemInputProps> = ({\n    id,\n    isSelected,\n    children,\n    ...props\n}) => (\n    <>\n        <Input\n            {...props}\n            checked={isSelected}\n            className=\"form-checklist-checkbox optimizedCheckout-form-checklist-checkbox\"\n            id={id}\n            type=\"radio\"\n        />\n\n        <Label htmlFor={id}>{children}</Label>\n    </>\n);\n\nexport default ChecklistItemInput;\n","import { memoizeOne } from '@bigcommerce/memoize';\nimport { type FieldProps } from 'formik';\nimport { kebabCase } from 'lodash';\nimport React, { type FunctionComponent, memo, type ReactNode, useCallback, useContext } from 'react';\n\nimport { AccordionItem, type AccordionItemHeaderProps } from '@bigcommerce/checkout/ui';\n\nimport BasicFormField from './BasicFormField';\nimport { ChecklistContext } from './Checklist';\nimport ChecklistItemInput from './ChecklistItemInput';\n\nexport interface ChecklistItemProps {\n    content?: ReactNode;\n    htmlId?: string;\n    isDisabled?: boolean;\n    label: ReactNode | ((isSelected: boolean) => ReactNode);\n    value: string;\n}\n\nconst ChecklistItem: FunctionComponent<ChecklistItemProps> = ({\n    isDisabled,\n    value,\n    content,\n    htmlId = kebabCase(value),\n    label,\n    ...rest\n}) => {\n    const { name = '' } = useContext(ChecklistContext) || {};\n\n    const renderInput = useCallback(\n        memoizeOne((isSelected: boolean) => ({ field }: FieldProps) => (\n            <ChecklistItemInput\n                {...field}\n                disabled={isDisabled}\n                id={htmlId}\n                isSelected={field.value === value}\n                value={value}\n            >\n                {label instanceof Function ? label(isSelected) : label}\n            </ChecklistItemInput>\n        )),\n        [htmlId, isDisabled, label, value],\n    );\n\n    const handleChange = useCallback(\n        memoizeOne((onToggle: (id: string) => void) => (selectedValue: string) => {\n            if (value === selectedValue) {\n                onToggle(value);\n            }\n        }),\n        [],\n    );\n\n    const renderHeaderContent = useCallback(\n        ({ isSelected, onToggle }: AccordionItemHeaderProps) => (\n            <BasicFormField\n                className=\"form-checklist-option\"\n                name={name}\n                onChange={handleChange(onToggle)}\n                render={renderInput(isSelected)}\n            />\n        ),\n        [handleChange, name, renderInput],\n    );\n\n    return (\n        <AccordionItem\n            {...rest}\n            bodyClassName=\"form-checklist-body\"\n            className=\"form-checklist-item optimizedCheckout-form-checklist-item\"\n            classNameSelected=\"form-checklist-item--selected optimizedCheckout-form-checklist-item--selected\"\n            headerClassName=\"form-checklist-header\"\n            headerClassNameSelected=\"form-checklist-header--selected\"\n            headerContent={renderHeaderContent}\n            itemId={value}\n        >\n            {content}\n        </AccordionItem>\n    );\n};\n\nexport default memo(ChecklistItem);\n","import { type Placement } from '@popperjs/core';\nimport React, { type ReactEventHandler, type ReactNode, useState } from 'react';\nimport { Manager, Popper, Reference } from 'react-popper';\n\nexport interface TooltipTriggerProps {\n    placement?: Placement;\n    tooltip: ReactNode;\n    children: ReactNode;\n}\n\nconst TooltipTrigger: React.FC<TooltipTriggerProps> = ({\n    placement = 'bottom',\n    tooltip,\n    children,\n}) => {\n    const [shouldShow, setShouldShow] = useState(false);\n\n    const handleShow: ReactEventHandler<HTMLElement> = () => {\n        setShouldShow(true);\n    };\n\n    const handleHide: ReactEventHandler<HTMLElement> = () => {\n        setShouldShow(false);\n    };\n\n    return (\n        <Manager>\n            <Reference>\n                {({ ref }) => (\n                    <span\n                        onBlur={handleHide}\n                        onFocus={handleShow}\n                        onMouseEnter={handleShow}\n                        onMouseLeave={handleHide}\n                        ref={ref}\n                    >\n                        {children}\n                    </span>\n                )}\n            </Reference>\n\n            <Popper\n                modifiers={[\n                    { name: 'hide', enabled: false },\n                    { name: 'flip', enabled: false },\n                    { name: 'preventOverflow', enabled: false },\n                ]}\n                placement={placement}\n            >\n                {({ ref, style }) =>\n                    shouldShow && (\n                        <div ref={ref} style={style}>\n                            {tooltip}\n                        </div>\n                    )\n                }\n            </Popper>\n        </Manager>\n    );\n};\n\nexport default TooltipTrigger;\n","import { type CheckoutService, type PaymentInitializeOptions } from '@bigcommerce/checkout-sdk';\nimport React, { type FunctionComponent, useCallback } from 'react';\n\nimport { HostedPaymentComponent } from '@bigcommerce/checkout/hosted-payment-integration';\nimport { type PaymentMethodProps } from '@bigcommerce/checkout/payment-integration-api';\n\nconst BoltClientPaymentMethod: FunctionComponent<PaymentMethodProps> = ({\n    checkoutService,\n    checkoutState,\n    method,\n    ...rest\n}) => {\n    const initializeBoltPayment: CheckoutService['initializePayment'] = useCallback(\n        (options: PaymentInitializeOptions) =>\n            checkoutService.initializePayment({\n                ...options,\n                bolt: {\n                    useBigCommerceCheckout: true,\n                },\n            }),\n        [checkoutService],\n    );\n\n    return (\n        <HostedPaymentComponent\n            checkoutService={checkoutService}\n            checkoutState={checkoutState}\n            deinitializePayment={checkoutService.deinitializePayment}\n            initializePayment={initializeBoltPayment}\n            method={method}\n            {...rest}\n        />\n    );\n};\n\nexport default BoltClientPaymentMethod;\n","import React, { type FunctionComponent } from 'react';\n\nimport { HostedPaymentComponent } from '@bigcommerce/checkout/hosted-payment-integration';\nimport {\n    type PaymentMethodProps,\n    type PaymentMethodResolveId,\n    toResolvableComponent,\n} from '@bigcommerce/checkout/payment-integration-api';\n\nconst ClearpayPaymentMethod: FunctionComponent<PaymentMethodProps> = ({\n    checkoutService,\n    checkoutState,\n    method,\n    paymentForm,\n    ...rest\n}) => {\n    return (\n        <HostedPaymentComponent\n            {...rest}\n            checkoutService={checkoutService}\n            checkoutState={checkoutState}\n            deinitializePayment={checkoutService.deinitializePayment}\n            initializePayment={checkoutService.initializePayment}\n            method={method}\n            paymentForm={paymentForm}\n        />\n    );\n};\n\nexport default toResolvableComponent<PaymentMethodProps, PaymentMethodResolveId>(\n    ClearpayPaymentMethod,\n    [{ gateway: 'clearpay' }],\n);\n","import React, { type FunctionComponent, useEffect } from 'react';\n\nimport {\n    type PaymentMethodProps,\n    type PaymentMethodResolveId,\n    toResolvableComponent,\n} from '@bigcommerce/checkout/payment-integration-api';\n\nconst ApplePayPaymentMethod: FunctionComponent<PaymentMethodProps> = ({\n    method,\n    checkoutService,\n    language,\n    onUnhandledError,\n}) => {\n    useEffect(() => {\n        const initializePayment = async () => {\n            try {\n                await checkoutService.initializePayment({\n                    gatewayId: method.gateway,\n                    methodId: method.id,\n                    applepay: {\n                        shippingLabel: language.translate('cart.shipping_text'),\n                        subtotalLabel: language.translate('cart.subtotal_text'),\n                    },\n                });\n            } catch (error) {\n                if (error instanceof Error) {\n                    onUnhandledError(error);\n                }\n            }\n        };\n\n        void initializePayment();\n\n        return () => {\n            const deinitializePayment = async () => {\n                try {\n                    await checkoutService.deinitializePayment({\n                        gatewayId: method.gateway,\n                        methodId: method.id,\n                    });\n                } catch (error) {\n                    if (error instanceof Error) {\n                        onUnhandledError(error);\n                    }\n                }\n            };\n\n            void deinitializePayment();\n        };\n    }, [checkoutService, language, method, onUnhandledError]);\n\n    // eslint-disable-next-line react/jsx-no-useless-fragment\n    return <></>;\n};\n\nexport default toResolvableComponent<PaymentMethodProps, PaymentMethodResolveId>(\n    ApplePayPaymentMethod,\n    [{ id: 'applepay' }],\n);\n","enum PaymentMethodType {\n    ApplePay = 'applepay',\n    Barclaycard = 'barclaycard',\n    CreditCard = 'credit-card',\n    GooglePay = 'googlepay',\n    PayWithGoogle = 'paywithgoogle',\n    Masterpass = 'masterpass',\n    MultiOption = 'multi-option',\n    Paypal = 'paypal',\n    PaypalCredit = 'paypal-credit',\n    PaypalVenmo = 'paypal-venmo',\n    VisaCheckout = 'visa-checkout',\n}\n\nexport default PaymentMethodType;\n","import React, { type FunctionComponent } from 'react';\n\nimport { HostedPaymentComponent } from '@bigcommerce/checkout/hosted-payment-integration';\nimport {\n    type PaymentMethodProps,\n    type PaymentMethodResolveId,\n    toResolvableComponent,\n} from '@bigcommerce/checkout/payment-integration-api';\n\nconst BarclaycardPaymentMethod: FunctionComponent<PaymentMethodProps> = ({\n    checkoutService,\n    checkoutState,\n    method,\n    paymentForm,\n    ...rest\n}) => {\n    return (\n        <HostedPaymentComponent\n            {...rest}\n            checkoutService={checkoutService}\n            checkoutState={checkoutState}\n            deinitializePayment={checkoutService.deinitializePayment}\n            initializePayment={checkoutService.initializePayment}\n            method={method}\n            paymentForm={paymentForm}\n        />\n    );\n};\n\nexport default toResolvableComponent<PaymentMethodProps, PaymentMethodResolveId>(\n    BarclaycardPaymentMethod,\n    [{ gateway: 'barclaycard' }],\n);\n","import { type CardInstrument } from '@bigcommerce/checkout-sdk';\nimport { useState } from 'react';\n\nimport { useCheckout, usePaymentFormContext } from '@bigcommerce/checkout/payment-integration-api';\nimport { isPayPalFastlaneCustomer } from '@bigcommerce/checkout/paypal-fastlane-integration';\n\nexport const useBraintreeFastlaneInstruments = () => {\n    const [selectedInstrument, setSelectedInstrument] = useState<CardInstrument>();\n\n    const { getPaymentProviderCustomer } = useCheckout().checkoutState.data;\n    const paymentProviderCustomer = getPaymentProviderCustomer();\n    const paypalFastlaneCustomer = isPayPalFastlaneCustomer(paymentProviderCustomer)\n        ? paymentProviderCustomer\n        : {};\n\n    const { paymentForm } = usePaymentFormContext();\n\n    const handleSelectInstrument = (instrument: CardInstrument): void => {\n        setSelectedInstrument(instrument);\n        paymentForm.setFieldValue('instrumentId', instrument.bigpayToken);\n    };\n\n    return {\n        instruments: paypalFastlaneCustomer.instruments || [],\n        handleSelectInstrument,\n        selectedInstrument,\n    };\n};\n","import React, { type FunctionComponent, useEffect } from 'react';\n\nimport { type BraintreeFastlaneComponentRef } from '../BraintreeFastlanePaymentMethod';\n\nimport './BraintreeFastlaneCreditCardForm.scss';\n\ninterface BraintreeFastlaneCreditCardFormProps {\n    renderPayPalCardComponent?: BraintreeFastlaneComponentRef['renderPayPalCardComponent'];\n}\n\nconst BraintreeFastlaneCreditCardForm: FunctionComponent<BraintreeFastlaneCreditCardFormProps> = ({\n    renderPayPalCardComponent,\n}) => {\n    useEffect(() => {\n        if (typeof renderPayPalCardComponent === 'function') {\n            renderPayPalCardComponent('#braintree-fastlane-cc-form-container');\n        }\n    }, [renderPayPalCardComponent]);\n\n    return (\n        <div\n            className=\"braintree-fastlane-cc-form-container\"\n            data-test=\"braintree-fastlane-cc-form-container\"\n            id=\"braintree-fastlane-cc-form-container\"\n        />\n    );\n};\n\nexport default BraintreeFastlaneCreditCardForm;\n","import { type CardInstrument } from '@bigcommerce/checkout-sdk';\nimport React, { type FunctionComponent } from 'react';\n\nimport { TranslatedString } from '@bigcommerce/checkout/locale';\nimport { PoweredByPayPalFastlaneLabel } from '@bigcommerce/checkout/paypal-fastlane-integration';\nimport { Button, ButtonSize, ButtonVariant, CreditCardIcon } from '@bigcommerce/checkout/ui';\n\nimport { type BraintreeFastlaneComponentRef } from '../BraintreeFastlanePaymentMethod';\n\nimport './BraintreeFastlaneInstrumentsForm.scss';\n\nfunction mapFromInstrumentCardType(type: string): string {\n    switch (type.toLowerCase()) {\n        case 'amex':\n        case 'american_express':\n            return 'american-express';\n\n        case 'diners':\n            return 'diners-club';\n\n        case 'master_card':\n            return 'mastercard';\n\n        default:\n            return type;\n    }\n}\n\ninterface BraintreeFastlaneInstrumentsFormProps {\n    onChange: BraintreeFastlaneComponentRef['showPayPalCardSelector'];\n    selectedInstrument: CardInstrument;\n    handleSelectInstrument(instrument: CardInstrument): void;\n}\n\nconst BraintreeFastlaneInstrumentsForm: FunctionComponent<\n    BraintreeFastlaneInstrumentsFormProps\n> = ({ onChange, handleSelectInstrument, selectedInstrument }) => {\n    const cardType = mapFromInstrumentCardType(selectedInstrument.brand).toLowerCase();\n\n    const handleChange = async () => {\n        if (typeof onChange === 'function') {\n            const result = await onChange();\n\n            if (result) {\n                handleSelectInstrument(result);\n            }\n        }\n    };\n\n    return (\n        <div\n            className=\"braintree-fastlane-instrument\"\n            data-test=\"braintree-fastlane-instrument-form\"\n        >\n            <div>\n                <div className=\"braintree-fastlane-instrument-details\">\n                    <CreditCardIcon cardType={cardType} />\n\n                    <div\n                        className=\"instrumentSelect-card\"\n                        data-test=\"braintree-fastlane-instrument-last4\"\n                    >\n                        {/* &#9679; is a ● */}\n                        <span>&#9679;&#9679;&#9679;&#9679; {selectedInstrument.last4}</span>\n                    </div>\n                </div>\n                <div className=\"braintree-fastlane-instrument-branding\">\n                    <PoweredByPayPalFastlaneLabel />\n                </div>\n            </div>\n\n            <div className=\"braintree-fastlane-instrument-change-action\">\n                <Button\n                    onClick={handleChange}\n                    size={ButtonSize.Tiny}\n                    testId=\"braintree-fastlane-instrument-change\"\n                    variant={ButtonVariant.Secondary}\n                >\n                    <TranslatedString id=\"common.change_action\" />\n                </Button>\n            </div>\n        </div>\n    );\n};\n\nexport default BraintreeFastlaneInstrumentsForm;\n","import React, { type FunctionComponent, useEffect } from 'react';\n\nimport { type BraintreeFastlaneComponentRef } from '../BraintreeFastlanePaymentMethod';\nimport { useBraintreeFastlaneInstruments } from '../hooks/useBraintreeFastlaneInstruments';\n\nimport BraintreFastlaneCreditCardForm from './BraintreeFastlaneCreditCardForm';\nimport BraintreeFastlaneInstrumentsForm from './BraintreeFastlaneInstrumentsForm';\n\ninterface BraintreeFastlaneFormProps {\n    renderPayPalCardComponent?: BraintreeFastlaneComponentRef['renderPayPalCardComponent'];\n    showPayPalCardSelector?: BraintreeFastlaneComponentRef['showPayPalCardSelector'];\n}\n\nconst BraintreeFastlaneForm: FunctionComponent<BraintreeFastlaneFormProps> = ({\n    renderPayPalCardComponent,\n    showPayPalCardSelector,\n}) => {\n    const { instruments, handleSelectInstrument, selectedInstrument } =\n        useBraintreeFastlaneInstruments();\n\n    const shouldShowInstrumentsForm = instruments.length > 0;\n\n    useEffect(() => {\n        if (!selectedInstrument && instruments.length > 0) {\n            handleSelectInstrument(instruments[0]);\n        }\n    }, [instruments, selectedInstrument]);\n\n    return (\n        <div className=\"paymentMethod paymentMethod--creditCard\" id=\"braintree-fastlane\">\n            {shouldShowInstrumentsForm && (\n                <BraintreeFastlaneInstrumentsForm\n                    handleSelectInstrument={handleSelectInstrument}\n                    onChange={showPayPalCardSelector}\n                    selectedInstrument={selectedInstrument || instruments[0]}\n                />\n            )}\n\n            {!shouldShowInstrumentsForm && (\n                <BraintreFastlaneCreditCardForm\n                    renderPayPalCardComponent={renderPayPalCardComponent}\n                />\n            )}\n        </div>\n    );\n};\n\nexport default BraintreeFastlaneForm;\n","import BraintreeFastlanePaymentMethod from './BraintreeFastlanePaymentMethod';\n\nexport default BraintreeFastlanePaymentMethod;\n","import { type CardInstrument } from '@bigcommerce/checkout-sdk';\nimport React, { type FunctionComponent, useEffect, useRef } from 'react';\n\nimport { LocaleProvider } from '@bigcommerce/checkout/locale';\nimport {\n    CheckoutContext,\n    PaymentFormContext,\n    type PaymentMethodProps,\n    type PaymentMethodResolveId,\n    toResolvableComponent,\n} from '@bigcommerce/checkout/payment-integration-api';\nimport { FormContext, LoadingOverlay } from '@bigcommerce/checkout/ui';\n\nimport BraintreeFastlaneForm from './components/BraintreeFastlaneForm';\n\nimport './BraintreeFastlanePaymentMethod.scss';\n\nexport interface BraintreeFastlaneComponentRef {\n    renderPayPalCardComponent?: (container: string) => void;\n    showPayPalCardSelector?: () => Promise<CardInstrument | undefined>;\n}\n\nconst BraintreeFastlanePaymentMethod: FunctionComponent<PaymentMethodProps> = ({\n    method,\n    checkoutService,\n    checkoutState,\n    onUnhandledError,\n    paymentForm,\n}) => {\n    const paypalFastlaneComponentRef = useRef<BraintreeFastlaneComponentRef>({});\n\n    const { isLoadingPaymentMethod, isInitializingPayment } = checkoutState.statuses;\n\n    const initializePaymentOrThrow = async () => {\n        try {\n            await checkoutService.initializePayment({\n                methodId: method.id,\n                braintreefastlane: {\n                    onInit: (renderPayPalCardComponent) => {\n                        paypalFastlaneComponentRef.current.renderPayPalCardComponent =\n                            renderPayPalCardComponent;\n                    },\n                    onChange: (showPayPalCardSelector) => {\n                        paypalFastlaneComponentRef.current.showPayPalCardSelector =\n                            showPayPalCardSelector;\n                    },\n                    onError: (error: Error) => {\n                        onUnhandledError(error);\n                    },\n                },\n            });\n        } catch (error) {\n            if (error instanceof Error) {\n                onUnhandledError(error);\n            }\n        }\n    };\n\n    const deinitializePaymentOrThrow = async () => {\n        try {\n            await checkoutService.deinitializePayment({\n                methodId: method.id,\n            });\n        } catch (error) {\n            if (error instanceof Error) {\n                onUnhandledError(error);\n            }\n        }\n    };\n\n    useEffect(() => {\n        void initializePaymentOrThrow();\n\n        return () => {\n            void deinitializePaymentOrThrow();\n        };\n    }, []);\n\n    const isLoading = isInitializingPayment() || isLoadingPaymentMethod(method.id);\n\n    const formContextProps = {\n        isSubmitted: paymentForm.isSubmitted(),\n        setSubmitted: paymentForm.setSubmitted,\n    };\n\n    return (\n        <FormContext.Provider value={formContextProps}>\n            <CheckoutContext.Provider value={{ checkoutState, checkoutService }}>\n                <LocaleProvider checkoutService={checkoutService}>\n                    <PaymentFormContext.Provider value={{ paymentForm }}>\n                        <LoadingOverlay hideContentWhenLoading isLoading={isLoading}>\n                            <BraintreeFastlaneForm\n                                renderPayPalCardComponent={\n                                    paypalFastlaneComponentRef?.current?.renderPayPalCardComponent\n                                }\n                                showPayPalCardSelector={\n                                    paypalFastlaneComponentRef.current?.showPayPalCardSelector\n                                }\n                            />\n                        </LoadingOverlay>\n                    </PaymentFormContext.Provider>\n                </LocaleProvider>\n            </CheckoutContext.Provider>\n        </FormContext.Provider>\n    );\n};\n\nexport default toResolvableComponent<PaymentMethodProps, PaymentMethodResolveId>(\n    BraintreeFastlanePaymentMethod,\n    [{ id: 'braintreeacceleratedcheckout' }],\n);\n","import {\n    type CardInstrument,\n    type CheckoutSelectors,\n    type CheckoutService,\n    type PaymentMethod,\n} from '@bigcommerce/checkout-sdk';\nimport classNames from 'classnames';\nimport React, { type FunctionComponent, useCallback, useEffect, useMemo, useState } from 'react';\n\nimport {\n    CardInstrumentFieldset,\n    StoreInstrumentFieldset,\n} from '@bigcommerce/checkout/instrument-utils';\nimport { usePaymentFormContext } from '@bigcommerce/checkout/payment-integration-api';\nimport { LoadingOverlay } from '@bigcommerce/checkout/ui';\n\nexport interface SquareV2FormProps {\n    checkoutService: CheckoutService;\n    checkoutState: CheckoutSelectors;\n    containerId: string;\n    deinitializePayment: () => Promise<void>;\n    initializePayment: () => Promise<void>;\n    method: PaymentMethod;\n}\n\nconst SquareV2Form: FunctionComponent<SquareV2FormProps> = ({\n    checkoutService,\n    checkoutState,\n    containerId,\n    deinitializePayment,\n    initializePayment,\n    method,\n}) => {\n    const [isAddingNewCard, setIsAddingNewCard] = useState(false);\n    const [selectedInstrumentId, setSelectedInstrumentId] = useState<string | undefined>(undefined);\n\n    const { getCustomer, getInstruments } = checkoutState.data;\n    const isSignedIn = getCustomer()?.isGuest;\n    const isInstrumentFeatureAvailable = !isSignedIn && Boolean(method.config.isVaultingEnabled);\n\n    useEffect(() => {\n        if (isInstrumentFeatureAvailable) {\n            void checkoutService.loadInstruments();\n        }\n    }, [checkoutService, isInstrumentFeatureAvailable]);\n\n    const instruments = useMemo(() => getInstruments(method) || [], [getInstruments, method]);\n    const shouldShowInstrumentFieldset = isInstrumentFeatureAvailable && instruments.length > 0;\n    const shouldShowCreditCardFieldset = !shouldShowInstrumentFieldset || isAddingNewCard;\n\n    const getDefaultInstrumentId = useCallback(() => {\n        if (isAddingNewCard) {\n            return;\n        }\n\n        if (instruments.length > 0) {\n            const defaultInstrument =\n                instruments.find((instrument) => instrument.defaultInstrument) || instruments[0];\n\n            return defaultInstrument.bigpayToken;\n        }\n    }, [instruments, isAddingNewCard]);\n\n    useEffect(() => {\n        const defaultInstrumentId = getDefaultInstrumentId() || undefined;\n\n        setSelectedInstrumentId(defaultInstrumentId);\n    }, [getDefaultInstrumentId, instruments]);\n\n    const { setFieldValue } = usePaymentFormContext().paymentForm;\n\n    const handleSelectInstrument: (id: string) => void = (id) => {\n        setIsAddingNewCard(false);\n        setSelectedInstrumentId(id);\n    };\n\n    const handleDeleteInstrument: (id: string) => void = (id) => {\n        if (instruments.length === 0) {\n            setIsAddingNewCard(true);\n            setSelectedInstrumentId(undefined);\n\n            setFieldValue('instrumentId', '');\n        } else if (selectedInstrumentId === id) {\n            setSelectedInstrumentId(getDefaultInstrumentId());\n\n            setFieldValue('instrumentId', getDefaultInstrumentId());\n        }\n    };\n\n    const handleUseNewCard: () => void = () => {\n        setIsAddingNewCard(true);\n        setSelectedInstrumentId(undefined);\n\n        void deinitializePayment();\n\n        void initializePayment();\n    };\n\n    const renderPlaceholderFields = () => {\n        return (\n            <div data-test=\"squarev2_placeholder_form\" style={{ display: 'none' }}>\n                <div className=\"form-field\">\n                    <div\n                        className=\"form-label optimizedCheckout-form-label\"\n                        id=\"messageIsDefault\"\n                    />\n                    <div className=\"form-input optimizedCheckout-form-input\" id=\"inputIsDefault\" />\n                </div>\n                <div className=\"form-field\">\n                    <div\n                        className=\"form-input optimizedCheckout-form-input form-input--focus optimizedCheckout-form-input--focus\"\n                        id=\"inputIsFocus\"\n                    />\n                </div>\n                <div className=\"form-field form-field--error\">\n                    <div className=\"form-inlineMessage\" id=\"messageIsError\" />\n                    <div className=\"form-input optimizedCheckout-form-input\" id=\"inputIsError\" />\n                </div>\n            </div>\n        );\n    };\n\n    const { isLoadingInstruments } = checkoutState.statuses;\n\n    return (\n        <LoadingOverlay\n            data-test=\"squarev2_loading_overlay\"\n            hideContentWhenLoading\n            isLoading={isLoadingInstruments()}\n        >\n            <div className=\"paymentMethod--hosted\">\n                {shouldShowInstrumentFieldset && (\n                    <CardInstrumentFieldset\n                        // eslint-disable-next-line @typescript-eslint/consistent-type-assertions\n                        instruments={instruments as CardInstrument[]}\n                        onDeleteInstrument={handleDeleteInstrument}\n                        onSelectInstrument={handleSelectInstrument}\n                        onUseNewInstrument={handleUseNewCard}\n                        selectedInstrumentId={selectedInstrumentId || getDefaultInstrumentId()}\n                    />\n                )}\n                <div\n                    className={classNames('widget', `widget--${method.id}`, 'payment-widget')}\n                    data-test={containerId}\n                    style={{\n                        display: !shouldShowCreditCardFieldset ? 'none' : undefined,\n                    }}\n                    tabIndex={-1}\n                >\n                    {renderPlaceholderFields()}\n                    <div id={containerId} />\n                </div>\n\n                {isInstrumentFeatureAvailable && (\n                    <StoreInstrumentFieldset\n                        instrumentId={selectedInstrumentId}\n                        instruments={instruments}\n                    />\n                )}\n            </div>\n        </LoadingOverlay>\n    );\n};\n\nexport default SquareV2Form;\n","import { difference } from 'lodash';\nimport React, { type FunctionComponent, useCallback, useEffect } from 'react';\n\nimport { getAppliedStyles } from '@bigcommerce/checkout/dom-utils';\nimport {\n    type PaymentMethodProps,\n    type PaymentMethodResolveId,\n    toResolvableComponent,\n} from '@bigcommerce/checkout/payment-integration-api';\n\nimport SquareV2Form from './SquareV2Form';\n\nconst SquareV2PaymentMethod: FunctionComponent<PaymentMethodProps> = ({\n    method,\n    checkoutService,\n    checkoutState,\n}) => {\n    const getStylesFromElement = (id: string, properties: string[]) => {\n        const container = document.querySelector<HTMLDivElement>(`#${id}`);\n\n        if (!container) {\n            throw new Error(\n                `Unable to retrieve input styles as the provided container ID \"${id}\" is not valid.`,\n            );\n        }\n\n        return getAppliedStyles(container, properties);\n    };\n\n    const copyStylesFromDummyFormFields = useCallback(() => {\n        const styleProps = [\n            'backgroundColor',\n            'borderColor',\n            'borderRadius',\n            'borderWidth',\n            'color',\n            'fontSize',\n            'fontWeight',\n        ];\n\n        return {\n            default: {\n                message: getStylesFromElement('messageIsDefault', ['color']),\n                input: getStylesFromElement('inputIsDefault', styleProps),\n            },\n            focus: {\n                input: getStylesFromElement(\n                    'inputIsFocus',\n                    difference(styleProps, ['borderRadius']),\n                ),\n            },\n            error: {\n                message: getStylesFromElement('messageIsError', ['color']),\n                input: getStylesFromElement('inputIsError', [\n                    'borderColor',\n                    'borderWidth',\n                    'color',\n                ]),\n            },\n        };\n    }, []);\n\n    const mapToSquareStyles = useCallback(\n        (styles: ReturnType<typeof copyStylesFromDummyFormFields>) => {\n            const { borderColor, borderRadius, borderWidth, ...input } = styles.default.input;\n            const {\n                borderColor: borderColorIsFocus,\n                borderWidth: borderWidthIsFocus,\n                ...inputIsFocus\n            } = styles.focus.input;\n            const {\n                borderColor: borderColorIsError,\n                borderWidth: borderWidthIsError,\n                color: colorIsError,\n            } = styles.error.input;\n\n            return {\n                input,\n                'input.is-focus': {\n                    ...inputIsFocus,\n                },\n                'input.is-error': {\n                    color: colorIsError,\n                },\n                '.input-container': {\n                    borderColor,\n                    borderRadius,\n                    borderWidth,\n                },\n                '.input-container.is-focus': {\n                    borderColor: borderColorIsFocus,\n                    borderWidth: borderWidthIsFocus,\n                },\n                '.input-container.is-error': {\n                    borderColor: borderColorIsError,\n                    borderWidth: borderWidthIsError,\n                },\n                '.message-text': {\n                    color: styles.default.message.color,\n                },\n                '.message-icon': {\n                    color: styles.default.message.color,\n                },\n                '.message-text.is-error': {\n                    color: styles.error.message.color,\n                },\n                '.message-icon.is-error': {\n                    color: styles.error.message.color,\n                },\n            };\n        },\n        [],\n    );\n\n    const containerId = 'squarev2_payment_element_container';\n\n    const initializePayment = useCallback(async () => {\n        let style;\n\n        try {\n            style = mapToSquareStyles(copyStylesFromDummyFormFields());\n        } catch {\n            /* Do nothing: we should not block shoppers from buying. */\n        }\n\n        await checkoutService.initializePayment({\n            gatewayId: method.gateway,\n            methodId: method.id,\n            squarev2: {\n                containerId,\n                style,\n            },\n        });\n    }, [\n        checkoutService,\n        copyStylesFromDummyFormFields,\n        mapToSquareStyles,\n        method.gateway,\n        method.id,\n    ]);\n\n    const deinitializePayment = useCallback(async () => {\n        await checkoutService.deinitializePayment({\n            gatewayId: method.gateway,\n            methodId: method.id,\n        });\n    }, [checkoutService, method.gateway, method.id]);\n\n    useEffect(() => {\n        void initializePayment();\n\n        return () => {\n            void deinitializePayment();\n        };\n    }, [deinitializePayment, initializePayment]);\n\n    return (\n        <SquareV2Form\n            checkoutService={checkoutService}\n            checkoutState={checkoutState}\n            containerId={containerId}\n            deinitializePayment={deinitializePayment}\n            initializePayment={initializePayment}\n            method={method}\n        />\n    );\n};\n\nexport default toResolvableComponent<PaymentMethodProps, PaymentMethodResolveId>(\n    SquareV2PaymentMethod,\n    [{ id: 'squarev2' }],\n);\n","import React, { type FunctionComponent, useMemo } from 'react';\n\nimport { HostedPaymentComponent } from '@bigcommerce/checkout/hosted-payment-integration';\nimport { TranslatedString } from '@bigcommerce/checkout/locale';\nimport {\n    type PaymentMethodProps,\n    type PaymentMethodResolveId,\n    toResolvableComponent,\n} from '@bigcommerce/checkout/payment-integration-api';\n\nconst AffirmPaymentMethod: FunctionComponent<PaymentMethodProps> = ({\n    checkoutService,\n    ...rest\n}) => {\n    const description = useMemo(() => <TranslatedString id=\"payment.affirm_body_text\" />, []);\n\n    return (\n        <HostedPaymentComponent\n            {...rest}\n            checkoutService={checkoutService}\n            deinitializePayment={checkoutService.deinitializePayment}\n            description={description}\n            initializePayment={checkoutService.initializePayment}\n        />\n    );\n};\n\nexport default toResolvableComponent<PaymentMethodProps, PaymentMethodResolveId>(\n    AffirmPaymentMethod,\n    [{ id: 'affirm' }],\n);\n","import { type PaymentInitializeOptions } from '@bigcommerce/checkout-sdk';\nimport { some } from 'lodash';\nimport React, { type FunctionComponent, useCallback } from 'react';\n\nimport { HostedWidgetPaymentComponent } from '@bigcommerce/checkout/hosted-widget-integration';\nimport {\n    isInstrumentCardCodeRequiredSelector,\n    isInstrumentCardNumberRequiredSelector,\n} from '@bigcommerce/checkout/instrument-utils';\nimport {\n    type PaymentMethodProps,\n    type PaymentMethodResolveId,\n    toResolvableComponent,\n} from '@bigcommerce/checkout/payment-integration-api';\n\nconst AmazonPayV2PaymentMethod: FunctionComponent<PaymentMethodProps> = ({\n    checkoutService,\n    checkoutState,\n    paymentForm,\n    method,\n    method: {\n        initializationData: { paymentDescriptor, paymentToken },\n    },\n    ...rest\n}) => {\n    const initializeAmazonPayV2Payment = useCallback(\n        (options: PaymentInitializeOptions) =>\n            checkoutService.initializePayment({\n                ...options,\n                amazonpay: {\n                    editButtonId: 'editButtonId',\n                },\n            }),\n        [checkoutService],\n    );\n\n    const reload = useCallback(() => window.location.reload(), []);\n\n    const {\n        hidePaymentSubmitButton,\n        disableSubmit,\n        setFieldValue,\n        setSubmit,\n        setValidationSchema,\n    } = paymentForm;\n\n    const {\n        data: { getCheckout, isPaymentDataRequired },\n        statuses: { isLoadingInstruments },\n    } = checkoutState;\n\n    const checkout = getCheckout();\n    const customer = checkoutState.data.getCustomer();\n    const isGuestCustomer = customer?.isGuest;\n    const isInstrumentFeatureAvailable =\n        !isGuestCustomer && Boolean(method.config.isVaultingEnabled);\n\n    const instruments = checkoutState.data.getInstruments(method) || [];\n\n    return (\n        <HostedWidgetPaymentComponent\n            {...rest}\n            buttonId=\"editButtonId\"\n            containerId=\"paymentWidget\"\n            deinitializePayment={checkoutService.deinitializePayment}\n            disableSubmit={disableSubmit}\n            hidePaymentSubmitButton={hidePaymentSubmitButton}\n            hideWidget\n            initializePayment={initializeAmazonPayV2Payment}\n            instruments={instruments}\n            isInstrumentCardCodeRequired={isInstrumentCardCodeRequiredSelector(checkoutState)}\n            isInstrumentCardNumberRequired={isInstrumentCardNumberRequiredSelector(checkoutState)}\n            isInstrumentFeatureAvailable={isInstrumentFeatureAvailable}\n            isLoadingInstruments={isLoadingInstruments()}\n            isPaymentDataRequired={isPaymentDataRequired()}\n            isSignInRequired={false}\n            isSignedIn={some(checkout?.payments, { providerId: method.id })}\n            loadInstruments={checkoutService.loadInstruments}\n            method={method}\n            onSignOut={reload}\n            paymentDescriptor={paymentDescriptor}\n            setFieldValue={setFieldValue}\n            setSubmit={setSubmit}\n            setValidationSchema={setValidationSchema}\n            shouldShow={!!paymentToken}\n            shouldShowDescriptor={!!paymentToken}\n            shouldShowEditButton={!!paymentToken}\n            signOut={checkoutService.signOutCustomer}\n        />\n    );\n};\n\nexport default toResolvableComponent<PaymentMethodProps, PaymentMethodResolveId>(\n    AmazonPayV2PaymentMethod,\n    [{ id: 'amazonpay' }],\n);\n","import { type CardInstrument, type LegacyHostedFormOptions } from '@bigcommerce/checkout-sdk';\nimport { compact, forIn } from 'lodash';\nimport React, { type FunctionComponent, type ReactNode, useCallback, useState } from 'react';\n\nimport {\n    CreditCardPaymentMethodComponent,\n    type CreditCardPaymentMethodProps,\n} from '@bigcommerce/checkout/credit-card-integration';\nimport {\n    CreditCardCustomerCodeField,\n    CreditCardInputStylesType,\n    getCreditCardInputStyles,\n    isInstrumentCardCodeRequiredSelector,\n    isInstrumentCardNumberRequiredSelector,\n} from '@bigcommerce/checkout/instrument-utils';\nimport {\n    type PaymentMethodProps,\n    type PaymentMethodResolveId,\n    toResolvableComponent,\n} from '@bigcommerce/checkout/payment-integration-api';\n\nimport {\n    getHostedCreditCardValidationSchema,\n    getHostedInstrumentValidationSchema,\n    HostedCreditCardFieldset,\n    HostedCreditCardValidation,\n} from './components';\n\nconst HostedCreditCardPaymentMethod: FunctionComponent<PaymentMethodProps> = ({\n    method,\n    checkoutService,\n    checkoutState,\n    paymentForm,\n    language,\n    onUnhandledError,\n}) => {\n    const [focusedFieldType, setFocusedFieldType] = useState<string>();\n\n    const { setFieldTouched, setFieldValue, setSubmitted, submitForm } = paymentForm;\n    const isInstrumentCardCodeRequiredProp = isInstrumentCardCodeRequiredSelector(checkoutState);\n    const isInstrumentCardNumberRequiredProp =\n        isInstrumentCardNumberRequiredSelector(checkoutState);\n    const {\n        config: { cardCode, showCardHolderName },\n    } = method;\n    const isCardCodeRequired = cardCode || cardCode === null;\n    const isCardHolderNameRequired = showCardHolderName ?? true;\n\n    const getHostedFieldId: (name: string) => string = useCallback(\n        (name) => {\n            return `${compact([method.gateway, method.id]).join('-')}-${name}`;\n        },\n        [method],\n    );\n\n    const getHostedFormOptions: (\n        selectedInstrument?: CardInstrument,\n    ) => Promise<LegacyHostedFormOptions> = useCallback(\n        async (selectedInstrument) => {\n            const styleProps = ['color', 'fontFamily', 'fontSize', 'fontWeight'];\n            const isInstrumentCardNumberRequired = selectedInstrument\n                ? isInstrumentCardNumberRequiredProp(selectedInstrument, method)\n                : false;\n            const isInstrumentCardCodeRequired = selectedInstrument\n                ? isInstrumentCardCodeRequiredProp(selectedInstrument, method)\n                : false;\n            let styleContainerId = '';\n\n            if (selectedInstrument) {\n                if (isInstrumentCardCodeRequired) {\n                    styleContainerId = getHostedFieldId('ccCvv');\n                } else if (isInstrumentCardNumberRequired) {\n                    styleContainerId = getHostedFieldId('ccNumber');\n                }\n            } else {\n                styleContainerId = getHostedFieldId('ccNumber');\n            }\n\n            return {\n                fields: selectedInstrument\n                    ? {\n                          cardCodeVerification:\n                              isInstrumentCardCodeRequired && selectedInstrument\n                                  ? {\n                                        accessibilityLabel: language.translate(\n                                            'payment.credit_card_cvv_label',\n                                        ),\n                                        containerId: getHostedFieldId('ccCvv'),\n                                        instrumentId: selectedInstrument.bigpayToken,\n                                    }\n                                  : undefined,\n                          cardNumberVerification:\n                              isInstrumentCardNumberRequired && selectedInstrument\n                                  ? {\n                                        accessibilityLabel: language.translate(\n                                            'payment.credit_card_number_label',\n                                        ),\n                                        containerId: getHostedFieldId('ccNumber'),\n                                        instrumentId: selectedInstrument.bigpayToken,\n                                    }\n                                  : undefined,\n                      }\n                    : {\n                          cardCode: isCardCodeRequired\n                              ? {\n                                    accessibilityLabel: language.translate(\n                                        'payment.credit_card_cvv_label',\n                                    ),\n                                    containerId: getHostedFieldId('ccCvv'),\n                                }\n                              : undefined,\n                          cardExpiry: {\n                              accessibilityLabel: language.translate(\n                                  'payment.credit_card_expiration_label',\n                              ),\n                              containerId: getHostedFieldId('ccExpiry'),\n                              placeholder: language.translate(\n                                  'payment.credit_card_expiration_placeholder_text',\n                              ),\n                          },\n                          cardName: isCardHolderNameRequired\n                              ? {\n                                    accessibilityLabel: language.translate(\n                                        'payment.credit_card_name_label',\n                                    ),\n                                    containerId: getHostedFieldId('ccName'),\n                                }\n                              : undefined,\n                          cardNumber: {\n                              accessibilityLabel: language.translate(\n                                  'payment.credit_card_number_label',\n                              ),\n                              containerId: getHostedFieldId('ccNumber'),\n                          },\n                      },\n                styles: styleContainerId\n                    ? {\n                          default: await getCreditCardInputStyles(styleContainerId, styleProps),\n                          error: await getCreditCardInputStyles(\n                              styleContainerId,\n                              styleProps,\n                              CreditCardInputStylesType.Error,\n                          ),\n                          focus: await getCreditCardInputStyles(\n                              styleContainerId,\n                              styleProps,\n                              CreditCardInputStylesType.Focus,\n                          ),\n                      }\n                    : {},\n                onBlur: ({ fieldType }) => {\n                    if (focusedFieldType === fieldType) {\n                        setFocusedFieldType(undefined);\n                    }\n                },\n                onCardTypeChange: ({ cardType }) => {\n                    setFieldValue('hostedForm.cardType', cardType);\n                },\n                onEnter: () => {\n                    setSubmitted(true);\n                    submitForm();\n                },\n                onFocus: ({ fieldType }) => {\n                    setFocusedFieldType(fieldType);\n                },\n                onValidate: ({ errors = {} }) => {\n                    forIn(errors, (fieldErrors = [], fieldType) => {\n                        const errorKey = `hostedForm.errors.${fieldType}`;\n\n                        setFieldValue(errorKey, fieldErrors[0]?.type ?? '');\n\n                        if (fieldErrors[0]) {\n                            setFieldTouched(errorKey);\n                        }\n                    });\n                },\n            };\n        },\n        [\n            focusedFieldType,\n            getHostedFieldId,\n            isCardCodeRequired,\n            isCardHolderNameRequired,\n            isInstrumentCardCodeRequiredProp,\n            isInstrumentCardNumberRequiredProp,\n            language,\n            method,\n            setFieldValue,\n            setFieldTouched,\n            setFocusedFieldType,\n            setSubmitted,\n            submitForm,\n        ],\n    );\n\n    const hostedFieldset = (\n        <HostedCreditCardFieldset\n            additionalFields={\n                method.config.requireCustomerCode && (\n                    <CreditCardCustomerCodeField name=\"ccCustomerCode\" />\n                )\n            }\n            cardCodeId={isCardCodeRequired ? getHostedFieldId('ccCvv') : undefined}\n            cardExpiryId={getHostedFieldId('ccExpiry')}\n            cardNameId={isCardHolderNameRequired ? getHostedFieldId('ccName') : undefined}\n            cardNumberId={getHostedFieldId('ccNumber')}\n            focusedFieldType={focusedFieldType}\n        />\n    );\n    const hostedValidationSchema = getHostedCreditCardValidationSchema({ language });\n\n    const getHostedStoredCardValidationFieldset: (selectedInstrument: CardInstrument) => ReactNode =\n        useCallback(\n            (selectedInstrument) => {\n                const isInstrumentCardNumberRequired = selectedInstrument\n                    ? isInstrumentCardNumberRequiredProp(selectedInstrument, method)\n                    : false;\n                const isInstrumentCardCodeRequired = selectedInstrument\n                    ? isInstrumentCardCodeRequiredProp(selectedInstrument, method)\n                    : false;\n\n                return (\n                    <HostedCreditCardValidation\n                        cardCodeId={\n                            isInstrumentCardCodeRequired ? getHostedFieldId('ccCvv') : undefined\n                        }\n                        cardNumberId={\n                            isInstrumentCardNumberRequired\n                                ? getHostedFieldId('ccNumber')\n                                : undefined\n                        }\n                        focusedFieldType={focusedFieldType}\n                    />\n                );\n            },\n            [\n                focusedFieldType,\n                getHostedFieldId,\n                isInstrumentCardCodeRequiredProp,\n                isInstrumentCardNumberRequiredProp,\n                method,\n            ],\n        );\n\n    const initializePayment = checkoutService.initializePayment;\n\n    const initializeHostedCreditCardPayment: CreditCardPaymentMethodProps['initializePayment'] =\n        useCallback(\n            async (options, selectedInstrument) => {\n                return initializePayment({\n                    ...options,\n                    creditCard: {\n                        form: await getHostedFormOptions(selectedInstrument),\n                        bigpayToken: selectedInstrument?.bigpayToken,\n                    },\n                });\n            },\n            [getHostedFormOptions, initializePayment],\n        );\n\n    const hostedStoredCardValidationSchema = getHostedInstrumentValidationSchema({ language });\n\n    const props = {\n        checkoutService,\n        checkoutState,\n        paymentForm,\n        language,\n        method,\n        onUnhandledError,\n    };\n\n    return (\n        <CreditCardPaymentMethodComponent\n            {...props}\n            cardFieldset={hostedFieldset}\n            cardValidationSchema={hostedValidationSchema}\n            deinitializePayment={checkoutService.deinitializePayment}\n            getHostedFormOptions={getHostedFormOptions}\n            getStoredCardValidationFieldset={getHostedStoredCardValidationFieldset}\n            initializePayment={initializeHostedCreditCardPayment}\n            storedCardValidationSchema={hostedStoredCardValidationSchema}\n        />\n    );\n};\n\nexport default toResolvableComponent<PaymentMethodProps, PaymentMethodResolveId>(\n    HostedCreditCardPaymentMethod,\n    [\n        {\n            id: 'hosted-credit-card',\n        },\n        { id: 'credit_card', gateway: 'bluesnapdirect' },\n        { id: 'tdonlinemart' },\n    ],\n);\n","import { type PaymentInitializeOptions } from '@bigcommerce/checkout-sdk';\nimport React, { type FunctionComponent, useCallback } from 'react';\n\nimport {\n    type CheckoutButtonResolveId,\n    PaymentMethodId,\n    type PaymentMethodProps,\n    toResolvableComponent,\n} from '@bigcommerce/checkout/payment-integration-api';\nimport { WalletButtonPaymentMethodComponent } from '@bigcommerce/checkout/wallet-button-integration';\n\nconst VisaCheckoutPaymentMethod: FunctionComponent<PaymentMethodProps> = ({\n    checkoutService,\n    method,\n    onUnhandledError,\n    ...rest\n}) => {\n    const initializeVisaCheckoutPayment = useCallback(\n        (defaultOptions: PaymentInitializeOptions) => {\n            const reinitializePayment = async (options: PaymentInitializeOptions) => {\n                try {\n                    await checkoutService.deinitializePayment({\n                        gatewayId: method.gateway,\n                        methodId: method.id,\n                    });\n\n                    await checkoutService.initializePayment({\n                        ...options,\n                        gatewayId: method.gateway,\n                        methodId: method.id,\n                    });\n                } catch (error) {\n                    if (error instanceof Error) {\n                        onUnhandledError(error);\n                    }\n                }\n            };\n\n            const mergedOptions = {\n                ...defaultOptions,\n                braintreevisacheckout: {\n                    onError: onUnhandledError,\n                    onPaymentSelect: () => reinitializePayment(mergedOptions),\n                },\n            };\n\n            return checkoutService.initializePayment(mergedOptions);\n        },\n        [checkoutService, method, onUnhandledError],\n    );\n\n    return (\n        <WalletButtonPaymentMethodComponent\n            {...rest}\n            buttonId=\"visaCheckoutWalletButton\"\n            deinitializePayment={checkoutService.deinitializePayment}\n            editButtonClassName=\"v-button\"\n            initializePayment={initializeVisaCheckoutPayment}\n            method={method}\n            shouldShowEditButton\n            signInButtonClassName=\"v-button\"\n            signOutCustomer={checkoutService.signOutCustomer}\n        />\n    );\n};\n\nexport default toResolvableComponent<PaymentMethodProps, CheckoutButtonResolveId>(\n    VisaCheckoutPaymentMethod,\n    [{ id: PaymentMethodId.BraintreeVisaCheckout }],\n);\n","import {\n    type AdyenValidationState,\n    type CardInstrument,\n    type PaymentMethod,\n} from '@bigcommerce/checkout-sdk';\nimport classNames from 'classnames';\nimport React, { type FunctionComponent, useEffect, useState } from 'react';\n\nimport { TranslatedString } from '@bigcommerce/checkout/locale';\n\nexport type FieldsValidation = { [key in AdyenCardFields]?: AdyenValidationState };\n\nenum AdyenCardFields {\n    CardNumber = 'encryptedCardNumber',\n    SecurityCode = 'encryptedSecurityCode',\n    ExpiryDate = 'encryptedExpiryDate',\n}\n\nexport interface AdyenV3CardValidationProps {\n    verificationFieldsContainerId?: string;\n    shouldShowNumberField: boolean;\n    paymentMethod: PaymentMethod;\n    cardValidationState?: AdyenValidationState;\n    selectedInstrument?: CardInstrument;\n}\n\nconst getInitialValidationState = ({\n    shouldShowNumberField,\n    method,\n}: {\n    shouldShowNumberField: boolean;\n    method: string;\n}) => {\n    const validationState: FieldsValidation = {};\n\n    if (shouldShowNumberField) {\n        validationState[AdyenCardFields.CardNumber] = { valid: false };\n    }\n\n    if (method === 'scheme') {\n        validationState[AdyenCardFields.SecurityCode] = { valid: false };\n    }\n\n    if (method === 'bcmc') {\n        validationState[AdyenCardFields.ExpiryDate] = { valid: false };\n    }\n\n    return validationState;\n};\n\nconst isFieldInvalid = (fieldKey: AdyenCardFields, fieldsValidation: FieldsValidation): boolean =>\n    !!fieldsValidation[fieldKey] && !fieldsValidation[fieldKey].valid;\n\nconst AdyenV3CardValidation: FunctionComponent<AdyenV3CardValidationProps> = ({\n    verificationFieldsContainerId,\n    shouldShowNumberField,\n    selectedInstrument,\n    paymentMethod,\n    cardValidationState,\n}) => {\n    const [fieldsValidation, setFieldsValidation] = useState<FieldsValidation>(\n        getInitialValidationState({ shouldShowNumberField, method: paymentMethod.method }),\n    );\n\n    useEffect(() => {\n        if (!cardValidationState) {\n            return;\n        }\n\n        if (\n            cardValidationState.fieldType &&\n            (!fieldsValidation[cardValidationState.fieldType] ||\n                fieldsValidation[cardValidationState.fieldType]?.valid !==\n                    cardValidationState.valid)\n        ) {\n            if (cardValidationState.fieldType === AdyenCardFields.CardNumber) {\n                setFieldsValidation({\n                    ...fieldsValidation,\n                    [AdyenCardFields.CardNumber]:\n                        cardValidationState.endDigits !== selectedInstrument?.last4\n                            ? { ...cardValidationState, valid: false }\n                            : { ...cardValidationState },\n                });\n            } else {\n                setFieldsValidation({\n                    ...fieldsValidation,\n                    [cardValidationState.fieldType]: cardValidationState,\n                });\n            }\n        }\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [cardValidationState, setFieldsValidation, selectedInstrument?.last4]);\n\n    useEffect(() => {\n        if (selectedInstrument?.bigpayToken) {\n            setFieldsValidation(\n                getInitialValidationState({ shouldShowNumberField, method: paymentMethod.method }),\n            );\n        }\n    }, [selectedInstrument?.bigpayToken, paymentMethod.method, shouldShowNumberField]);\n\n    const showValidationIcon = (key: AdyenCardFields) =>\n        isFieldInvalid(key, fieldsValidation) && (\n            <span\n                className=\"adyen-checkout-input__inline-validation adyen-checkout-input__inline-validation--invalid\"\n                style={{ transform: 'none', right: '20px' }}\n            >\n                <img\n                    alt=\"adyen-checkout-icon\"\n                    className=\"adyen-checkout__icon\"\n                    src=\"https://checkoutshopper-test.adyen.com/checkoutshopper/images/components/field_error.svg\"\n                />\n            </span>\n        );\n\n    return (\n        <div>\n            {shouldShowNumberField && (\n                <p>\n                    <strong>\n                        <TranslatedString id=\"payment.instrument_trusted_shipping_address_title_text\" />\n                    </strong>\n\n                    <br />\n\n                    <TranslatedString id=\"payment.instrument_trusted_shipping_address_text\" />\n                </p>\n            )}\n\n            <div className=\"form-ccFields\" id={verificationFieldsContainerId}>\n                {shouldShowNumberField && (\n                    <div\n                        className={classNames(\n                            'form-field',\n                            'form-field--ccNumber',\n                            {\n                                'form-field--ccNumber--hasExpiryDate':\n                                    paymentMethod.method === 'bcmc',\n                            },\n                            // This div is hiding by CSS because there is an Adyen library in\n                            // checkout-sdk which mounts verification fields and if is removed with JS this mounting event will be thrown an error\n                            { 'form-field-ccNumber--hide': !shouldShowNumberField },\n                        )}\n                    >\n                        <label htmlFor={AdyenCardFields.CardNumber}>\n                            <TranslatedString id=\"payment.credit_card_number_label\" />\n                        </label>\n                        <div\n                            className={classNames(\n                                'form-input',\n                                'optimizedCheckout-form-input',\n                                'has-icon',\n                                'adyen-checkout__input-wrapper',\n                                {\n                                    'adyen-checkout__input--error': isFieldInvalid(\n                                        AdyenCardFields.CardNumber,\n                                        fieldsValidation,\n                                    ),\n                                },\n                            )}\n                            data-cse={AdyenCardFields.CardNumber}\n                            id={AdyenCardFields.CardNumber}\n                        />\n                        {showValidationIcon(AdyenCardFields.CardNumber)}\n                    </div>\n                )}\n                {paymentMethod.method === 'scheme' && (\n                    <div className=\"form-field form-ccFields-field--ccCvv\">\n                        <label htmlFor={AdyenCardFields.SecurityCode}>\n                            <TranslatedString id=\"payment.credit_card_cvv_label\" />\n                        </label>\n                        <div\n                            className={classNames(\n                                'form-input',\n                                'optimizedCheckout-form-input',\n                                'has-icon',\n                                'adyen-checkout__input-wrapper',\n                                {\n                                    'adyen-checkout__input--error': isFieldInvalid(\n                                        AdyenCardFields.SecurityCode,\n                                        fieldsValidation,\n                                    ),\n                                },\n                            )}\n                            data-cse={AdyenCardFields.SecurityCode}\n                            id={AdyenCardFields.SecurityCode}\n                        />\n                        {showValidationIcon(AdyenCardFields.SecurityCode)}\n                    </div>\n                )}\n                {paymentMethod.method === 'bcmc' && (\n                    <div className=\"form-field form-field--ccExpiry\">\n                        <label htmlFor={AdyenCardFields.ExpiryDate}>\n                            <TranslatedString id=\"payment.credit_card_expiration_label\" />\n                        </label>\n                        <div\n                            className={classNames(\n                                'form-input',\n                                'optimizedCheckout-form-input',\n                                'has-icon',\n                                'adyen-checkout__input-wrapper',\n                                {\n                                    'adyen-checkout__input--error': isFieldInvalid(\n                                        AdyenCardFields.ExpiryDate,\n                                        fieldsValidation,\n                                    ),\n                                },\n                            )}\n                            data-cse={AdyenCardFields.ExpiryDate}\n                            id={AdyenCardFields.ExpiryDate}\n                        />\n                        {showValidationIcon(AdyenCardFields.ExpiryDate)}\n                    </div>\n                )}\n            </div>\n        </div>\n    );\n};\n\nexport default AdyenV3CardValidation;\n","import { type CardInstrument } from '@bigcommerce/checkout-sdk';\nimport React, { type FunctionComponent, type ReactNode } from 'react';\nimport { type Omit } from 'utility-types';\n\nimport {\n    type HostedWidgetComponentProps,\n    HostedWidgetPaymentComponent,\n} from '@bigcommerce/checkout/hosted-widget-integration';\nimport {\n    isInstrumentCardCodeRequiredSelector,\n    isInstrumentCardNumberRequiredSelector,\n} from '@bigcommerce/checkout/instrument-utils';\nimport {\n    type PaymentMethodProps,\n    usePaymentFormContext,\n} from '@bigcommerce/checkout/payment-integration-api';\nimport { Modal } from '@bigcommerce/checkout/ui';\n\nexport enum UntrustedShippingCardVerificationType {\n    CVV = 'cvv',\n    PAN = 'pan',\n}\n\nexport type AdyenV3FormProps = Omit<\n    HostedWidgetComponentProps,\n    | 'onSignOut'\n    | 'isInstrumentFeatureAvailable'\n    | 'instruments'\n    | 'isLoadingInstruments'\n    | 'isPaymentDataRequired'\n    | 'isSignedIn'\n    | 'isInstrumentCardCodeRequired'\n    | 'isInstrumentCardNumberRequired'\n    | 'loadInstruments'\n    | 'signOut'\n    | 'deinitializePayment'\n> & {\n    containerId: string;\n    isAccountInstrument: boolean;\n    shouldHideInstrumentExpiryDate: boolean;\n    validateInstrument: (\n        shouldShowNumberField: boolean,\n        selectedInstrument: CardInstrument,\n    ) => ReactNode;\n    shouldRenderAdditionalActionContentModal: boolean;\n    isModalVisible: boolean;\n    cancelAdditionalActionModalFlow: () => void;\n    additionalActionContainerId: string;\n};\n\nconst AdyenV3Form: FunctionComponent<AdyenV3FormProps & PaymentMethodProps> = ({\n    method,\n    containerId,\n    initializePayment,\n    isAccountInstrument,\n    shouldHideInstrumentExpiryDate,\n    validateInstrument,\n    language,\n    shouldRenderAdditionalActionContentModal,\n    isModalVisible,\n    cancelAdditionalActionModalFlow,\n    additionalActionContainerId,\n    checkoutState,\n    checkoutService,\n    onUnhandledError,\n    ...rest\n}) => {\n    const { paymentForm } = usePaymentFormContext();\n    const customer = checkoutState.data.getCustomer();\n    const { isLoadingInstruments } = checkoutState.statuses;\n    const { isPaymentDataRequired } = checkoutState.data;\n    const instruments = checkoutState.data.getInstruments(method) || [];\n    const isSignedIn = customer?.isGuest;\n    const isInstrumentFeatureAvailable = !isSignedIn && Boolean(method.config.isVaultingEnabled);\n    const isInstrumentCardCodeRequired = isInstrumentCardCodeRequiredSelector(checkoutState);\n    const isInstrumentCardNumberRequired = isInstrumentCardNumberRequiredSelector(checkoutState);\n\n    const {\n        hidePaymentSubmitButton,\n        disableSubmit,\n        setFieldValue,\n        setSubmit,\n        setValidationSchema,\n    } = paymentForm;\n\n    return (\n        <>\n            <HostedWidgetPaymentComponent\n                {...rest}\n                containerId={containerId}\n                deinitializePayment={checkoutService.deinitializePayment}\n                disableSubmit={disableSubmit}\n                hideContentWhenSignedOut\n                hidePaymentSubmitButton={hidePaymentSubmitButton}\n                initializePayment={initializePayment}\n                instruments={instruments}\n                isAccountInstrument={isAccountInstrument}\n                isInstrumentCardCodeRequired={isInstrumentCardCodeRequired}\n                isInstrumentCardNumberRequired={isInstrumentCardNumberRequired}\n                isInstrumentFeatureAvailable={isInstrumentFeatureAvailable}\n                isLoadingInstruments={isLoadingInstruments()}\n                isPaymentDataRequired={isPaymentDataRequired()}\n                isSignedIn={!isSignedIn}\n                loadInstruments={checkoutService.loadInstruments}\n                method={method}\n                onUnhandledError={onUnhandledError}\n                setFieldValue={setFieldValue}\n                setSubmit={setSubmit}\n                setValidationSchema={setValidationSchema}\n                shouldHideInstrumentExpiryDate={shouldHideInstrumentExpiryDate}\n                shouldRenderCustomInstrument\n                signOut={checkoutService.signOutCustomer}\n                validateInstrument={validateInstrument}\n            />\n            <Modal\n                additionalBodyClassName=\"modal-body--center\"\n                closeButtonLabel={language.translate('common.close_action')}\n                isOpen={shouldRenderAdditionalActionContentModal}\n                onRequestClose={cancelAdditionalActionModalFlow}\n                shouldShowCloseButton={true}\n                style={\n                    !isModalVisible && method.id === 'scheme'\n                        ? {\n                              overlay: {\n                                  display: 'none',\n                              },\n                          }\n                        : {}\n                }\n            >\n                <div id={additionalActionContainerId} style={{ width: '100%' }} />\n            </Modal>\n            {!shouldRenderAdditionalActionContentModal && <div id={additionalActionContainerId} />}\n        </>\n    );\n};\n\nexport default AdyenV3Form;\n","import {\n    type AdyenCreditCardComponentOptions,\n    type AdyenValidationState,\n    type CardInstrument,\n    type PaymentInitializeOptions,\n} from '@bigcommerce/checkout-sdk';\nimport React, { type FunctionComponent, useCallback, useRef, useState } from 'react';\n\nimport { type HostedWidgetComponentProps } from '@bigcommerce/checkout/hosted-widget-integration';\nimport { LocaleProvider } from '@bigcommerce/checkout/locale';\nimport {\n    CheckoutContext,\n    PaymentFormContext,\n    type PaymentMethodProps,\n    type PaymentMethodResolveId,\n    toResolvableComponent,\n} from '@bigcommerce/checkout/payment-integration-api';\nimport { FormContext, LoadingOverlay } from '@bigcommerce/checkout/ui';\n\nimport AdyenV3CardValidation from './AdyenV3CardValidation';\nimport AdyenV3Form from './AdyenV3Form';\n\nexport interface AdyenOptions {\n    [key: string]: AdyenCreditCardComponentOptions;\n}\n\nexport enum AdyenV3PaymentMethodType {\n    // eslint-disable-next-line @typescript-eslint/naming-convention\n    scheme = 'scheme',\n    // eslint-disable-next-line @typescript-eslint/naming-convention\n    bcmc = 'bcmc',\n}\n\ninterface AdyenPaymentMethodRef {\n    shouldShowModal: boolean;\n    shouldShowNumberField?: boolean;\n    cancelAdditionalAction?(): void;\n}\n\nconst AdyenV3PaymentMethod: FunctionComponent<PaymentMethodProps> = ({\n    checkoutService,\n    checkoutState,\n    paymentForm,\n    method,\n    language,\n    onUnhandledError,\n    ...rest\n}) => {\n    const ref = useRef<AdyenPaymentMethodRef>({\n        shouldShowModal: true,\n    });\n\n    const [shouldRenderAdditionalActionContentModal, setShouldRenderAdditionalActionContentModal] =\n        useState<boolean>(false);\n    const [isAdditionalActionContentModalVisible, setIsAdditionalActionContentModalVisible] =\n        useState<boolean>(false);\n    const [cardValidationState, setCardValidationState] = useState<AdyenValidationState>();\n    const containerId = `adyen-${method.id}-component-field`;\n    const additionalActionContainerId = `adyen-${method.id}-additional-action-component-field`;\n    const cardVerificationContainerId = `adyen-${method.id}-tsv-component-field`;\n    const component = method.id;\n    const shouldHideInstrumentExpiryDate = component === AdyenV3PaymentMethodType.bcmc;\n\n    const onBeforeLoad = useCallback((shopperInteraction: boolean) => {\n        ref.current.shouldShowModal = shopperInteraction;\n\n        setShouldRenderAdditionalActionContentModal(ref.current.shouldShowModal);\n    }, []);\n\n    const onComplete = useCallback(() => {\n        setIsAdditionalActionContentModalVisible(false);\n        setShouldRenderAdditionalActionContentModal(false);\n        ref.current.cancelAdditionalAction = undefined;\n    }, []);\n\n    const onActionHandled = useCallback(() => {\n        setIsAdditionalActionContentModalVisible(true);\n    }, []);\n\n    const onLoad = useCallback((cancel?: any) => {\n        // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment\n        ref.current.cancelAdditionalAction = cancel;\n    }, []);\n\n    const cancelAdditionalActionModalFlow = useCallback(() => {\n        setIsAdditionalActionContentModalVisible(false);\n        setShouldRenderAdditionalActionContentModal(false);\n\n        if (ref.current.cancelAdditionalAction) {\n            ref.current.cancelAdditionalAction();\n            ref.current.cancelAdditionalAction = undefined;\n        }\n    }, []);\n\n    const initializeAdyenPayment: HostedWidgetComponentProps['initializePayment'] = useCallback(\n        async (options: PaymentInitializeOptions, selectedInstrument: CardInstrument) => {\n            const adyenOptions: AdyenOptions = {\n                [AdyenV3PaymentMethodType.scheme]: {\n                    hasHolderName: true,\n                    holderNameRequired: true,\n                },\n            };\n            // eslint-disable-next-line @typescript-eslint/no-unnecessary-condition\n            const selectedInstrumentId = selectedInstrument?.bigpayToken;\n\n            return checkoutService.initializePayment({\n                ...options,\n                adyenv3: {\n                    cardVerificationContainerId:\n                        selectedInstrumentId && cardVerificationContainerId,\n                    containerId,\n                    hasVaultedInstruments: !!selectedInstrumentId,\n                    options: adyenOptions[component],\n                    additionalActionOptions: {\n                        widgetSize: '05',\n                        containerId: additionalActionContainerId,\n                        onBeforeLoad,\n                        onComplete,\n                        onLoad,\n                        onActionHandled,\n                    },\n                    shouldShowNumberField: ref.current.shouldShowNumberField,\n                    validateCardFields: (state: AdyenValidationState) => {\n                        setCardValidationState(state);\n                    },\n                },\n            });\n        },\n        [\n            component,\n            cardVerificationContainerId,\n            containerId,\n            additionalActionContainerId,\n            onBeforeLoad,\n            onComplete,\n            onLoad,\n            onActionHandled,\n            checkoutService,\n        ],\n    );\n\n    const validateInstrument = (\n        shouldShowNumberField: boolean,\n        selectedInstrument: CardInstrument,\n    ) => {\n        ref.current.shouldShowNumberField = shouldShowNumberField;\n\n        return (\n            <AdyenV3CardValidation\n                cardValidationState={cardValidationState}\n                paymentMethod={method}\n                selectedInstrument={selectedInstrument}\n                shouldShowNumberField={shouldShowNumberField}\n                verificationFieldsContainerId={cardVerificationContainerId}\n            />\n        );\n    };\n\n    const isAccountInstrument = () => {\n        switch (method.method) {\n            case 'directEbanking':\n            case 'giropay':\n            case 'ideal':\n            case 'sepadirectdebit':\n                return true;\n\n            default:\n                return false;\n        }\n    };\n\n    const isLoading =\n        checkoutState.statuses.isLoadingInstruments() ||\n        checkoutState.statuses.isLoadingPaymentMethod(method.id);\n\n    const formContextProps = {\n        isSubmitted: paymentForm.isSubmitted(),\n        setSubmitted: paymentForm.setSubmitted,\n    };\n\n    return (\n        <FormContext.Provider value={formContextProps}>\n            <CheckoutContext.Provider value={{ checkoutState, checkoutService }}>\n                <LocaleProvider checkoutService={checkoutService}>\n                    <PaymentFormContext.Provider value={{ paymentForm }}>\n                        <LoadingOverlay hideContentWhenLoading isLoading={isLoading}>\n                            <AdyenV3Form\n                                {...rest}\n                                additionalActionContainerId={additionalActionContainerId}\n                                cancelAdditionalActionModalFlow={cancelAdditionalActionModalFlow}\n                                checkoutService={checkoutService}\n                                checkoutState={checkoutState}\n                                containerId={containerId}\n                                hideContentWhenSignedOut\n                                initializePayment={initializeAdyenPayment}\n                                isAccountInstrument={isAccountInstrument()}\n                                isModalVisible={isAdditionalActionContentModalVisible}\n                                language={language}\n                                method={method}\n                                onUnhandledError={onUnhandledError}\n                                paymentForm={paymentForm}\n                                shouldHideInstrumentExpiryDate={shouldHideInstrumentExpiryDate}\n                                shouldRenderAdditionalActionContentModal={\n                                    shouldRenderAdditionalActionContentModal\n                                }\n                                validateInstrument={validateInstrument}\n                            />\n                        </LoadingOverlay>\n                    </PaymentFormContext.Provider>\n                </LocaleProvider>\n            </CheckoutContext.Provider>\n        </FormContext.Provider>\n    );\n};\n\nexport default toResolvableComponent<PaymentMethodProps, PaymentMethodResolveId>(\n    AdyenV3PaymentMethod,\n    [{ gateway: 'adyenv3' }],\n);\n","import React, { type FunctionComponent } from 'react';\n\nimport {\n    type PaymentMethodProps,\n    type PaymentMethodResolveId,\n    toResolvableComponent,\n} from '@bigcommerce/checkout/payment-integration-api';\n\nimport { HostedPaymentComponent } from './components';\n\nconst HostedPaymentMethod: FunctionComponent<PaymentMethodProps> = ({\n    checkoutService,\n    checkoutState,\n    method,\n    onUnhandledError,\n    language,\n    paymentForm,\n}) => {\n    return (\n        <HostedPaymentComponent\n            checkoutService={checkoutService}\n            checkoutState={checkoutState}\n            deinitializePayment={checkoutService.deinitializePayment}\n            initializePayment={checkoutService.initializePayment}\n            language={language}\n            method={method}\n            onUnhandledError={onUnhandledError}\n            paymentForm={paymentForm}\n        />\n    );\n};\n\nexport default toResolvableComponent<PaymentMethodProps, PaymentMethodResolveId>(\n    HostedPaymentMethod,\n    [{ id: 'quadpay' }, { id: 'sezzle' }, { id: 'zip' }],\n);\n","import {\n    type AccountInstrument,\n    type CheckoutSelectors,\n    type CheckoutService,\n    type LanguageService,\n    type PaymentInitializeOptions,\n    type PaymentInstrument,\n    type PaymentMethod,\n    type PaymentRequestOptions,\n} from '@bigcommerce/checkout-sdk';\nimport { memoizeOne } from '@bigcommerce/memoize';\nimport { find, noop } from 'lodash';\nimport React, { type ReactNode, useCallback, useEffect, useState } from 'react';\n\nimport {\n    AccountInstrumentFieldset,\n    isAccountInstrument,\n    isInstrumentFeatureAvailable,\n    StoreInstrumentFieldset,\n} from '@bigcommerce/checkout/instrument-utils';\nimport { type PaymentFormService } from '@bigcommerce/checkout/payment-integration-api';\nimport { LoadingOverlay } from '@bigcommerce/checkout/ui';\n\nexport interface HostedPaymentComponentProps {\n    checkoutService: CheckoutService;\n    checkoutState: CheckoutSelectors;\n    description?: ReactNode;\n    isInitializing?: boolean;\n    isUsingMultiShipping?: boolean;\n    language: LanguageService;\n    method: PaymentMethod;\n    paymentForm: PaymentFormService;\n    deinitializePayment(options: PaymentRequestOptions): Promise<CheckoutSelectors>;\n    initializePayment(options: PaymentInitializeOptions): Promise<CheckoutSelectors>;\n    onUnhandledError?(error: Error): void;\n}\n\ninterface HostedPaymentComponentDerivedProps {\n    instruments: AccountInstrument[];\n    isInstrumentFeatureAvailable: boolean;\n    isLoadingInstruments: boolean;\n    isNewAddress: boolean;\n    isPaymentDataRequired: boolean;\n    loadInstruments(): Promise<CheckoutSelectors>;\n}\n\nfunction getHostedPaymentMethodDerivedProps(\n    props: HostedPaymentComponentProps,\n): HostedPaymentComponentDerivedProps {\n    const filterAccountInstruments = memoizeOne((instruments: PaymentInstrument[] = []) =>\n        instruments.filter(isAccountInstrument),\n    );\n    const filterTrustedInstruments = memoizeOne((instruments: AccountInstrument[] = []) =>\n        instruments.filter(({ trustedShippingAddress }) => trustedShippingAddress),\n    );\n    const { checkoutService, checkoutState, isUsingMultiShipping = false, method } = props;\n\n    const {\n        data: {\n            getCart,\n            getConfig,\n            getCustomer,\n            getInstruments,\n            isPaymentDataRequired,\n            isPaymentDataSubmitted,\n        },\n        statuses: { isLoadingInstruments },\n    } = checkoutState;\n\n    const cart = getCart();\n    const config = getConfig();\n    const customer = getCustomer();\n\n    if (!config || !cart || !customer) {\n        throw new Error('Unable to get checkout');\n    }\n\n    const currentMethodInstruments = filterAccountInstruments(getInstruments(method));\n    const trustedInstruments = filterTrustedInstruments(currentMethodInstruments);\n\n    return {\n        instruments: trustedInstruments,\n        isNewAddress: trustedInstruments.length === 0 && currentMethodInstruments.length > 0,\n        isInstrumentFeatureAvailable:\n            !isPaymentDataSubmitted(method.id, method.gateway) &&\n            isInstrumentFeatureAvailable({\n                config,\n                customer,\n                isUsingMultiShipping,\n                paymentMethod: method,\n            }),\n        isLoadingInstruments: isLoadingInstruments(),\n        isPaymentDataRequired: isPaymentDataRequired(),\n        loadInstruments: checkoutService.loadInstruments,\n    };\n}\n\nconst HostedPaymentMethodComponent: React.FC<HostedPaymentComponentProps> = (props) => {\n    const {\n        description,\n        isInitializing = false,\n        initializePayment,\n        method,\n        onUnhandledError = noop,\n        deinitializePayment,\n    } = props;\n\n    const [isAddingNewInstrument, setIsAddingNewInstrument] = useState(false);\n    const [selectedInstrument, setSelectedInstrument] = useState<AccountInstrument | undefined>();\n\n    const derivedProps = getHostedPaymentMethodDerivedProps(props);\n    const {\n        isLoadingInstruments,\n        instruments,\n        isNewAddress,\n        isInstrumentFeatureAvailable: isInstrumentFeatureAvailableProp,\n    } = derivedProps;\n\n    const getDefaultInstrument = useCallback((): AccountInstrument | undefined => {\n        if (isAddingNewInstrument || !instruments.length) {\n            return;\n        }\n\n        return find(instruments, { defaultInstrument: true }) || instruments[0];\n    }, [isAddingNewInstrument, instruments]);\n\n    const handleUseNewInstrument = useCallback(() => {\n        setIsAddingNewInstrument(true);\n        setSelectedInstrument(undefined);\n    }, []);\n\n    const handleSelectInstrument = useCallback(\n        (id: string) => {\n            setIsAddingNewInstrument(false);\n            setSelectedInstrument(find(instruments, { bigpayToken: id }));\n        },\n        [instruments],\n    );\n\n    useEffect(() => {\n        const initializePaymentAsync = async () => {\n            try {\n                await initializePayment({\n                    gatewayId: method.gateway,\n                    methodId: method.id,\n                });\n\n                if (isInstrumentFeatureAvailableProp) {\n                    await derivedProps.loadInstruments();\n                }\n            } catch (error) {\n                onUnhandledError(error);\n            }\n        };\n\n        void initializePaymentAsync();\n    }, [\n        initializePayment,\n        method.gateway,\n        method.id,\n        isInstrumentFeatureAvailableProp,\n        derivedProps,\n        onUnhandledError,\n    ]);\n\n    useEffect(() => {\n        return () => {\n            const deinitializePaymentAsync = async () => {\n                try {\n                    await deinitializePayment({\n                        gatewayId: method.gateway,\n                        methodId: method.id,\n                    });\n                } catch (error) {\n                    onUnhandledError(error);\n                }\n            };\n\n            void deinitializePaymentAsync();\n        };\n    }, [deinitializePayment, method.gateway, method.id, onUnhandledError]);\n\n    const currentSelectedInstrument = selectedInstrument || getDefaultInstrument();\n    const isLoading = isInitializing || isLoadingInstruments;\n    const shouldShowInstrumentFieldset =\n        isInstrumentFeatureAvailableProp && (instruments.length > 0 || isNewAddress);\n\n    if (!description && !isInstrumentFeatureAvailableProp) {\n        return null;\n    }\n\n    return (\n        <LoadingOverlay hideContentWhenLoading isLoading={isLoading}>\n            <div className=\"paymentMethod paymentMethod--hosted\">\n                {description}\n\n                {shouldShowInstrumentFieldset && (\n                    <AccountInstrumentFieldset\n                        instruments={instruments}\n                        onSelectInstrument={handleSelectInstrument}\n                        onUseNewInstrument={handleUseNewInstrument}\n                        selectedInstrument={currentSelectedInstrument}\n                    />\n                )}\n\n                {isInstrumentFeatureAvailableProp && (\n                    <StoreInstrumentFieldset\n                        instrumentId={\n                            currentSelectedInstrument && currentSelectedInstrument.bigpayToken\n                        }\n                        instruments={instruments}\n                        isAccountInstrument={true}\n                    />\n                )}\n            </div>\n        </LoadingOverlay>\n    );\n};\n\nexport default HostedPaymentMethodComponent;\n","import { type Coupon } from '@bigcommerce/checkout-sdk';\nimport React, { type FunctionComponent, memo } from 'react';\n\nimport { TranslatedString } from '@bigcommerce/checkout/locale';\n\nexport interface AppliedCouponProps {\n    coupon: Coupon;\n}\n\nconst AppliedCoupon: FunctionComponent<AppliedCouponProps> = ({ coupon }) => (\n    <div className=\"redeemable-column redeemable-info\" data-test=\"redeemable-item--coupon\">\n        <span className=\"redeemable-info-header\">\n            <span className=\"redeemable-info-header--highlight\" data-test=\"coupon-amount\">\n                {coupon.displayName}\n            </span>{' '}\n            <TranslatedString id=\"redeemable.coupon_text\" />\n        </span>\n\n        <span className=\"redeemable-info-subHeader\" data-test=\"coupon-code\">\n            {coupon.code}\n        </span>\n    </div>\n);\n\nexport default memo(AppliedCoupon);\n","import { type GiftCertificate } from '@bigcommerce/checkout-sdk';\nimport React, { type FunctionComponent, memo } from 'react';\n\nimport { TranslatedString } from '@bigcommerce/checkout/locale';\n\nimport { ShopperCurrency } from '../currency';\n\nexport interface AppliedGiftCertificateProps {\n    giftCertificate: GiftCertificate;\n}\n\nconst AppliedGiftCertificate: FunctionComponent<AppliedGiftCertificateProps> = ({\n    giftCertificate,\n}) => (\n    <div className=\"redeemable-column redeemable-info\" data-test=\"redeemable-item--giftCertificate\">\n        <span className=\"redeemable-info-header\">\n            <span className=\"redeemable-info-header--highlight\" data-test=\"giftCertificate-amount\">\n                <ShopperCurrency amount={giftCertificate.used} />\n            </span>{' '}\n            <TranslatedString id=\"redeemable.gift_certificate_text\" />\n        </span>\n\n        <span className=\"redeemable-info-subHeader\">\n            {giftCertificate.remaining > 0 && (\n                <span className=\"redeemable-info-subHeader--remaining\">\n                    <TranslatedString id=\"redeemable.gift_certificate_remaining_text\" />{' '}\n                    <span data-test=\"giftCertificate-remaining\">\n                        <ShopperCurrency amount={giftCertificate.remaining} />\n                    </span>\n                </span>\n            )}\n\n            <span data-test=\"giftCertificate-code\">{giftCertificate.code}</span>\n        </span>\n    </div>\n);\n\nexport default memo(AppliedGiftCertificate);\n","import React, { type FunctionComponent } from 'react';\n\nimport withIconContainer from './withIconContainer';\n\nconst IconRemove: FunctionComponent = () => (\n    <svg height=\"24\" viewBox=\"0 0 24 24\" width=\"24\" xmlns=\"http://www.w3.org/2000/svg\">\n        <path d=\"M14.59 8L12 10.59 9.41 8 8 9.41 10.59 12 8 14.59 9.41 16 12 13.41 14.59 16 16 14.59 13.41 12 16 9.41 14.59 8zM12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z\" />\n    </svg>\n);\n\nexport default withIconContainer(IconRemove);\n","import classNames from 'classnames';\nimport React, {type FunctionComponent, type ReactNode} from 'react';\n\nimport { TranslatedString } from '@bigcommerce/checkout/locale';\n\nimport { IconRemove } from '../ui/icon';\n\nimport './AppliedRedeemable.scss';\n\nexport interface AppliedRedeemableProps {\n    children: ReactNode;\n    isRemoving: boolean;\n    onRemove(): void;\n}\n\nconst AppliedRedeemable: FunctionComponent<AppliedRedeemableProps> = ({\n    children,\n    isRemoving,\n    onRemove,\n}) => (\n    <div className=\"form-checklist-header\">\n        <div className=\"form-checklist-checkbox optimizedCheckout-form-checklist-checkbox\">\n            <span className=\"is-srOnly\">\n                <TranslatedString id=\"redeemable.applied_text\" />\n            </span>\n        </div>\n\n        <div className=\"form-label form-label-redeemable\">\n            <div className=\"redeemable\">\n                {children}\n                <div className=\"redeemable-column redeemable-actions\">\n                    <button\n                        className={classNames('redeemable-remove', { 'is-loading': isRemoving })}\n                        data-test=\"redeemable-remove\"\n                        disabled={isRemoving}\n                        onClick={onRemove}\n                        type=\"button\"\n                    >\n                        <IconRemove />\n                    </button>\n                </div>\n            </div>\n        </div>\n    </div>\n);\n\nexport default AppliedRedeemable;\n","import { type Coupon, type GiftCertificate } from '@bigcommerce/checkout-sdk';\nimport React, { type FunctionComponent, memo, useCallback } from 'react';\n\nimport { AppliedCoupon } from '../coupon';\nimport { AppliedGiftCertificate } from '../giftCertificate';\n\nimport AppliedRedeemable from './AppliedRedeemable';\n\ninterface AppliedCouponProps {\n    coupon: Coupon;\n    isRemoving?: boolean;\n    onRemoved(code: string): void;\n}\n\nconst AppliedCouponChecklistItem: FunctionComponent<AppliedCouponProps> = ({\n    coupon,\n    onRemoved,\n    isRemoving = false,\n}) => {\n    const handleRemove = useCallback(() => {\n        onRemoved(coupon.code);\n    }, [coupon, onRemoved]);\n\n    return (\n        <li className=\"form-checklist-item optimizedCheckout-form-checklist-item\">\n            <AppliedRedeemable isRemoving={isRemoving} onRemove={handleRemove}>\n                <AppliedCoupon coupon={coupon} />\n            </AppliedRedeemable>\n        </li>\n    );\n};\n\ninterface AppliedGiftCertificateProps {\n    giftCertificate: GiftCertificate;\n    isRemoving?: boolean;\n    onRemoved(code: string): void;\n}\n\nconst AppliedGiftCertificateChecklistItem: FunctionComponent<AppliedGiftCertificateProps> = ({\n    giftCertificate,\n    onRemoved,\n    isRemoving = false,\n}) => {\n    const handleRemove = useCallback(() => {\n        onRemoved(giftCertificate.code);\n    }, [giftCertificate, onRemoved]);\n\n    return (\n        <li className=\"form-checklist-item optimizedCheckout-form-checklist-item\">\n            <AppliedRedeemable isRemoving={isRemoving} onRemove={handleRemove}>\n                <AppliedGiftCertificate giftCertificate={giftCertificate} />\n            </AppliedRedeemable>\n        </li>\n    );\n};\n\nexport interface AppliedRedeemablesProps {\n    coupons?: Coupon[];\n    giftCertificates?: GiftCertificate[];\n    isRemovingGiftCertificate?: boolean;\n    isRemovingCoupon?: boolean;\n    onRemovedCoupon(code: string): void;\n    onRemovedGiftCertificate(code: string): void;\n}\n\nconst AppliedRedeemables: FunctionComponent<AppliedRedeemablesProps> = ({\n    coupons = [],\n    giftCertificates = [],\n    isRemovingCoupon = false,\n    isRemovingGiftCertificate = false,\n    onRemovedCoupon,\n    onRemovedGiftCertificate,\n}) => {\n    if (!coupons.length && !giftCertificates.length) {\n        return null;\n    }\n\n    return (\n        <ul\n            className=\"form-checklist optimizedCheckout-form-checklist\"\n            data-test=\"redeemables-list\"\n        >\n            {coupons.map((coupon) => (\n                <AppliedCouponChecklistItem\n                    coupon={coupon}\n                    isRemoving={isRemovingCoupon}\n                    key={coupon.code}\n                    onRemoved={onRemovedCoupon}\n                />\n            ))}\n\n            {giftCertificates.map((giftCertificate) => (\n                <AppliedGiftCertificateChecklistItem\n                    giftCertificate={giftCertificate}\n                    isRemoving={isRemovingGiftCertificate}\n                    key={giftCertificate.code}\n                    onRemoved={onRemovedGiftCertificate}\n                />\n            ))}\n        </ul>\n    );\n};\n\nexport default memo(AppliedRedeemables);\n","import { type CheckoutSelectors, type RequestError } from '@bigcommerce/checkout-sdk';\nimport { memoizeOne } from '@bigcommerce/memoize';\nimport classNames from 'classnames';\nimport { type FieldProps, type FormikProps, withFormik } from 'formik';\nimport { noop } from 'lodash';\nimport React, {type FunctionComponent, type KeyboardEvent, memo, type ReactNode, useCallback} from 'react';\nimport { object, string } from 'yup';\n\nimport { preventDefault } from '@bigcommerce/checkout/dom-utils';\nimport { TranslatedString, withLanguage, type WithLanguageProps } from '@bigcommerce/checkout/locale';\nimport { useCheckout } from '@bigcommerce/checkout/payment-integration-api';\nimport { type FormContextType, FormProvider, useThemeContext } from '@bigcommerce/checkout/ui';\n\nimport { Alert, AlertType } from '../ui/alert';\nimport { Button, ButtonVariant } from '../ui/button';\nimport { FormField, Label, TextInput } from '../ui/form';\nimport { Toggle } from '../ui/toggle';\n\nimport AppliedRedeemables, { type AppliedRedeemablesProps } from './AppliedRedeemables';\n\nexport interface RedeemableFormValues {\n    redeemableCode: string;\n}\n\nexport type ReedemableChildrenProps = Pick<\n    RedeemableProps,\n    | 'onRemovedCoupon'\n    | 'onRemovedGiftCertificate'\n    | 'isRemovingGiftCertificate'\n    | 'isRemovingCoupon'\n    | 'coupons'\n    | 'giftCertificates'\n>;\n\nexport type RedeemableProps = {\n    appliedRedeemableError?: RequestError;\n    isApplyingRedeemable?: boolean;\n    isRemovingRedeemable?: boolean;\n    removedRedeemableError?: RequestError;\n    showAppliedRedeemables?: boolean;\n    shouldCollapseCouponCode?: boolean;\n    applyCoupon(code: string): Promise<CheckoutSelectors>;\n    applyGiftCertificate(code: string): Promise<CheckoutSelectors>;\n    clearError(error: Error): void;\n} & AppliedRedeemablesProps;\n\nconst Redeemable: FunctionComponent<\n    RedeemableProps & WithLanguageProps & FormikProps<RedeemableFormValues>\n    > = ({ shouldCollapseCouponCode, showAppliedRedeemables, ...formProps }) => {\n        const { themeV2 } = useThemeContext();\n\n        return (\n            <Toggle openByDefault={!shouldCollapseCouponCode}>\n                {({ toggle, isOpen }): ReactNode => (\n                    <>\n                        {shouldCollapseCouponCode && (\n                            <a\n                                aria-controls=\"redeemable-collapsable\"\n                                aria-expanded={isOpen}\n                                className={classNames('redeemable-label', { 'body-cta': themeV2 })}\n                                data-test=\"redeemable-label\"\n                                href=\"#\"\n                                onClick={preventDefault(toggle)}\n                            >\n                                <TranslatedString id=\"redeemable.toggle_action\" />\n                            </a>\n                        )}\n                        {!shouldCollapseCouponCode && (\n                            <div className={classNames('redeemable-label', { 'body-cta': themeV2 })}>\n                                <TranslatedString id=\"redeemable.toggle_action\" />\n                            </div>\n                        )}\n                        {(isOpen || !shouldCollapseCouponCode) && (\n                            <div data-test=\"redeemable-collapsable\" id=\"redeemable-collapsable\">\n                                <RedeemableForm {...formProps} />\n                                {showAppliedRedeemables && <AppliedRedeemables {...formProps} />}\n                            </div>\n                        )}\n                    </>\n                )}\n            </Toggle>\n        );\n    }\n\nconst RedeemableForm: FunctionComponent<\n    Partial<RedeemableProps> & FormikProps<RedeemableFormValues> & WithLanguageProps\n> = ({ appliedRedeemableError, isApplyingRedeemable, clearError = noop, submitForm, language }) => {\n    const {\n        checkoutState: {\n            statuses: { isSubmittingOrder }\n        }\n    } = useCheckout();\n    const { themeV2 } = useThemeContext();\n\n    const handleSubmitForm = (setSubmitted: FormContextType['setSubmitted']) => {\n        if (isSubmittingOrder()) {\n            return;\n        }\n\n        setSubmitted(true);\n        submitForm();\n    }\n\n    const handleKeyDown = useCallback(\n        memoizeOne((setSubmitted: FormContextType['setSubmitted']) => (event: KeyboardEvent) => {\n            if (appliedRedeemableError) {\n                clearError(appliedRedeemableError);\n            }\n\n            // note: to prevent submitting main form, we manually intercept\n            // the enter key event and submit the \"subform\".\n            if (event.keyCode === 13 || event.key === 'Enter') {\n                handleSubmitForm(setSubmitted);\n                event.preventDefault();\n            }\n        }),\n        [appliedRedeemableError, clearError, submitForm],\n    );\n\n    const handleSubmit = useCallback(\n        memoizeOne((setSubmitted: FormContextType['setSubmitted']) => () => {\n            handleSubmitForm(setSubmitted);\n        }),\n        [],\n    );\n\n    const renderLabel = useCallback(\n        (name: string) => (\n            <Label hidden htmlFor={name}>\n                <TranslatedString id=\"redeemable.code_label\" />\n            </Label>\n        ),\n        [],\n    );\n\n    const renderErrorMessage = useCallback((errorCode: string, errorMessage?: string) => {\n        switch (errorCode) {\n            case 'min_purchase':\n                return <TranslatedString id=\"redeemable.coupon_min_order_total\" />;\n\n            case 'not_applicable':\n                return <TranslatedString id=\"redeemable.coupon_location_error\" />;\n\n            default:\n                return errorMessage || <TranslatedString id=\"redeemable.code_invalid_error\" />;\n        }\n    }, []);\n\n    const renderInput = useCallback(\n        (setSubmitted: FormContextType['setSubmitted']) =>\n            ({ field }: FieldProps) =>\n                (\n                    <>\n                        {appliedRedeemableError &&\n                            appliedRedeemableError.errors &&\n                            appliedRedeemableError.errors[0] && (\n                                <Alert type={AlertType.Error}>\n                                    {renderErrorMessage(appliedRedeemableError.errors[0].code, appliedRedeemableError.errors[0].message)}\n                                </Alert>\n                            )}\n\n                        <div className=\"form-prefixPostfix\">\n                            <TextInput\n                                {...field}\n                                aria-label={language.translate('redeemable.code_label')}\n                                className=\"form-input optimizedCheckout-form-input\"\n                                onKeyDown={handleKeyDown(setSubmitted)}\n                                testId=\"redeemableEntry-input\"\n                                themeV2={themeV2}\n                            />\n\n                            <Button\n                                className={classNames('form-prefixPostfix-button--postfix', {\n                                    'body-bold': themeV2,\n                                })}\n                                disabled={isSubmittingOrder()}\n                                id=\"applyRedeemableButton\"\n                                isLoading={isApplyingRedeemable}\n                                onClick={handleSubmit(setSubmitted)}\n                                testId=\"redeemableEntry-submit\"\n                                variant={ButtonVariant.Secondary}\n                            >\n                                <TranslatedString id=\"redeemable.apply_action\" />\n                            </Button>\n                        </div>\n                    </>\n                ),\n        [\n            appliedRedeemableError,\n            handleKeyDown,\n            handleSubmit,\n            isApplyingRedeemable,\n            language,\n            isSubmittingOrder,\n            renderErrorMessage,\n        ],\n    );\n\n    const renderContent = useCallback(\n        memoizeOne(({ setSubmitted }: FormContextType) => (\n            <FormField\n                input={renderInput(setSubmitted)}\n                label={renderLabel}\n                name=\"redeemableCode\"\n            />\n        )),\n        [renderLabel, renderInput],\n    );\n\n    return (\n        <fieldset className=\"form-fieldset redeemable-entry\">\n            <FormProvider>{renderContent}</FormProvider>\n        </fieldset>\n    );\n};\n\nexport default withLanguage(\n    withFormik<RedeemableProps & WithLanguageProps, RedeemableFormValues>({\n        mapPropsToValues() {\n            return {\n                redeemableCode: '',\n            };\n        },\n\n        async handleSubmit(\n            { redeemableCode },\n            { props: { applyCoupon, applyGiftCertificate, clearError } },\n        ) {\n            const code = redeemableCode.trim();\n\n            try {\n                await applyGiftCertificate(code);\n            } catch (error) {\n                if (error instanceof Error) {\n                    clearError(error);\n                }\n\n                applyCoupon(code);\n            }\n        },\n\n        validationSchema({ language }: RedeemableProps & WithLanguageProps) {\n            return object({\n                redeemableCode: string().required(\n                    language.translate('redeemable.code_required_error'),\n                ),\n            });\n        },\n    })(memo(Redeemable)),\n);\n","import { type PaymentInitializeOptions } from '@bigcommerce/checkout-sdk';\nimport React, { type FunctionComponent, useCallback } from 'react';\n\nimport {\n    type CheckoutButtonResolveId,\n    PaymentMethodId,\n    type PaymentMethodProps,\n    toResolvableComponent,\n} from '@bigcommerce/checkout/payment-integration-api';\nimport { WalletButtonPaymentMethodComponent } from '@bigcommerce/checkout/wallet-button-integration';\n\nconst GooglePayPaymentMethod: FunctionComponent<PaymentMethodProps> = ({\n    checkoutService,\n    method,\n    onUnhandledError,\n    ...rest\n}) => {\n    const initializeGooglePayPayment = useCallback(\n        (defaultOptions: PaymentInitializeOptions) => {\n            const reinitializePayment = async (options: PaymentInitializeOptions) => {\n                try {\n                    await checkoutService.deinitializePayment({\n                        gatewayId: method.gateway,\n                        methodId: method.id,\n                    });\n\n                    await checkoutService.initializePayment({\n                        ...options,\n                        gatewayId: method.gateway,\n                        methodId: method.id,\n                    });\n                } catch (error) {\n                    if (error instanceof Error) {\n                        onUnhandledError(error);\n                    }\n                }\n            };\n\n            const loadingContainerId = 'checkout-app';\n            const mergedOptions = {\n                ...defaultOptions,\n                [PaymentMethodId.AdyenV2GooglePay]: {\n                    loadingContainerId,\n                    walletButton: 'walletButton',\n                    onError: onUnhandledError,\n                    onPaymentSelect: () => reinitializePayment(mergedOptions),\n                },\n                [PaymentMethodId.AdyenV3GooglePay]: {\n                    loadingContainerId,\n                    walletButton: 'walletButton',\n                    onError: onUnhandledError,\n                    onPaymentSelect: () => reinitializePayment(mergedOptions),\n                },\n                [PaymentMethodId.AuthorizeNetGooglePay]: {\n                    loadingContainerId,\n                    walletButton: 'walletButton',\n                    onError: onUnhandledError,\n                    onPaymentSelect: () => reinitializePayment(mergedOptions),\n                },\n                [PaymentMethodId.BNZGooglePay]: {\n                    loadingContainerId,\n                    walletButton: 'walletButton',\n                    onError: onUnhandledError,\n                    onPaymentSelect: () => reinitializePayment(mergedOptions),\n                },\n                [PaymentMethodId.BigCommercePaymentsGooglePay]: {\n                    loadingContainerId,\n                    walletButton: 'walletButton',\n                    onError: onUnhandledError,\n                    onPaymentSelect: () => reinitializePayment(mergedOptions),\n                },\n                [PaymentMethodId.BraintreeGooglePay]: {\n                    loadingContainerId,\n                    walletButton: 'walletButton',\n                    onError: onUnhandledError,\n                    onPaymentSelect: () => reinitializePayment(mergedOptions),\n                },\n                [PaymentMethodId.PayPalCommerceGooglePay]: {\n                    loadingContainerId,\n                    walletButton: 'walletButton',\n                    onError: onUnhandledError,\n                    onPaymentSelect: () => reinitializePayment(mergedOptions),\n                },\n                [PaymentMethodId.StripeGooglePay]: {\n                    loadingContainerId,\n                    walletButton: 'walletButton',\n                    onError: onUnhandledError,\n                    onPaymentSelect: () => reinitializePayment(mergedOptions),\n                },\n                [PaymentMethodId.StripeUPEGooglePay]: {\n                    loadingContainerId,\n                    walletButton: 'walletButton',\n                    onError: onUnhandledError,\n                    onPaymentSelect: () => reinitializePayment(mergedOptions),\n                },\n                [PaymentMethodId.CybersourceV2GooglePay]: {\n                    loadingContainerId,\n                    walletButton: 'walletButton',\n                    onError: onUnhandledError,\n                    onPaymentSelect: () => reinitializePayment(mergedOptions),\n                },\n                [PaymentMethodId.OrbitalGooglePay]: {\n                    loadingContainerId,\n                    walletButton: 'walletButton',\n                    onError: onUnhandledError,\n                    onPaymentSelect: () => reinitializePayment(mergedOptions),\n                },\n                [PaymentMethodId.CheckoutcomGooglePay]: {\n                    loadingContainerId,\n                    walletButton: 'walletButton',\n                    onError: onUnhandledError,\n                    onPaymentSelect: () => reinitializePayment(mergedOptions),\n                },\n                [PaymentMethodId.WorldpayAccessGooglePay]: {\n                    loadingContainerId,\n                    walletButton: 'walletButton',\n                    onError: onUnhandledError,\n                    onPaymentSelect: () => reinitializePayment(mergedOptions),\n                },\n                [PaymentMethodId.TdOnlineMartGooglePay]: {\n                    loadingContainerId,\n                    walletButton: 'walletButton',\n                    onError: onUnhandledError,\n                    onPaymentSelect: () => reinitializePayment(mergedOptions),\n                },\n                [PaymentMethodId.StripeOCSGooglePay]: {\n                    loadingContainerId,\n                    walletButton: 'walletButton',\n                    onError: onUnhandledError,\n                    onPaymentSelect: () => reinitializePayment(mergedOptions),\n                },\n            };\n\n            return checkoutService.initializePayment(mergedOptions);\n        },\n        [checkoutService, method, onUnhandledError],\n    );\n\n    return (\n        <WalletButtonPaymentMethodComponent\n            {...rest}\n            buttonId=\"walletButton\"\n            deinitializePayment={checkoutService.deinitializePayment}\n            initializePayment={initializeGooglePayPayment}\n            method={method}\n            shouldShowEditButton\n            signOutCustomer={checkoutService.signOutCustomer}\n        />\n    );\n};\n\nexport default toResolvableComponent<PaymentMethodProps, CheckoutButtonResolveId>(\n    GooglePayPaymentMethod,\n    [\n        { id: PaymentMethodId.AdyenV2GooglePay },\n        { id: PaymentMethodId.AdyenV3GooglePay },\n        { id: PaymentMethodId.AuthorizeNetGooglePay },\n        { id: PaymentMethodId.BNZGooglePay },\n        { id: PaymentMethodId.BraintreeGooglePay },\n        { id: PaymentMethodId.PayPalCommerceGooglePay },\n        { id: PaymentMethodId.BigCommercePaymentsGooglePay },\n        { id: PaymentMethodId.CheckoutcomGooglePay },\n        { id: PaymentMethodId.CybersourceV2GooglePay },\n        { id: PaymentMethodId.OrbitalGooglePay },\n        { id: PaymentMethodId.StripeGooglePay },\n        { id: PaymentMethodId.StripeUPEGooglePay },\n        { id: PaymentMethodId.WorldpayAccessGooglePay },\n        { id: PaymentMethodId.TdOnlineMartGooglePay },\n        { id: PaymentMethodId.StripeOCSGooglePay },\n    ],\n);\n","import { type PaymentMethod } from '@bigcommerce/checkout-sdk';\nimport { createContext } from 'react';\nimport { type ObjectSchema } from 'yup';\n\nimport { type PaymentFormValues } from '@bigcommerce/checkout/payment-integration-api';\n\nexport interface PaymentContextProps {\n    disableSubmit(method: PaymentMethod, disabled?: boolean): void;\n    // NOTE: This prop allows certain payment methods to override the default\n    // form submission behaviour. It is not recommended to use it because\n    // generally speaking we want to avoid method-specific snowflake behaviours.\n    // Nevertheless, because of some product / UX decisions made in the past\n    // (i.e.: Amazon), we have to have this backdoor so we can preserve these\n    // snowflake behaviours. In the future, if we decide to change the UX, we\n    // can remove this prop.\n    setSubmit(method: PaymentMethod, fn: ((values: PaymentFormValues) => void) | null): void;\n    setValidationSchema(\n        method: PaymentMethod,\n        schema: ObjectSchema<Partial<PaymentFormValues>> | null,\n    ): void;\n    hidePaymentSubmitButton(method: PaymentMethod, hidden?: boolean): void;\n}\n\nconst PaymentContext = createContext<PaymentContextProps | undefined>(undefined);\n\nexport default PaymentContext;\n","import { number } from 'card-validator';\n\nexport default function unformatCreditCardNumber(value: string, separator = ' '): string {\n    const { card } = number(value);\n\n    if (!card) {\n        return value;\n    }\n\n    return value.replace(new RegExp(separator, 'g'), '');\n}\n","enum PaymentMethodProviderType {\n    Api = 'PAYMENT_TYPE_API',\n    Hosted = 'PAYMENT_TYPE_HOSTED',\n    Offline = 'PAYMENT_TYPE_OFFLINE',\n    PPSDK = 'PAYMENT_TYPE_SDK',\n}\n\nexport default PaymentMethodProviderType;\n","import React, { type FunctionComponent } from 'react';\n\nimport { HostedPaymentComponent } from '@bigcommerce/checkout/hosted-payment-integration';\nimport {\n    type PaymentMethodProps,\n    type PaymentMethodResolveId,\n    toResolvableComponent,\n} from '@bigcommerce/checkout/payment-integration-api';\n\nconst BlueSnapDirectAlternativePaymentMethod: FunctionComponent<PaymentMethodProps> = ({\n    checkoutService,\n    ...rest\n}) => {\n    return (\n        <HostedPaymentComponent\n            {...rest}\n            checkoutService={checkoutService}\n            deinitializePayment={checkoutService.deinitializePayment}\n            initializePayment={checkoutService.initializePayment}\n        />\n    );\n};\n\nexport default toResolvableComponent<PaymentMethodProps, PaymentMethodResolveId>(\n    BlueSnapDirectAlternativePaymentMethod,\n    [{ gateway: 'bluesnapdirect' }],\n);\n","import { type CardInstrument, type PaymentInitializeOptions } from '@bigcommerce/checkout-sdk';\nimport { some } from 'lodash';\nimport React, { type FunctionComponent, useCallback } from 'react';\n\nimport {\n    getHostedInstrumentValidationSchema,\n    useHostedCreditCard,\n} from '@bigcommerce/checkout/hosted-credit-card-integration';\nimport {\n    type HostedWidgetComponentProps,\n    HostedWidgetPaymentComponent,\n} from '@bigcommerce/checkout/hosted-widget-integration';\nimport {\n    isInstrumentCardCodeRequiredSelector,\n    isInstrumentCardNumberRequiredSelector,\n} from '@bigcommerce/checkout/instrument-utils';\nimport {\n    type PaymentMethodProps,\n    type PaymentMethodResolveId,\n    toResolvableComponent,\n} from '@bigcommerce/checkout/payment-integration-api';\n\nconst MonerisPaymentMethod: FunctionComponent<PaymentMethodProps> = ({\n    language,\n    paymentForm,\n    checkoutState,\n    checkoutService,\n    method,\n    ...rest\n}) => {\n    const containerId = `moneris-iframe-container`;\n\n    const { getHostedStoredCardValidationFieldset, getHostedFormOptions } = useHostedCreditCard({\n        checkoutState,\n        method,\n        language,\n        paymentForm,\n    });\n\n    const hostedStoredCardValidationSchema = getHostedInstrumentValidationSchema({ language });\n    const {\n        hidePaymentSubmitButton,\n        disableSubmit,\n        setFieldValue,\n        setSubmit,\n        setValidationSchema,\n    } = paymentForm;\n\n    const instruments = checkoutState.data.getInstruments(method) || [];\n\n    const {\n        data: { getCheckout, isPaymentDataRequired },\n        statuses: { isLoadingInstruments },\n    } = checkoutState;\n\n    const checkout = getCheckout();\n    const customer = checkoutState.data.getCustomer();\n    const isGuestCustomer = customer?.isGuest;\n\n    const isInstrumentFeatureAvailable =\n        !isGuestCustomer && Boolean(method.config.isVaultingEnabled);\n\n    const initializeMonerisPayment: HostedWidgetComponentProps['initializePayment'] = useCallback(\n        async (options: PaymentInitializeOptions, selectedInstrument) => {\n            const paymentConfig = {\n                ...options,\n                moneris: {\n                    containerId,\n                    ...(selectedInstrument && {\n                        form: await getHostedFormOptions(selectedInstrument),\n                    }),\n                },\n            };\n\n            return checkoutService.initializePayment(paymentConfig);\n        },\n        [containerId, getHostedFormOptions, checkoutService],\n    );\n\n    const validateInstrument = (_shouldShowNumber: boolean, selectedInstrument: CardInstrument) => {\n        return getHostedStoredCardValidationFieldset(selectedInstrument);\n    };\n\n    return (\n        <HostedWidgetPaymentComponent\n            containerId={containerId}\n            deinitializePayment={checkoutService.deinitializePayment}\n            disableSubmit={disableSubmit}\n            hidePaymentSubmitButton={hidePaymentSubmitButton}\n            initializePayment={initializeMonerisPayment}\n            instruments={instruments}\n            isInstrumentCardCodeRequired={isInstrumentCardCodeRequiredSelector(checkoutState)}\n            isInstrumentCardNumberRequired={isInstrumentCardNumberRequiredSelector(checkoutState)}\n            isInstrumentFeatureAvailable={isInstrumentFeatureAvailable}\n            isLoadingInstruments={isLoadingInstruments()}\n            isPaymentDataRequired={isPaymentDataRequired()}\n            isSignedIn={some(checkout?.payments, { providerId: method.id })}\n            loadInstruments={checkoutService.loadInstruments}\n            method={method}\n            setFieldValue={setFieldValue}\n            setSubmit={setSubmit}\n            setValidationSchema={setValidationSchema}\n            signOut={checkoutService.signOutCustomer}\n            storedCardValidationSchema={hostedStoredCardValidationSchema}\n            validateInstrument={validateInstrument}\n            {...rest}\n        />\n    );\n};\n\nexport default toResolvableComponent<PaymentMethodProps, PaymentMethodResolveId>(\n    MonerisPaymentMethod,\n    [{ id: 'moneris' }],\n);\n","import { type FunctionComponent, useEffect } from 'react';\n\nimport {\n    type PaymentMethodProps,\n    toResolvableComponent,\n} from '@bigcommerce/checkout/payment-integration-api';\n\nconst OfflinePaymentMethod: FunctionComponent<PaymentMethodProps> = ({\n    method,\n    checkoutService,\n    onUnhandledError,\n}) => {\n    useEffect(() => {\n        const initializePayment = async () => {\n            try {\n                await checkoutService.initializePayment({\n                    gatewayId: method.gateway,\n                    methodId: method.id,\n                });\n            } catch (error) {\n                if (error instanceof Error) {\n                    onUnhandledError(error);\n                }\n            }\n        };\n\n        void initializePayment();\n\n        return () => {\n            const deinitializePayment = async () => {\n                try {\n                    await checkoutService.deinitializePayment({\n                        gatewayId: method.gateway,\n                        methodId: method.id,\n                    });\n                } catch (error) {\n                    if (error instanceof Error) {\n                        onUnhandledError(error);\n                    }\n                }\n            };\n\n            void deinitializePayment();\n        };\n    }, [checkoutService, method.gateway, method.id, onUnhandledError]);\n\n    return null;\n};\n\nexport default toResolvableComponent(OfflinePaymentMethod, [\n    {\n        type: 'PAYMENT_TYPE_OFFLINE',\n    },\n]);\n","import { type PaymentInitializeOptions } from '@bigcommerce/checkout-sdk';\nimport React, {\n    createRef,\n    type FunctionComponent,\n    type RefObject,\n    useCallback,\n    useRef,\n    useState,\n} from 'react';\n\nimport {\n    HostedPaymentComponent,\n    type HostedPaymentComponentProps,\n} from '@bigcommerce/checkout/hosted-payment-integration';\nimport {\n    type PaymentMethodProps,\n    type PaymentMethodResolveId,\n    toResolvableComponent,\n} from '@bigcommerce/checkout/payment-integration-api';\nimport { LoadingOverlay, Modal } from '@bigcommerce/checkout/ui';\n\nexport type BlueSnapV2PaymentMethodProps = HostedPaymentComponentProps;\n\ninterface BlueSnapV2PaymentMethodRef {\n    paymentPageContentRef: RefObject<HTMLDivElement>;\n    cancelBlueSnapV2Payment?(): void;\n}\n\nconst BlueSnapV2PaymentMethod: FunctionComponent<PaymentMethodProps> = ({\n    checkoutService,\n    checkoutState,\n    method,\n    paymentForm,\n    ...rest\n}) => {\n    const [isLoadingIframe, setisLoadingIframe] = useState<boolean>(false);\n    const [paymentPageContent, setPaymentPageContent] = useState<HTMLElement>();\n    const ref = useRef<BlueSnapV2PaymentMethodRef>({\n        paymentPageContentRef: createRef(),\n    });\n\n    const cancelBlueSnapV2ModalFlow = useCallback(() => {\n        setPaymentPageContent(undefined);\n\n        if (ref.current.cancelBlueSnapV2Payment) {\n            ref.current.cancelBlueSnapV2Payment();\n            ref.current.cancelBlueSnapV2Payment = undefined;\n        }\n    }, []);\n\n    const initializeBlueSnapV2Payment = useCallback(\n        (options: PaymentInitializeOptions) => {\n            return checkoutService.initializePayment({\n                ...options,\n                bluesnapv2: {\n                    onLoad(content: HTMLIFrameElement, cancel: () => void) {\n                        setPaymentPageContent(content);\n                        setisLoadingIframe(true);\n                        ref.current.cancelBlueSnapV2Payment = cancel;\n                    },\n                    style: {\n                        border: '1px solid lightgray',\n                        height: '60vh',\n                        width: '100%',\n                    },\n                },\n            });\n        },\n        [checkoutService],\n    );\n\n    const appendPaymentPageContent = useCallback(() => {\n        if (ref.current.paymentPageContentRef.current && paymentPageContent) {\n            paymentPageContent.addEventListener('load', () => {\n                setisLoadingIframe(false);\n            });\n            ref.current.paymentPageContentRef.current.appendChild(paymentPageContent);\n        }\n    }, [paymentPageContent]);\n\n    return (\n        <>\n            <HostedPaymentComponent\n                {...rest}\n                checkoutService={checkoutService}\n                checkoutState={checkoutState}\n                deinitializePayment={checkoutService.deinitializePayment}\n                initializePayment={initializeBlueSnapV2Payment}\n                method={method}\n                paymentForm={paymentForm}\n            />\n            <Modal\n                additionalModalClassName=\"modal--bluesnap\"\n                isOpen={!!paymentPageContent}\n                onAfterOpen={appendPaymentPageContent}\n                onRequestClose={cancelBlueSnapV2ModalFlow}\n                shouldShowCloseButton={true}\n            >\n                <LoadingOverlay isLoading={isLoadingIframe}>\n                    <div ref={ref.current.paymentPageContentRef} />\n                </LoadingOverlay>\n            </Modal>\n        </>\n    );\n};\n\nexport default toResolvableComponent<PaymentMethodProps, PaymentMethodResolveId>(\n    BlueSnapV2PaymentMethod,\n    [{ gateway: 'bluesnapv2' }],\n);\n","import React, { type FunctionComponent } from 'react';\n\nimport './Tooltip.scss';\n\nexport interface TooltipProps {\n    children: React.ReactNode;\n    testId?: string;\n}\n\nconst Tooltip: FunctionComponent<TooltipProps> = ({ children, testId }) => (\n    <span className=\"tooltip tooltip--basic\" data-test={testId}>\n        {children}\n    </span>\n);\n\nexport default Tooltip;\n","import { type FieldProps } from 'formik';\nimport React, { type FunctionComponent, memo, useCallback } from 'react';\n\nimport { DynamicInput, FormField } from '@bigcommerce/checkout/ui';\n\nexport interface BlueSnapDirectTextFieldProps {\n    labelContent: string;\n    maxLength?: number;\n    name: string;\n    autoComplete?: string;\n    useFloatingLabel?: boolean;\n}\n\nconst BlueSnapDirectTextField: FunctionComponent<BlueSnapDirectTextFieldProps> = ({\n    maxLength,\n    useFloatingLabel,\n    autoComplete,\n    ...rest\n}) => {\n    const renderInput = useCallback(\n        ({ field }: FieldProps<string>) => (\n            <DynamicInput\n                {...field}\n                aria-labelledby={`${field.name}-label ${field.name}-field-error-message`}\n                autoComplete={autoComplete}\n                id={field.name}\n                isFloatingLabelEnabled={useFloatingLabel}\n                maxLength={maxLength}\n            />\n        ),\n        [maxLength, useFloatingLabel, autoComplete],\n    );\n\n    return <FormField input={renderInput} {...rest} />;\n};\n\nexport default memo(BlueSnapDirectTextField);\n","import { type PaymentMethod } from '@bigcommerce/checkout-sdk';\nimport { type FieldProps, useField } from 'formik';\nimport React, {\n    type FunctionComponent,\n    type SyntheticEvent,\n    useCallback,\n    useEffect,\n    useState,\n} from 'react';\n\nimport { preventDefault } from '@bigcommerce/checkout/dom-utils';\nimport { withLanguage, type WithLanguageProps } from '@bigcommerce/checkout/locale';\nimport { DropdownTrigger, FormField } from '@bigcommerce/checkout/ui';\n\nexport interface MollieCustomCardFormProps {\n    method: PaymentMethod;\n}\n\nexport interface Issuer {\n    name: string;\n    image: {\n        size1x: string;\n    };\n    id: string;\n}\n\ninterface HiddenInputProps extends FieldProps {\n    selectedIssuer?: Issuer;\n}\n\ninterface SelecteIssuerProp {\n    selectedIssuer: Issuer;\n}\n\ninterface OptionButtonProps {\n    issuer: Issuer;\n    className?: string;\n    onClick?(event: SyntheticEvent<EventTarget>): void;\n}\n\nconst MollieAPMCustomForm: FunctionComponent<MollieCustomCardFormProps & WithLanguageProps> = ({\n    method,\n    language,\n}) => {\n    const issuers: Issuer[] = method.initializationData?.paymentMethodsResponse;\n\n    const [selectedIssuer, setSelectedIssuer] = useState<Issuer>({\n        name: language.translate('payment.select_your_bank'),\n        id: '',\n        image: { size1x: '' },\n    });\n    const render = useCallback(\n        (props: FieldProps) => <HiddenInput {...props} selectedIssuer={selectedIssuer} />,\n        [selectedIssuer],\n    );\n\n    if (!issuers || issuers.length === 0) {\n        return <></>;\n    }\n\n    const handleClick = ({ currentTarget }: SyntheticEvent<HTMLButtonElement>) => {\n        const _selectedIssuer = issuers.find(({ id }) => id === currentTarget.dataset.id);\n\n        if (!_selectedIssuer) {\n            return;\n        }\n\n        setSelectedIssuer(_selectedIssuer);\n    };\n\n    const issuersList = (\n        <ul\n            className=\"dropdown-menu instrumentSelect-dropdownMenu mollie-instrument-card\"\n            id=\"issuersDropdown\"\n        >\n            {issuers.map((issuer) => (\n                <li className=\"dropdown-menu-item dropdown-menu-item--select\" key={issuer.id}>\n                    <OptionButton issuer={issuer} onClick={handleClick} />\n                </li>\n            ))}\n        </ul>\n    );\n\n    return (\n        <>\n            <DropdownTrigger dropdown={issuersList}>\n                <IssuerSelectButton selectedIssuer={selectedIssuer} />\n            </DropdownTrigger>\n            <FormField input={render} name=\"issuer\" />\n        </>\n    );\n};\n\nexport const HiddenInput: FunctionComponent<HiddenInputProps> = ({\n    field: { value, ...restField },\n    selectedIssuer,\n}) => {\n    const [field, _, helpers] = useField(restField.name);\n    const Input = useCallback(() => <input {...field} type=\"hidden\" />, [field]);\n\n    useEffect(() => {\n        if (value === selectedIssuer) {\n            return;\n        }\n\n        void helpers.setValue(selectedIssuer?.id);\n    }, [value, selectedIssuer, helpers]);\n\n    return <Input />;\n};\n\nexport const IssuerSelectButton: FunctionComponent<SelecteIssuerProp> = ({ selectedIssuer }) => (\n    <a\n        className=\"instrumentSelect instrumentSelect-card button dropdown-button dropdown-toogle--select\"\n        href=\"#\"\n        id=\"issuerToggle\"\n        onClick={preventDefault()}\n    >\n        {selectedIssuer.name}\n    </a>\n);\n\nexport const OptionButton: FunctionComponent<OptionButtonProps> = ({ issuer, ...props }) => {\n    const { name, image, id } = issuer;\n\n    return (\n        <a className=\"instrumentSelect-details mollie-instrument-list\" {...props} data-id={id}>\n            <label className=\"mollie-instrument-left\">{name}</label>\n            <img alt={name} data-test=\"cart-item-image\" src={image.size1x} />\n        </a>\n    );\n};\n\nexport default withLanguage(MollieAPMCustomForm);\n","import { type PaymentMethod } from '@bigcommerce/checkout-sdk';\nimport classNames from 'classnames';\nimport React from 'react';\n\nimport { CreditCardCodeTooltip } from '@bigcommerce/checkout/instrument-utils';\nimport { TranslatedString } from '@bigcommerce/checkout/locale';\nimport { IconHelp, TooltipTrigger } from '@bigcommerce/checkout/ui';\n\nimport MollieAPMCustomForm from './MollieAPMCustomForm';\n\nexport interface MollieCustomCardFormProps {\n    options: {\n        cardNumberElementOptions: {\n            containerId: string;\n        };\n        cardExpiryElementOptions: {\n            containerId: string;\n        };\n        cardCvcElementOptions: {\n            containerId: string;\n        };\n        cardHolderElementOptions: {\n            containerId: string;\n        };\n    };\n    isCreditCard: boolean;\n    method: PaymentMethod;\n}\n\nconst MollieCustomCardForm: React.FunctionComponent<MollieCustomCardFormProps> = ({\n    options,\n    isCreditCard,\n    method,\n}) =>\n    !isCreditCard ? (\n        <MollieAPMCustomForm method={method} />\n    ) : (\n        <div className=\"form-ccFields\">\n            <div className={classNames('form-field', 'mollie-full')}>\n                <label\n                    className=\"form-label optimizedCheckout-form-label\"\n                    htmlFor={options.cardNumberElementOptions.containerId}\n                >\n                    <TranslatedString id=\"payment.credit_card_number_label\" />\n                </label>\n                <div\n                    className={classNames('form-input', 'optimizedCheckout-form-input', 'has-icon')}\n                    data-cse=\"CardNumber\"\n                    id={options.cardNumberElementOptions.containerId}\n                />\n            </div>\n            <div className={classNames('form-field', 'mollie-full')}>\n                <label\n                    className=\"form-label optimizedCheckout-form-label\"\n                    htmlFor={options.cardHolderElementOptions.containerId}\n                >\n                    <TranslatedString id=\"payment.credit_card_name_label\" />\n                </label>\n                <div\n                    className={classNames('form-input', 'optimizedCheckout-form-input')}\n                    data-cse=\"CardHolder\"\n                    id={options.cardHolderElementOptions.containerId}\n                />\n            </div>\n            <div className={classNames('form-field', 'mollie-aside', 'mollie-paddingRight')}>\n                <label\n                    className=\"form-label optimizedCheckout-form-label\"\n                    htmlFor={options.cardCvcElementOptions.containerId}\n                >\n                    <TranslatedString id=\"payment.credit_card_cvv_label\" />\n                    <TooltipTrigger placement=\"top-start\" tooltip={<CreditCardCodeTooltip />}>\n                        <span className=\"has-tip\">\n                            <IconHelp />\n                        </span>\n                    </TooltipTrigger>\n                </label>\n                <div\n                    className={classNames('form-input', 'optimizedCheckout-form-input')}\n                    data-cse=\"SecurityCode\"\n                    id={options.cardCvcElementOptions.containerId}\n                />\n            </div>\n            <div className={classNames('form-field', 'mollie-aside')}>\n                <label\n                    className=\"form-label optimizedCheckout-form-label\"\n                    htmlFor={options.cardExpiryElementOptions.containerId}\n                >\n                    <TranslatedString id=\"payment.credit_card_expiration_label\" />\n                </label>\n                <div\n                    className={classNames('form-input', 'optimizedCheckout-form-input')}\n                    data-cse=\"ExpiryDate\"\n                    id={options.cardExpiryElementOptions.containerId}\n                />\n            </div>\n        </div>\n    );\n\nexport default MollieCustomCardForm;\n","import {\n    type CardInstrument,\n    type LegacyHostedFormOptions,\n    type PaymentInitializeOptions,\n} from '@bigcommerce/checkout-sdk';\nimport { compact, forIn, some } from 'lodash';\nimport React, {\n    type FunctionComponent,\n    type ReactNode,\n    useCallback,\n    useContext,\n    useState,\n} from 'react';\n\nimport {\n    getHostedInstrumentValidationSchema,\n    HostedCreditCardValidation,\n} from '@bigcommerce/checkout/hosted-credit-card-integration';\nimport {\n    type HostedWidgetComponentProps,\n    HostedWidgetPaymentComponent,\n} from '@bigcommerce/checkout/hosted-widget-integration';\nimport {\n    CreditCardInputStylesType,\n    getCreditCardInputStyles,\n    isInstrumentCardCodeRequiredSelector,\n    isInstrumentCardNumberRequiredSelector,\n} from '@bigcommerce/checkout/instrument-utils';\nimport { LocaleContext } from '@bigcommerce/checkout/locale';\nimport {\n    PaymentFormContext,\n    type PaymentMethodProps,\n    type PaymentMethodResolveId,\n    toResolvableComponent,\n} from '@bigcommerce/checkout/payment-integration-api';\n\nimport MollieCustomCardForm from './MollieCustomCardForm';\n\nexport enum MolliePaymentMethodType {\n    creditcard = 'credit_card',\n}\n\nconst MolliePaymentMethod: FunctionComponent<PaymentMethodProps> = ({\n    method,\n    checkoutState,\n    checkoutService,\n    language,\n    paymentForm,\n    ...props\n}) => {\n    const paymentContext = useContext(PaymentFormContext);\n    const localeContext = useContext(LocaleContext);\n    const containerId = `mollie-${method.method}`;\n\n    const [focusedFieldType, setFocusedFieldType] = useState<string>();\n    const {\n        setFieldTouched,\n        setFieldValue,\n        setSubmitted,\n        submitForm,\n        setSubmit,\n        hidePaymentSubmitButton,\n        disableSubmit,\n        setValidationSchema,\n    } = paymentForm;\n\n    const isInstrumentCardCodeRequiredProp = isInstrumentCardCodeRequiredSelector(checkoutState);\n    const isInstrumentCardNumberRequiredProp =\n        isInstrumentCardNumberRequiredSelector(checkoutState);\n\n    const {\n        config: { cardCode },\n    } = method;\n    const isCardCodeRequired = cardCode || cardCode === null;\n    const getHostedFieldId: (name: string) => string = useCallback(\n        (name) => {\n            return `${compact([method.gateway, method.id]).join('-')}-${name}`;\n        },\n        [method],\n    );\n\n    const getHostedFormOptions: (\n        selectedInstrument?: CardInstrument,\n    ) => Promise<LegacyHostedFormOptions> = useCallback(\n        async (selectedInstrument) => {\n            const styleProps = ['color', 'fontFamily', 'fontSize', 'fontWeight'];\n            const isInstrumentCardNumberRequired = selectedInstrument\n                ? isInstrumentCardNumberRequiredProp(selectedInstrument)\n                : false;\n            const isInstrumentCardCodeRequired = selectedInstrument\n                ? isInstrumentCardCodeRequiredProp(selectedInstrument, method)\n                : false;\n            const styleContainerId = selectedInstrument\n                ? isInstrumentCardCodeRequired\n                    ? getHostedFieldId('ccCvv')\n                    : undefined\n                : getHostedFieldId('ccNumber');\n\n            return {\n                fields: selectedInstrument\n                    ? {\n                          cardCodeVerification:\n                              isInstrumentCardCodeRequired && selectedInstrument\n                                  ? {\n                                        accessibilityLabel: language.translate(\n                                            'payment.credit_card_cvv_label',\n                                        ),\n                                        containerId: getHostedFieldId('ccCvv'),\n                                        instrumentId: selectedInstrument.bigpayToken,\n                                    }\n                                  : undefined,\n                          cardNumberVerification:\n                              isInstrumentCardNumberRequired && selectedInstrument\n                                  ? {\n                                        accessibilityLabel: language.translate(\n                                            'payment.credit_card_number_label',\n                                        ),\n                                        containerId: getHostedFieldId('ccNumber'),\n                                        instrumentId: selectedInstrument.bigpayToken,\n                                    }\n                                  : undefined,\n                      }\n                    : {\n                          cardCode: isCardCodeRequired\n                              ? {\n                                    accessibilityLabel: language.translate(\n                                        'payment.credit_card_cvv_label',\n                                    ),\n                                    containerId: getHostedFieldId('ccCvv'),\n                                }\n                              : undefined,\n                          cardExpiry: {\n                              accessibilityLabel: language.translate(\n                                  'payment.credit_card_expiration_label',\n                              ),\n                              containerId: getHostedFieldId('ccExpiry'),\n                              placeholder: language.translate(\n                                  'payment.credit_card_expiration_placeholder_text',\n                              ),\n                          },\n                          cardName: {\n                              accessibilityLabel: language.translate(\n                                  'payment.credit_card_name_label',\n                              ),\n                              containerId: getHostedFieldId('ccName'),\n                          },\n                          cardNumber: {\n                              accessibilityLabel: language.translate(\n                                  'payment.credit_card_number_label',\n                              ),\n                              containerId: getHostedFieldId('ccNumber'),\n                          },\n                      },\n                styles: styleContainerId\n                    ? {\n                          default: await getCreditCardInputStyles(styleContainerId, styleProps),\n                          error: await getCreditCardInputStyles(\n                              styleContainerId,\n                              styleProps,\n                              CreditCardInputStylesType.Error,\n                          ),\n                          focus: await getCreditCardInputStyles(\n                              styleContainerId,\n                              styleProps,\n                              CreditCardInputStylesType.Focus,\n                          ),\n                      }\n                    : {},\n                onBlur: ({ fieldType }) => {\n                    if (focusedFieldType === fieldType) {\n                        setFocusedFieldType(undefined);\n                    }\n                },\n                onCardTypeChange: ({ cardType }) => {\n                    setFieldValue('hostedForm.cardType', cardType);\n                },\n                onEnter: () => {\n                    setSubmitted(true);\n                    submitForm();\n                },\n                onFocus: ({ fieldType }) => {\n                    setFocusedFieldType(fieldType);\n                },\n                onValidate: ({ errors = {} }) => {\n                    forIn(errors, (fieldErrors = [], fieldType) => {\n                        const errorKey = `hostedForm.errors.${fieldType}`;\n\n                        setFieldValue(errorKey, fieldErrors[0]?.type ?? '');\n\n                        if (fieldErrors[0]) {\n                            setFieldTouched(errorKey);\n                        }\n                    });\n                },\n            };\n        },\n        [\n            focusedFieldType,\n            getHostedFieldId,\n            isCardCodeRequired,\n            isInstrumentCardCodeRequiredProp,\n            isInstrumentCardNumberRequiredProp,\n            language,\n            method,\n            setFieldTouched,\n            setFieldValue,\n            setSubmitted,\n            submitForm,\n        ],\n    );\n    const getHostedStoredCardValidationFieldset: (selectedInstrument: CardInstrument) => ReactNode =\n        useCallback(\n            (selectedInstrument) => {\n                const isInstrumentCardNumberRequired = selectedInstrument\n                    ? isInstrumentCardNumberRequiredProp(selectedInstrument, method)\n                    : false;\n                const isInstrumentCardCodeRequired = selectedInstrument\n                    ? isInstrumentCardCodeRequiredProp(selectedInstrument, method)\n                    : false;\n\n                return (\n                    <HostedCreditCardValidation\n                        cardCodeId={\n                            isInstrumentCardCodeRequired ? getHostedFieldId('ccCvv') : undefined\n                        }\n                        cardNumberId={\n                            isInstrumentCardNumberRequired\n                                ? getHostedFieldId('ccNumber')\n                                : undefined\n                        }\n                        focusedFieldType={focusedFieldType}\n                    />\n                );\n            },\n            [\n                focusedFieldType,\n                getHostedFieldId,\n                isInstrumentCardCodeRequiredProp,\n                isInstrumentCardNumberRequiredProp,\n                method,\n            ],\n        );\n    const initializeMolliePayment: HostedWidgetComponentProps['initializePayment'] = useCallback(\n        async (options: PaymentInitializeOptions, selectedInstrument) => {\n            const mollieElements = getMolliesElementOptions();\n\n            return checkoutService.initializePayment({\n                ...options,\n                mollie: {\n                    containerId,\n                    cardNumberId: mollieElements.cardNumberElementOptions.containerId,\n                    cardCvcId: mollieElements.cardCvcElementOptions.containerId,\n                    cardHolderId: mollieElements.cardHolderElementOptions.containerId,\n                    cardExpiryId: mollieElements.cardExpiryElementOptions.containerId,\n                    styles: {\n                        base: {\n                            color: '#333333',\n                            '::placeholder': {\n                                color: '#999999',\n                            },\n                        },\n                        valid: {\n                            color: '#090',\n                        },\n                        invalid: {\n                            color: '#D14343',\n                        },\n                    },\n                    unsupportedMethodMessage: localeContext?.language.translate(\n                        'payment.mollie_unsupported_method_error',\n                    ),\n                    disableButton: (disabled: boolean) => {\n                        if (paymentContext) {\n                            disableSubmit(method, disabled);\n                        }\n                    },\n                    ...(selectedInstrument && {\n                        form: await getHostedFormOptions(selectedInstrument),\n                    }),\n                },\n            });\n        },\n        [\n            checkoutService,\n            containerId,\n            disableSubmit,\n            localeContext?.language,\n            getHostedFormOptions,\n            paymentContext,\n            method,\n        ],\n    );\n\n    const getMolliesElementOptions = () => {\n        return {\n            cardNumberElementOptions: {\n                containerId: 'mollie-card-number-component-field',\n            },\n            cardExpiryElementOptions: {\n                containerId: 'mollie-card-expiry-component-field',\n            },\n            cardCvcElementOptions: {\n                containerId: 'mollie-card-cvc-component-field',\n            },\n            cardHolderElementOptions: {\n                containerId: 'mollie-card-holder-component-field',\n            },\n        };\n    };\n\n    function renderCustomPaymentForm() {\n        const options = getMolliesElementOptions();\n\n        return (\n            <MollieCustomCardForm isCreditCard={isCreditCard()} method={method} options={options} />\n        );\n    }\n\n    function isCreditCard(): boolean {\n        return method.method === MolliePaymentMethodType.creditcard;\n    }\n\n    function validateInstrument(_shouldShowNumber: boolean, selectedInstrument: CardInstrument) {\n        return getHostedStoredCardValidationFieldset(selectedInstrument);\n    }\n\n    const instruments = checkoutState.data.getInstruments(method) || [];\n\n    const {\n        data: { getCheckout, isPaymentDataRequired, getCustomer },\n        statuses: { isLoadingInstruments },\n    } = checkoutState;\n\n    const checkout = getCheckout();\n    const customer = getCustomer();\n    const isGuestCustomer = customer?.isGuest;\n    const isInstrumentFeatureAvailable =\n        !isGuestCustomer && Boolean(method.config.isVaultingEnabled);\n\n    return (\n        <HostedWidgetPaymentComponent\n            {...props}\n            containerId={containerId}\n            deinitializePayment={checkoutService.deinitializePayment}\n            disableSubmit={disableSubmit}\n            hideContentWhenSignedOut\n            hidePaymentSubmitButton={hidePaymentSubmitButton}\n            initializePayment={initializeMolliePayment}\n            instruments={instruments}\n            isAccountInstrument={!isCreditCard()}\n            isInstrumentCardCodeRequired={isInstrumentCardCodeRequiredSelector(checkoutState)}\n            isInstrumentCardNumberRequired={isInstrumentCardNumberRequiredSelector(checkoutState)}\n            isInstrumentFeatureAvailable={isInstrumentFeatureAvailable}\n            isLoadingInstruments={isLoadingInstruments()}\n            isPaymentDataRequired={isPaymentDataRequired()}\n            isSignedIn={some(checkout?.payments, { providerId: method.id })}\n            loadInstruments={checkoutService.loadInstruments}\n            method={method}\n            renderCustomPaymentForm={renderCustomPaymentForm}\n            setFieldValue={setFieldValue}\n            setSubmit={setSubmit}\n            setValidationSchema={setValidationSchema}\n            shouldRenderCustomInstrument={true}\n            signOut={checkoutService.signOutCustomer}\n            storedCardValidationSchema={getHostedInstrumentValidationSchema({ language })}\n            validateInstrument={validateInstrument}\n        />\n    );\n};\n\nexport default toResolvableComponent<PaymentMethodProps, PaymentMethodResolveId>(\n    MolliePaymentMethod,\n    [{ gateway: 'mollie' }, { gateway: 'mollie', id: 'applepay' }],\n);\n","import { some } from 'lodash';\nimport React, { type FunctionComponent, useCallback } from 'react';\n\nimport { HostedWidgetPaymentComponent } from '@bigcommerce/checkout/hosted-widget-integration';\nimport {\n    isInstrumentCardCodeRequiredSelector,\n    isInstrumentCardNumberRequiredSelector,\n} from '@bigcommerce/checkout/instrument-utils';\nimport {\n    type PaymentMethodProps,\n    type PaymentMethodResolveId,\n    toResolvableComponent,\n} from '@bigcommerce/checkout/payment-integration-api';\n\nconst KlarnaPaymentMethod: FunctionComponent<PaymentMethodProps> = ({\n    checkoutService,\n    checkoutState,\n    method,\n    paymentForm,\n    ...rest\n}) => {\n    const initializeKlarnaPayment = useCallback(\n        (options: any) =>\n            // eslint-disable-next-line @typescript-eslint/no-unsafe-argument\n            checkoutService.initializePayment({\n                ...options,\n                klarna: {\n                    container: `#${options.methodId}Widget`,\n                },\n            }),\n        [checkoutService],\n    );\n\n    const {\n        hidePaymentSubmitButton,\n        disableSubmit,\n        setFieldValue,\n        setSubmit,\n        setValidationSchema,\n    } = paymentForm;\n\n    const instruments = checkoutState.data.getInstruments(method) || [];\n\n    const {\n        data: { getCheckout, isPaymentDataRequired },\n        statuses: { isLoadingInstruments },\n    } = checkoutState;\n\n    const checkout = getCheckout();\n    const customer = checkoutState.data.getCustomer();\n    const isGuestCustomer = customer?.isGuest;\n    const isInstrumentFeatureAvailable =\n        !isGuestCustomer && Boolean(method.config.isVaultingEnabled);\n\n    return (\n        <HostedWidgetPaymentComponent\n            containerId={`${method.id}Widget`}\n            deinitializePayment={checkoutService.deinitializePayment}\n            disableSubmit={disableSubmit}\n            hidePaymentSubmitButton={hidePaymentSubmitButton}\n            initializePayment={initializeKlarnaPayment}\n            instruments={instruments}\n            isInstrumentCardCodeRequired={isInstrumentCardCodeRequiredSelector(checkoutState)}\n            isInstrumentCardNumberRequired={isInstrumentCardNumberRequiredSelector(checkoutState)}\n            isInstrumentFeatureAvailable={isInstrumentFeatureAvailable}\n            isLoadingInstruments={isLoadingInstruments()}\n            isPaymentDataRequired={isPaymentDataRequired()}\n            isSignedIn={some(checkout?.payments, { providerId: method.id })}\n            loadInstruments={checkoutService.loadInstruments}\n            method={method}\n            setFieldValue={setFieldValue}\n            setSubmit={setSubmit}\n            setValidationSchema={setValidationSchema}\n            signOut={checkoutService.signOutCustomer}\n            {...rest}\n        />\n    );\n};\n\nexport default toResolvableComponent<PaymentMethodProps, PaymentMethodResolveId>(\n    KlarnaPaymentMethod,\n    [{ id: 'klarna' }],\n);\n","export interface BlueSnapDirectInitializationData {\n    sepaCreditorCompanyName: string;\n    idealIssuers: IdealIssuer[];\n}\n\ninterface IdealIssuer {\n    issuerId: string;\n    issuerName: string;\n}\n\nexport const isBlueSnapDirectIdealIssuerList = (array: unknown): array is IdealIssuer[] => {\n    if (\n        !(\n            Array.isArray(array) &&\n            array.length &&\n            'issuerId' in array[0] &&\n            'issuerName' in array[0]\n        )\n    ) {\n        return false;\n    }\n\n    return true;\n};\n\nexport const isBlueSnapDirectInitializationData = (\n    object: unknown,\n): object is BlueSnapDirectInitializationData => {\n    if (\n        !(\n            typeof object === 'object' &&\n            object !== null &&\n            (('sepaCreditorCompanyName' in object &&\n                typeof object.sepaCreditorCompanyName === 'string') ||\n                ('idealIssuers' in object && isBlueSnapDirectIdealIssuerList(object.idealIssuers)))\n        )\n    ) {\n        return false;\n    }\n\n    return true;\n};\n","import { type LanguageService } from '@bigcommerce/checkout-sdk';\nimport { memoize } from '@bigcommerce/memoize';\nimport { boolean, object, type ObjectSchema, string } from 'yup';\n\nimport {\n    type DocumentOnlyCustomFormFieldsetValues,\n    type FawryCustomFormFieldsetValues,\n    type IdealCustomFormFieldsetValues,\n    type SepaCustomFormFieldsetValues,\n} from './CheckoutcomFormValues';\n\nexport type checkoutcomCustomPaymentMethods = 'fawry' | 'sepa';\nexport type documentPaymentMethods = 'oxxo' | 'qpay' | 'boleto' | 'ideal';\nexport type checkoutcomPaymentMethods = documentPaymentMethods | checkoutcomCustomPaymentMethods;\nexport const checkoutcomPaymentMethodsArray = ['fawry', 'sepa', 'oxxo', 'qpay', 'boleto', 'ideal'];\nexport interface CustomValidationSchemaOptions {\n    paymentMethod: checkoutcomPaymentMethods;\n    language: LanguageService;\n}\n\nconst checkoutComShemas: {\n    [key in checkoutcomPaymentMethods]: (language: LanguageService) => any;\n} = {\n    oxxo: (language: LanguageService) => ({\n        ccDocument: string()\n            .required(language.translate('payment.checkoutcom_document_invalid_error_oxxo'))\n            .length(18, language.translate('payment.checkoutcom_document_invalid_error_oxxo')),\n    }),\n    qpay: (language: LanguageService) => ({\n        ccDocument: string()\n            .notRequired()\n            .max(32, language.translate('payment.checkoutcom_document_invalid_error_qpay')),\n    }),\n    boleto: (language: LanguageService) => ({\n        ccDocument: string()\n            .required(language.translate('payment.checkoutcom_document_invalid_error_boleto'))\n            .min(11, language.translate('payment.checkoutcom_document_invalid_error_boleto'))\n            .max(14, language.translate('payment.checkoutcom_document_invalid_error_boleto')),\n    }),\n    sepa: (language: LanguageService) => ({\n        iban: string().required(language.translate('payment.sepa_account_number_required')),\n        sepaMandate: boolean().required(language.translate('payment.sepa_mandate_required')),\n    }),\n    ideal: (language: LanguageService) => ({\n        bic: string().required(language.translate('payment.ideal_bic_required')),\n    }),\n    fawry: (language: LanguageService) => ({\n        customerMobile: string()\n            .required(language.translate('payment.checkoutcom_fawry_customer_mobile_invalid_error'))\n            .matches(\n                new RegExp(`^\\\\d{11}$`),\n                language.translate('payment.checkoutcom_fawry_customer_mobile_invalid_error'),\n            ),\n        customerEmail: string()\n            .required(language.translate('payment.checkoutcom_fawry_customer_email_invalid_error'))\n            .email(language.translate('payment.checkoutcom_fawry_customer_email_invalid_error')),\n    }),\n};\n\nexport default memoize(function getCheckoutcomValidationSchemas({\n    paymentMethod,\n    language,\n}: CustomValidationSchemaOptions): ObjectSchema<\n    | DocumentOnlyCustomFormFieldsetValues\n    | FawryCustomFormFieldsetValues\n    | IdealCustomFormFieldsetValues\n    | SepaCustomFormFieldsetValues\n> {\n    // eslint-disable-next-line @typescript-eslint/no-unsafe-argument\n    return object(checkoutComShemas[paymentMethod](language));\n});\n","import { createInjectHoc } from '@bigcommerce/checkout/legacy-hoc';\nimport { FormContext, type FormContextType } from '@bigcommerce/checkout/ui';\n\nexport type WithFormProps = FormContextType;\n\nconst withForm = createInjectHoc(FormContext, { displayNamePrefix: 'WithForm' });\n\nexport default withForm;\n","import { type BankInstrument, type PaymentMethod } from '@bigcommerce/checkout-sdk';\nimport { find } from 'lodash';\nimport { useCallback, useEffect, useMemo, useState } from 'react';\n\nimport { isSepaInstrument } from '@bigcommerce/checkout/instrument-utils';\nimport { useCheckout, usePaymentFormContext } from '@bigcommerce/checkout/payment-integration-api';\n\nconst useSepaInstruments = (method: PaymentMethod) => {\n    const [currentInstrument, setCurrentInstrument] = useState<BankInstrument | undefined>();\n\n    const { checkoutState } = useCheckout();\n    const customer = checkoutState.data.getCustomer();\n    const instruments = checkoutState.data.getInstruments(method);\n\n    const { paymentForm } = usePaymentFormContext();\n    const { setFieldValue } = paymentForm;\n\n    const accountInstruments = useMemo(() => {\n        if (instruments) {\n            return instruments.filter(isSepaInstrument);\n        }\n\n        return [];\n    }, [instruments]);\n\n    const isInstrumentFeatureAvailable =\n        !customer?.isGuest && Boolean(method.config.isVaultingEnabled);\n\n    const shouldShowInstrumentFieldset =\n        isInstrumentFeatureAvailable && accountInstruments.length > 0;\n    const shouldCreateNewInstrument = shouldShowInstrumentFieldset && !currentInstrument;\n\n    const getDefaultInstrument = useCallback((): BankInstrument | undefined => {\n        if (!accountInstruments.length) {\n            return;\n        }\n\n        const defaultAccountInstrument = accountInstruments.filter(\n            ({ defaultInstrument }) => defaultInstrument,\n        );\n\n        return defaultAccountInstrument[0] || accountInstruments[0];\n    }, [accountInstruments]);\n\n    useEffect(() => {\n        setCurrentInstrument(isInstrumentFeatureAvailable ? getDefaultInstrument() : undefined);\n    }, [isInstrumentFeatureAvailable, getDefaultInstrument]);\n\n    useEffect(() => {\n        if (!shouldShowInstrumentFieldset) {\n            setFieldValue('instrumentId', '');\n        }\n    }, [setFieldValue, shouldShowInstrumentFieldset]);\n\n    const handleSelectInstrument = useCallback(\n        (id: string) => {\n            setCurrentInstrument(find(accountInstruments, { bigpayToken: id }));\n            setFieldValue('instrumentId', id);\n            setFieldValue('shouldSetAsDefaultInstrument', false);\n        },\n        [accountInstruments, setFieldValue],\n    );\n\n    const handleUseNewInstrument = useCallback(() => {\n        setCurrentInstrument(undefined);\n        setFieldValue('instrumentId', '');\n        setFieldValue('shouldSaveInstrument', false);\n        setFieldValue('shouldSetAsDefaultInstrument', false);\n    }, [setFieldValue]);\n\n    return {\n        accountInstruments,\n        currentInstrument,\n        handleSelectInstrument,\n        handleUseNewInstrument,\n        isInstrumentFeatureAvailable,\n        shouldShowInstrumentFieldset,\n        shouldCreateNewInstrument,\n    };\n};\n\nexport default useSepaInstruments;\n","import { type LanguageService } from '@bigcommerce/checkout-sdk';\nimport { memoize } from '@bigcommerce/memoize';\nimport { object, type ObjectSchema, string } from 'yup';\n\nexport default memoize(function getSepaValidationSchema(\n    language: LanguageService,\n    shouldRenderFields: boolean,\n): ObjectSchema {\n    const schema = {\n        ...(!shouldRenderFields ? { instrumentId: string().required() } : {}),\n        ...(shouldRenderFields\n            ? {\n                  iban: string()\n                      .matches(\n                          /^[a-zA-Z0-9]+$/i,\n                          language.translate(`address.invalid_characters_error`, { label: 'IBAN' }),\n                      )\n                      .required(language.translate('payment.sepa_account_number_required')),\n                  firstName: string().required(\n                      language.translate('address.first_name_required_error'),\n                  ),\n                  lastName: string().required(\n                      language.translate('address.last_name_required_error'),\n                  ),\n              }\n            : {}),\n    };\n\n    return object(schema);\n});\n","import React, { type FunctionComponent, useCallback, useEffect, useState } from 'react';\n\nimport {\n    AccountInstrumentFieldset,\n    StoreInstrumentFieldset,\n} from '@bigcommerce/checkout/instrument-utils';\nimport {\n    type PaymentMethodProps,\n    type PaymentMethodResolveId,\n    toResolvableComponent,\n} from '@bigcommerce/checkout/payment-integration-api';\nimport { CheckboxFormField, Fieldset, Legend, LoadingOverlay } from '@bigcommerce/checkout/ui';\n\nimport { isBlueSnapDirectInitializationData } from './BlueSnapDirectInitializationData';\nimport BlueSnapDirectTextField from './fields/BlueSnapDirectTextField';\nimport useSepaInstruments from './hooks/useSepaInstruments';\nimport getSepaValidationSchema from './validation-schemas/getSepaValidationSchema';\n\nconst BlueSnapDirectSepaPaymentMethod: FunctionComponent<PaymentMethodProps> = (props) => {\n    const {\n        method,\n        checkoutService: { initializePayment, deinitializePayment, loadInstruments },\n        checkoutState: {\n            data: { isPaymentDataRequired },\n            statuses: { isLoadingInstruments },\n        },\n        paymentForm: { disableSubmit, setValidationSchema },\n        language,\n        onUnhandledError,\n    } = props;\n\n    if (!isBlueSnapDirectInitializationData(method.initializationData)) {\n        throw new Error('Unable to get initialization data');\n    }\n\n    const [disabled, setDisabled] = useState(true);\n    const toggleSubmitButton = useCallback(\n        (shopperPermission: boolean) => setDisabled(!shopperPermission),\n        [setDisabled],\n    );\n\n    useEffect(\n        () => disableSubmit(method, isPaymentDataRequired() && disabled),\n        [disableSubmit, disabled, isPaymentDataRequired, method],\n    );\n\n    const initializeSepa = useCallback(async () => {\n        await initializePayment({\n            gatewayId: method.gateway,\n            methodId: method.id,\n        });\n    }, [initializePayment, method]);\n\n    const deinitializeSepa = useCallback(async () => {\n        await deinitializePayment({\n            gatewayId: method.gateway,\n            methodId: method.id,\n        });\n    }, [deinitializePayment, method.gateway, method.id]);\n\n    useEffect(() => {\n        void initializeSepa();\n\n        return () => {\n            void deinitializeSepa();\n        };\n    }, [deinitializeSepa, initializeSepa]);\n\n    const {\n        accountInstruments,\n        currentInstrument,\n        handleSelectInstrument,\n        handleUseNewInstrument,\n        isInstrumentFeatureAvailable,\n        shouldShowInstrumentFieldset,\n        shouldCreateNewInstrument,\n    } = useSepaInstruments(method);\n\n    const shouldShowForm = !shouldShowInstrumentFieldset || shouldCreateNewInstrument;\n\n    useEffect(() => {\n        setValidationSchema(method, getSepaValidationSchema(language, shouldShowForm));\n    }, [language, shouldShowForm, setValidationSchema, method]);\n\n    useEffect(() => {\n        const loadInstrumentsOrThrow = async () => {\n            try {\n                await loadInstruments();\n            } catch (error) {\n                if (error instanceof Error) {\n                    onUnhandledError(error);\n                }\n            }\n        };\n\n        if (isInstrumentFeatureAvailable) {\n            void loadInstrumentsOrThrow();\n        }\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, []);\n\n    const isLoading = isLoadingInstruments();\n\n    return (\n        <LoadingOverlay hideContentWhenLoading isLoading={isLoading}>\n            <Fieldset\n                legend={\n                    <Legend hidden>\n                        {language.translate('payment.bluesnap_direct_sepa_direct_debit')}\n                    </Legend>\n                }\n                style={{ paddingBottom: '1rem' }}\n            >\n                {shouldShowInstrumentFieldset && (\n                    <div className=\"checkout-ach-form__instrument\">\n                        <AccountInstrumentFieldset\n                            instruments={accountInstruments}\n                            onSelectInstrument={handleSelectInstrument}\n                            onUseNewInstrument={handleUseNewInstrument}\n                            selectedInstrument={currentInstrument}\n                        />\n                    </div>\n                )}\n                {shouldShowForm && (\n                    <>\n                        <BlueSnapDirectTextField\n                            autoComplete=\"iban\"\n                            labelContent={language.translate('payment.bluesnap_direct_iban.label')}\n                            name=\"iban\"\n                            useFloatingLabel={true}\n                        />\n                        <BlueSnapDirectTextField\n                            labelContent={language.translate('address.first_name_label')}\n                            name=\"firstName\"\n                            useFloatingLabel={true}\n                        />\n                        <BlueSnapDirectTextField\n                            labelContent={language.translate('address.last_name_label')}\n                            name=\"lastName\"\n                            useFloatingLabel={true}\n                        />\n                    </>\n                )}\n\n                <CheckboxFormField\n                    labelContent={language.translate(\n                        'payment.bluesnap_direct_sepa_mandate_disclaimer',\n                        {\n                            creditorName: method.initializationData.sepaCreditorCompanyName,\n                        },\n                    )}\n                    name=\"shopperPermission\"\n                    onChange={toggleSubmitButton}\n                />\n\n                {isInstrumentFeatureAvailable && (\n                    <StoreInstrumentFieldset\n                        instrumentId={currentInstrument?.bigpayToken}\n                        instruments={accountInstruments}\n                        isAccountInstrument\n                    />\n                )}\n            </Fieldset>\n        </LoadingOverlay>\n    );\n};\n\nexport default toResolvableComponent<PaymentMethodProps, PaymentMethodResolveId>(\n    BlueSnapDirectSepaPaymentMethod,\n    [{ id: 'sepa_direct_debit', gateway: 'bluesnapdirect' }],\n);\n","import { type CheckoutContextProps } from '@bigcommerce/checkout/payment-integration-api';\n\nimport { EMPTY_ARRAY } from '../common/utility';\n\nimport { type RedeemableProps } from './Redeemable';\n\nexport default function mapToRedeemableProps(\n    context: CheckoutContextProps,\n): RedeemableProps | null {\n    const {\n        checkoutService,\n        checkoutState: {\n            data: { getConfig, getCoupons, getGiftCertificates },\n            statuses: {\n                isApplyingCoupon,\n                isApplyingGiftCertificate,\n                isRemovingCoupon,\n                isRemovingGiftCertificate,\n            },\n            errors: {\n                getApplyCouponError,\n                getApplyGiftCertificateError,\n                getRemoveCouponError,\n                getRemoveGiftCertificateError,\n            },\n        },\n    } = context;\n\n    const config = getConfig();\n\n    if (!config) {\n        return null;\n    }\n\n    return {\n        appliedRedeemableError: getApplyCouponError() || getApplyGiftCertificateError(),\n        applyCoupon: checkoutService.applyCoupon,\n        applyGiftCertificate: checkoutService.applyGiftCertificate,\n        clearError: checkoutService.clearError,\n        coupons: getCoupons() || EMPTY_ARRAY,\n        giftCertificates: getGiftCertificates() || EMPTY_ARRAY,\n        isApplyingRedeemable: isApplyingCoupon() || isApplyingGiftCertificate(),\n        isRemovingCoupon: isRemovingCoupon(),\n        isRemovingGiftCertificate: isRemovingGiftCertificate(),\n        onRemovedCoupon: checkoutService.removeCoupon,\n        onRemovedGiftCertificate: checkoutService.removeGiftCertificate,\n        removedRedeemableError: getRemoveCouponError() || getRemoveGiftCertificateError(),\n        shouldCollapseCouponCode: config.checkoutSettings.isCouponCodeCollapsed,\n    };\n}\n","import { createInjectHoc } from '@bigcommerce/checkout/legacy-hoc';\n\nimport PaymentContext, { type PaymentContextProps } from './PaymentContext';\n\nexport type WithPaymentProps = PaymentContextProps;\n\nconst withPayment = createInjectHoc(PaymentContext, { displayNamePrefix: 'WithPayment' });\n\nexport default withPayment;\n","import React, { type FunctionComponent, useEffect } from 'react';\n\nimport {\n    type PaymentMethodProps,\n    type PaymentMethodResolveId,\n    toResolvableComponent,\n} from '@bigcommerce/checkout/payment-integration-api';\n\nconst BraintreeLocalPaymentMethod: FunctionComponent<any> = ({\n    method,\n    checkoutService,\n    paymentForm,\n    language,\n    onUnhandledError,\n}) => {\n    const methodId = method.id;\n\n    const initializePayment = async () => {\n        try {\n            await checkoutService.initializePayment({\n                gatewayId: method.gateway,\n                methodId: method.id,\n                braintreelocalmethods: {\n                    container: '#checkout-payment-continue',\n                    buttonText: language.translate('payment.continue_with_brand', {\n                        brandName: methodId,\n                    }),\n                    onRenderButton: () => {\n                        paymentForm.hidePaymentSubmitButton(method, true);\n                    },\n                    submitForm: () => {\n                        paymentForm.setSubmitted(true);\n                        paymentForm.submitForm();\n                    },\n                    onError: (error: Error) => {\n                        paymentForm.disableSubmit(method, true);\n                        onUnhandledError(error);\n                    },\n                },\n            });\n        } catch (error) {\n            if (error instanceof Error) {\n                onUnhandledError(error);\n            }\n        }\n    };\n\n    const deinitializePayment = async () => {\n        try {\n            await checkoutService.deinitializePayment({\n                gatewayId: method.gateway,\n                methodId: method.id,\n            });\n        } catch (error) {\n            if (error instanceof Error) {\n                onUnhandledError(error);\n            }\n        }\n    };\n\n    useEffect(() => {\n        void initializePayment();\n\n        return () => {\n            void deinitializePayment();\n        };\n    }, []);\n\n    return <></>;\n};\n\nexport default toResolvableComponent<PaymentMethodProps, PaymentMethodResolveId>(\n    BraintreeLocalPaymentMethod,\n    [{ gateway: 'braintreelocalmethods' }],\n);\n","import React, { type FunctionComponent } from 'react';\n\nimport { TranslatedHtml, TranslatedString } from '@bigcommerce/checkout/locale';\nimport { CheckboxFormField } from '@bigcommerce/checkout/ui';\n\nexport interface BoltCustomFormProps {\n    containerId: string;\n    showCreateAccountCheckbox: boolean;\n}\n\nconst agreementTranslationOptions = {\n    privacyPolicyUrl: 'https://www.bolt.com/privacy/',\n    termsUrl: 'https://www.bolt.com/end-user-terms/',\n};\n\nconst benefitsList = [\n    { id: 'payment.bolt_benefit_1' },\n    { id: 'payment.bolt_benefit_2' },\n    { id: 'payment.bolt_benefit_3' },\n];\n\nconst BoltCreateAccountCheckbox: FunctionComponent = () => {\n    const labelContent = (\n        <>\n            <TranslatedHtml\n                data={agreementTranslationOptions}\n                id=\"payment.bolt_checkbox_agreement\"\n            />\n            <ul>\n                {benefitsList.map(({ id }, key) => (\n                    <li key={key}>\n                        <TranslatedString id={id} />\n                    </li>\n                ))}\n            </ul>\n        </>\n    );\n\n    return (\n        <CheckboxFormField\n            additionalClassName=\"form-checkbox form-field--createAccount\"\n            labelContent={labelContent}\n            name=\"shouldCreateAccount\"\n        />\n    );\n};\n\nconst BoltCustomForm: FunctionComponent<BoltCustomFormProps> = ({\n    containerId,\n    showCreateAccountCheckbox,\n}) => {\n    return (\n        <div className=\"form-ccFields\">\n            <div className=\"form-field form-field--bolt-embed\" id={containerId} />\n            {showCreateAccountCheckbox ? <BoltCreateAccountCheckbox /> : null}\n        </div>\n    );\n};\n\nexport default BoltCustomForm;\n","import React, { type FunctionComponent, useCallback, useState } from 'react';\n\nimport { HostedWidgetPaymentComponent } from '@bigcommerce/checkout/hosted-widget-integration';\nimport {\n    isInstrumentCardCodeRequiredSelector,\n    isInstrumentCardNumberRequiredSelector,\n} from '@bigcommerce/checkout/instrument-utils';\nimport { type PaymentMethodProps } from '@bigcommerce/checkout/payment-integration-api';\n\nimport BoltCustomForm from './BoltCustomForm';\n\nconst BoltEmbeddedPaymentMethod: FunctionComponent<PaymentMethodProps> = ({\n    checkoutService,\n    checkoutState,\n    method,\n    paymentForm,\n    ...rest\n}) => {\n    const [showCreateAccountCheckbox, setShowCreateAccountCheckbox] = useState(false);\n\n    const boltEmbeddedContainerId = 'bolt-embedded';\n\n    const {\n        hidePaymentSubmitButton,\n        disableSubmit,\n        setFieldValue,\n        setSubmit,\n        setValidationSchema,\n    } = paymentForm;\n\n    const initializeBoltPayment = useCallback(\n        (options: any) =>\n            checkoutService.initializePayment({\n                ...options,\n                bolt: {\n                    containerId: boltEmbeddedContainerId,\n                    useBigCommerceCheckout: true,\n                    onPaymentSelect: (hasBoltAccount: boolean) => {\n                        setShowCreateAccountCheckbox(!hasBoltAccount);\n\n                        if (hasBoltAccount) {\n                            setFieldValue('shouldCreateAccount', false);\n                        }\n                    },\n                },\n            }),\n        [checkoutService, boltEmbeddedContainerId, setFieldValue],\n    );\n\n    const renderCustomPaymentForm = useCallback(\n        () => (\n            <BoltCustomForm\n                containerId={boltEmbeddedContainerId}\n                showCreateAccountCheckbox={showCreateAccountCheckbox}\n            />\n        ),\n        [boltEmbeddedContainerId, showCreateAccountCheckbox],\n    );\n\n    const { getInstruments, isPaymentDataRequired } = checkoutState.data;\n    const { isInitializingPayment, isLoadingInstruments } = checkoutState.statuses;\n    const instruments = getInstruments(method) || [];\n    const customer = checkoutState.data.getCustomer();\n    const isGuestCustomer = customer?.isGuest;\n    const isInstrumentFeatureAvailable =\n        !isGuestCustomer && Boolean(method.config.isVaultingEnabled);\n\n    return (\n        <HostedWidgetPaymentComponent\n            containerId=\"boltEmbeddedOneClick\"\n            deinitializePayment={checkoutService.deinitializePayment}\n            disableSubmit={disableSubmit}\n            hidePaymentSubmitButton={hidePaymentSubmitButton}\n            initializePayment={initializeBoltPayment}\n            instruments={instruments}\n            isInitializing={isInitializingPayment()}\n            isInstrumentCardCodeRequired={isInstrumentCardCodeRequiredSelector(checkoutState)}\n            isInstrumentCardNumberRequired={isInstrumentCardNumberRequiredSelector(checkoutState)}\n            isInstrumentFeatureAvailable={isInstrumentFeatureAvailable}\n            isLoadingInstruments={isLoadingInstruments()}\n            isPaymentDataRequired={isPaymentDataRequired()}\n            isSignedIn={!isGuestCustomer}\n            loadInstruments={checkoutService.loadInstruments}\n            method={method}\n            renderCustomPaymentForm={renderCustomPaymentForm}\n            setFieldValue={setFieldValue}\n            setSubmit={setSubmit}\n            setValidationSchema={setValidationSchema}\n            shouldRenderCustomInstrument\n            signOut={checkoutService.signOutCustomer}\n            {...rest}\n        />\n    );\n};\n\nexport default BoltEmbeddedPaymentMethod;\n","import { type LanguageService } from '@bigcommerce/checkout-sdk';\nimport { memoize } from '@bigcommerce/memoize';\nimport { object, type ObjectSchema, string } from 'yup';\n\nexport default memoize(function getPayByBankValidationSchema(\n    language: LanguageService,\n): ObjectSchema {\n    return object({\n        iban: string()\n            .matches(\n                /^[a-zA-Z0-9]+$/i,\n                language.translate(`address.invalid_characters_error`, { label: 'IBAN' }),\n            )\n            .required(language.translate('payment.pay_by_bank_iban_required')),\n    });\n});\n","import React, { type FunctionComponent, useCallback, useEffect } from 'react';\n\nimport {\n    type PaymentMethodProps,\n    type PaymentMethodResolveId,\n    toResolvableComponent,\n} from '@bigcommerce/checkout/payment-integration-api';\nimport { Fieldset, Legend } from '@bigcommerce/checkout/ui';\n\nimport { isBlueSnapDirectInitializationData } from './BlueSnapDirectInitializationData';\nimport BlueSnapDirectTextField from './fields/BlueSnapDirectTextField';\nimport getPayByBankValidationSchema from './validation-schemas/getPayByBankValidationSchema';\n\nconst BlueSnapDirectPayByBankPaymentMethod: FunctionComponent<PaymentMethodProps> = ({\n    method,\n    language,\n    paymentForm: { setValidationSchema },\n    checkoutService: { initializePayment, deinitializePayment },\n}) => {\n    if (!isBlueSnapDirectInitializationData(method.initializationData)) {\n        throw new Error('Unable to get initialization data');\n    }\n\n    const initializePayByBank = useCallback(async () => {\n        setValidationSchema(method, getPayByBankValidationSchema(language));\n\n        await initializePayment({\n            gatewayId: method.gateway,\n            methodId: method.id,\n        });\n    }, [initializePayment, language, method, setValidationSchema]);\n\n    const deinitializePayByBank = useCallback(async () => {\n        await deinitializePayment({\n            gatewayId: method.gateway,\n            methodId: method.id,\n        });\n    }, [deinitializePayment, method.gateway, method.id]);\n\n    useEffect(() => {\n        void initializePayByBank();\n\n        return () => {\n            void deinitializePayByBank();\n        };\n    }, [deinitializePayByBank, initializePayByBank]);\n\n    return (\n        <Fieldset\n            legend={\n                <Legend hidden>{language.translate('payment.bluesnap_direct_iban.label')}</Legend>\n            }\n            style={{ paddingBottom: '1rem' }}\n        >\n            <BlueSnapDirectTextField\n                autoComplete=\"iban\"\n                labelContent={language.translate('payment.bluesnap_direct_iban.label')}\n                name=\"iban\"\n                useFloatingLabel={true}\n            />\n        </Fieldset>\n    );\n};\n\nexport default toResolvableComponent<PaymentMethodProps, PaymentMethodResolveId>(\n    BlueSnapDirectPayByBankPaymentMethod,\n    [{ id: 'pay_by_bank', gateway: 'bluesnapdirect' }],\n);\n","export enum BluesnapECPAccountType {\n    ConsumerChecking = 'CONSUMER_CHECKING',\n    ConsumerSavings = 'CONSUMER_SAVINGS',\n    CorporateChecking = 'CORPORATE_CHECKING',\n    CorporateSavings = 'CORPORATE_SAVINGS',\n}\n","import { type FieldProps } from 'formik';\nimport React, { type FunctionComponent, memo, useCallback } from 'react';\n\nimport { DynamicFormFieldType, DynamicInput, FormField } from '@bigcommerce/checkout/ui';\n\nexport interface BlueSnapDirectNumberFieldProps {\n    labelContent: string;\n    maxLength?: number;\n    name: string;\n    useFloatingLabel?: boolean;\n}\n\nconst BlueSnapDirectNumberField: FunctionComponent<BlueSnapDirectNumberFieldProps> = ({\n    maxLength,\n    useFloatingLabel,\n    ...rest\n}) => {\n    const renderInput = useCallback(\n        ({ field }: FieldProps<string>) => (\n            <DynamicInput\n                {...field}\n                aria-labelledby={`${field.name}-label ${field.name}-field-error-message`}\n                autoComplete=\"cc-number\"\n                fieldType={DynamicFormFieldType.TELEPHONE}\n                id={field.name}\n                isFloatingLabelEnabled={useFloatingLabel}\n                maxLength={maxLength}\n            />\n        ),\n        [maxLength, useFloatingLabel],\n    );\n\n    return <FormField input={renderInput} {...rest} />;\n};\n\nexport default memo(BlueSnapDirectNumberField);\n","import { type LanguageService } from '@bigcommerce/checkout-sdk';\nimport React, { type FunctionComponent, memo } from 'react';\n\nimport { BluesnapECPAccountType } from '../constants';\n\nimport BlueSnapDirectNumberField from './BlueSnapDirectNumberField';\nimport BlueSnapDirectSelectField from './BlueSnapDirectSelectField';\nimport BlueSnapDirectTextField from './BlueSnapDirectTextField';\n\nexport interface BlueSnapDirectEcpFieldsetProps {\n    language: LanguageService;\n    useFloatingLabel?: boolean;\n    shouldRenderCompanyName: boolean;\n}\n\nconst BlueSnapDirectEcpFieldset: FunctionComponent<BlueSnapDirectEcpFieldsetProps> = ({\n    language,\n    useFloatingLabel,\n    shouldRenderCompanyName,\n}) => {\n    const options = {\n        helperLabel: language.translate('payment.bluesnap_direct_account_type_select.label'),\n        items: [\n            {\n                label: language.translate(\n                    'payment.bluesnap_direct_account_type_select.option_consumer_checking',\n                ),\n                value: BluesnapECPAccountType.ConsumerChecking,\n            },\n            {\n                label: language.translate(\n                    'payment.bluesnap_direct_account_type_select.option_consumer_savings',\n                ),\n                value: BluesnapECPAccountType.ConsumerSavings,\n            },\n            {\n                label: language.translate(\n                    'payment.bluesnap_direct_account_type_select.option_corporate_checking',\n                ),\n                value: BluesnapECPAccountType.CorporateChecking,\n            },\n            {\n                label: language.translate(\n                    'payment.bluesnap_direct_account_type_select.option_corporate_savings',\n                ),\n                value: BluesnapECPAccountType.CorporateSavings,\n            },\n        ],\n    };\n\n    return (\n        <>\n            <BlueSnapDirectNumberField\n                labelContent={language.translate('payment.bluesnap_direct_account_number.label')}\n                maxLength={17}\n                name=\"accountNumber\"\n                useFloatingLabel={useFloatingLabel}\n            />\n\n            <BlueSnapDirectNumberField\n                labelContent={language.translate('payment.bluesnap_direct_routing_number.label')}\n                maxLength={9}\n                name=\"routingNumber\"\n                useFloatingLabel={useFloatingLabel}\n            />\n\n            <BlueSnapDirectSelectField\n                labelContent={language.translate('payment.bluesnap_direct_account_type.label')}\n                name=\"accountType\"\n                options={options}\n                useFloatingLabel={useFloatingLabel}\n            />\n            {shouldRenderCompanyName && (\n                <BlueSnapDirectTextField\n                    labelContent={language.translate('address.company_name_label')}\n                    name=\"companyName\"\n                    useFloatingLabel={useFloatingLabel}\n                />\n            )}\n        </>\n    );\n};\n\nexport default memo(BlueSnapDirectEcpFieldset);\n","import { type AchInstrument, type PaymentMethod } from '@bigcommerce/checkout-sdk';\nimport { find } from 'lodash';\nimport { useCallback, useEffect, useMemo, useState } from 'react';\n\nimport { isAchInstrument } from '@bigcommerce/checkout/instrument-utils';\nimport { useCheckout, usePaymentFormContext } from '@bigcommerce/checkout/payment-integration-api';\n\nconst useEcpInstruments = (method: PaymentMethod) => {\n    const [currentInstrument, setCurrentInstrument] = useState<AchInstrument | undefined>();\n\n    const { checkoutState } = useCheckout();\n    const customer = checkoutState.data.getCustomer();\n    const instruments = checkoutState.data.getInstruments(method);\n\n    const { paymentForm } = usePaymentFormContext();\n    const { setFieldValue } = paymentForm;\n\n    const accountInstruments = useMemo(() => {\n        if (instruments) {\n            return instruments.filter(isAchInstrument);\n        }\n\n        return [];\n    }, [instruments]);\n    const isInstrumentFeatureAvailable =\n        !customer?.isGuest && Boolean(method.config.isVaultingEnabled);\n    const shouldShowInstrumentFieldset =\n        isInstrumentFeatureAvailable && accountInstruments.length > 0;\n    const shouldCreateNewInstrument = shouldShowInstrumentFieldset && !currentInstrument;\n\n    const getDefaultInstrument = useCallback((): AchInstrument | undefined => {\n        if (!accountInstruments.length) {\n            return;\n        }\n\n        const defaultAccountInstrument = accountInstruments.filter(\n            ({ defaultInstrument }) => defaultInstrument,\n        );\n\n        return defaultAccountInstrument[0] || accountInstruments[0];\n    }, [accountInstruments]);\n\n    useEffect(() => {\n        setCurrentInstrument(isInstrumentFeatureAvailable ? getDefaultInstrument() : undefined);\n    }, [isInstrumentFeatureAvailable, getDefaultInstrument]);\n\n    useEffect(() => {\n        if (!shouldShowInstrumentFieldset) {\n            setFieldValue('instrumentId', '');\n        }\n    }, [setFieldValue, shouldShowInstrumentFieldset]);\n\n    const handleSelectInstrument = useCallback(\n        (id: string) => {\n            setCurrentInstrument(find(accountInstruments, { bigpayToken: id }));\n            setFieldValue('instrumentId', id);\n            setFieldValue('shouldSetAsDefaultInstrument', false);\n        },\n        [accountInstruments, setFieldValue],\n    );\n\n    const handleUseNewInstrument = useCallback(() => {\n        setCurrentInstrument(undefined);\n        setFieldValue('instrumentId', '');\n        setFieldValue('shouldSaveInstrument', false);\n        setFieldValue('shouldSetAsDefaultInstrument', false);\n    }, [setFieldValue]);\n\n    return {\n        accountInstruments,\n        currentInstrument,\n        handleSelectInstrument,\n        handleUseNewInstrument,\n        isInstrumentFeatureAvailable,\n        shouldShowInstrumentFieldset,\n        shouldCreateNewInstrument,\n    };\n};\n\nexport default useEcpInstruments;\n","import { type LanguageService } from '@bigcommerce/checkout-sdk';\nimport { memoize } from '@bigcommerce/memoize';\nimport { object, type ObjectSchema, string } from 'yup';\n\nexport default memoize(function getEcpValidationSchema(\n    language: LanguageService,\n    shouldRenderFields: boolean,\n    shouldRenderCompanyName: boolean,\n): ObjectSchema {\n    const schema = {\n        ...(!shouldRenderFields ? { instrumentId: string().required() } : {}),\n        ...(shouldRenderFields\n            ? {\n                  accountNumber: string()\n                      .required(\n                          language.translate('payment.bluesnap_direct_account_number.is_required'),\n                      )\n                      .matches(\n                          /^\\d+$/,\n                          language.translate('payment.bluesnap_direct_account_number.only_numbers'),\n                      )\n                      .min(4, language.translate('payment.bluesnap_direct_account_number.length'))\n                      .max(\n                          17,\n                          language.translate('payment.bluesnap_direct_account_number.length_max'),\n                      ),\n                  routingNumber: string()\n                      .required(\n                          language.translate('payment.bluesnap_direct_routing_number.is_required'),\n                      )\n                      .matches(\n                          /^\\d+$/,\n                          language.translate('payment.bluesnap_direct_routing_number.only_numbers'),\n                      )\n                      .length(\n                          9,\n                          language.translate('payment.bluesnap_direct_routing_number.length'),\n                      ),\n                  ...(shouldRenderCompanyName\n                      ? {\n                            companyName: string()\n                                .required(language.translate('address.company_name_required_error'))\n                                .max(\n                                    50,\n                                    language.translate(\n                                        'payment.bluesnap_direct_company_name.length_max',\n                                    ),\n                                ),\n                        }\n                      : {}),\n                  accountType: string().required(\n                      language.translate('payment.bluesnap_direct_account_type.is_required'),\n                  ),\n              }\n            : {}),\n    };\n\n    return object(schema);\n});\n","import React, { type FunctionComponent, useCallback, useEffect, useState } from 'react';\n\nimport {\n    AccountInstrumentFieldset,\n    StoreInstrumentFieldset,\n} from '@bigcommerce/checkout/instrument-utils';\nimport {\n    type PaymentMethodProps,\n    type PaymentMethodResolveId,\n    toResolvableComponent,\n} from '@bigcommerce/checkout/payment-integration-api';\nimport { CheckboxFormField, Fieldset, Legend, LoadingOverlay } from '@bigcommerce/checkout/ui';\n\nimport { BluesnapECPAccountType } from './constants';\nimport BlueSnapDirectEcpFieldset from './fields/BlueSnapDirectEcpFieldset';\nimport useEcpInstruments from './hooks/useEcpInstruments';\nimport getEcpValidationSchema from './validation-schemas/getEcpValidationSchema';\n\nconst BlueSnapDirectEcpPaymentMethod: FunctionComponent<PaymentMethodProps> = ({\n    method,\n    checkoutService: { initializePayment, deinitializePayment, loadInstruments },\n    checkoutState: {\n        data: { isPaymentDataRequired, getCustomer, getBillingAddress },\n        statuses: { isLoadingInstruments },\n    },\n    paymentForm: { disableSubmit, setValidationSchema, setFieldValue, getFormValues },\n    language,\n    onUnhandledError,\n}) => {\n    const [disabled, setDisabled] = useState(true);\n    const onChange = useCallback(\n        (shopperPermission: boolean) => setDisabled(!shopperPermission),\n        [setDisabled],\n    );\n\n    useEffect(\n        () => disableSubmit(method, isPaymentDataRequired() && disabled),\n        [disableSubmit, disabled, isPaymentDataRequired, method],\n    );\n\n    const initializeEcp = useCallback(async () => {\n        await initializePayment({\n            gatewayId: method.gateway,\n            methodId: method.id,\n        });\n    }, [initializePayment, method]);\n\n    const deinitializeEcp = useCallback(async () => {\n        await deinitializePayment({\n            gatewayId: method.gateway,\n            methodId: method.id,\n        });\n    }, [deinitializePayment, method.gateway, method.id]);\n\n    useEffect(() => {\n        void initializeEcp();\n\n        return () => {\n            void deinitializeEcp();\n        };\n    }, [deinitializeEcp, initializeEcp]);\n\n    useEffect(() => {\n        const loadInstrumentsOrThrow = async () => {\n            try {\n                await loadInstruments();\n            } catch (error) {\n                if (error instanceof Error) {\n                    onUnhandledError(error);\n                }\n            }\n        };\n\n        const { isGuest } = getCustomer() || {};\n\n        const shouldLoadInstruments = !isGuest && method.config.isVaultingEnabled;\n\n        if (shouldLoadInstruments) {\n            void loadInstrumentsOrThrow();\n        }\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, []);\n\n    const {\n        accountInstruments,\n        currentInstrument,\n        handleSelectInstrument,\n        handleUseNewInstrument,\n        isInstrumentFeatureAvailable,\n        shouldShowInstrumentFieldset,\n        shouldCreateNewInstrument,\n    } = useEcpInstruments(method);\n\n    const isLoading = isLoadingInstruments();\n\n    const shouldShowForm = !shouldShowInstrumentFieldset || shouldCreateNewInstrument;\n    const accountType = getFormValues().accountType;\n    const shouldRenderCompanyName =\n        accountType === BluesnapECPAccountType.CorporateChecking ||\n        accountType === BluesnapECPAccountType.CorporateSavings;\n\n    useEffect(() => {\n        if (shouldRenderCompanyName) {\n            setFieldValue('companyName', getBillingAddress()?.company);\n        } else {\n            setFieldValue('companyName', undefined);\n        }\n    }, [shouldRenderCompanyName, setFieldValue, getBillingAddress]);\n\n    useEffect(() => {\n        setValidationSchema(\n            method,\n            getEcpValidationSchema(language, shouldShowForm, shouldRenderCompanyName),\n        );\n    }, [language, shouldShowForm, shouldRenderCompanyName, setValidationSchema, method]);\n\n    return (\n        <LoadingOverlay hideContentWhenLoading isLoading={isLoading}>\n            <Fieldset\n                legend={\n                    <Legend hidden>\n                        {language.translate('payment.bluesnap_direct_electronic_check_label')}\n                    </Legend>\n                }\n                style={{ paddingBottom: '1rem' }}\n            >\n                {shouldShowInstrumentFieldset && (\n                    <div className=\"checkout-ach-form__instrument\">\n                        <AccountInstrumentFieldset\n                            instruments={accountInstruments}\n                            onSelectInstrument={handleSelectInstrument}\n                            onUseNewInstrument={handleUseNewInstrument}\n                            selectedInstrument={currentInstrument}\n                        />\n                    </div>\n                )}\n                {shouldShowForm && (\n                    <BlueSnapDirectEcpFieldset\n                        language={language}\n                        shouldRenderCompanyName={shouldRenderCompanyName}\n                    />\n                )}\n                <CheckboxFormField\n                    labelContent={language.translate('payment.bluesnap_direct_permission')}\n                    name=\"shopperPermission\"\n                    onChange={onChange}\n                />\n                {isInstrumentFeatureAvailable && (\n                    <StoreInstrumentFieldset\n                        instrumentId={currentInstrument?.bigpayToken}\n                        instruments={accountInstruments}\n                        isAccountInstrument\n                    />\n                )}\n            </Fieldset>\n        </LoadingOverlay>\n    );\n};\n\nexport default toResolvableComponent<PaymentMethodProps, PaymentMethodResolveId>(\n    BlueSnapDirectEcpPaymentMethod,\n    [{ id: 'ecp', gateway: 'bluesnapdirect' }],\n);\n","import { memoizeOne } from '@bigcommerce/memoize';\nimport { noop } from 'lodash';\nimport React, { type ReactNode, useState } from 'react';\n\nimport AccordionContext from './AccordionContext';\n\nexport interface AccordionProps {\n    children?: ReactNode;\n    className?: string;\n    defaultSelectedItemId?: string;\n    isDisabled?: boolean;\n    onSelect?(id: string): void;\n}\n\nconst Accordion = ({\n    children,\n    className = 'accordion',\n    defaultSelectedItemId,\n    isDisabled,\n    onSelect = noop,\n}: AccordionProps) => {\n    const [selectedItemId, setSelectedItemId] = useState<string | undefined>(defaultSelectedItemId);\n\n    const handleToggleItem: (id: string) => void = (id) => {\n        if (isDisabled) {\n            return;\n        }\n\n        setSelectedItemId(id);\n        onSelect(id);\n    };\n\n    const getContextValue = memoizeOne((newSelectedItemId?: string) => {\n        return {\n            onToggle: handleToggleItem,\n            selectedItemId: newSelectedItemId,\n        };\n    });\n\n    return (\n        <AccordionContext.Provider value={getContextValue(selectedItemId)}>\n            <ul className={className}>{children}</ul>\n        </AccordionContext.Provider>\n    );\n};\n\nexport default Accordion;\n","import { noop } from 'lodash';\nimport React, {\n    createContext,\n    type FunctionComponent,\n    memo,\n    type ReactNode,\n    useCallback,\n    useEffect,\n    useMemo,\n} from 'react';\n\nimport { Accordion } from '@bigcommerce/checkout/ui';\n\nimport { connectFormik, type ConnectFormikProps } from '../../common/form';\n\nexport interface ChecklistProps {\n    children?: ReactNode;\n    defaultSelectedItemId?: string;\n    isDisabled?: boolean;\n    name: string;\n    onSelect?(value: string): void;\n}\n\nexport interface ChecklistContextProps {\n    name: string;\n}\n\nexport const ChecklistContext = createContext<ChecklistContextProps | undefined>(undefined);\n\nconst Checklist: FunctionComponent<\n    ChecklistProps & ConnectFormikProps<{ [key: string]: string }>\n> = ({ formik: { setFieldValue }, name, onSelect = noop, ...props }) => {\n    useEffect(() => {\n        return () => {\n            setFieldValue(name, '');\n        };\n    }, []);\n\n    const handleSelect = useCallback(\n        (value: string) => {\n            setFieldValue(name, value);\n            onSelect(value);\n        },\n        [name, onSelect, setFieldValue],\n    );\n\n    const contextValue = useMemo(() => ({ name }), [name]);\n\n    return (\n        <ChecklistContext.Provider value={contextValue}>\n            <Accordion\n                {...props}\n                className=\"form-checklist optimizedCheckout-form-checklist\"\n                onSelect={handleSelect}\n            />\n        </ChecklistContext.Provider>\n    );\n};\n\nexport default connectFormik(memo(Checklist));\n","import React, { type FunctionComponent } from 'react';\n\nimport {\n    type PaymentMethodProps,\n    type PaymentMethodResolveId,\n    toResolvableComponent,\n} from '@bigcommerce/checkout/payment-integration-api';\nimport { HostedPaymentComponent } from '@bigcommerce/checkout/hosted-payment-integration';\n\nconst BraintreeVenmoPaymentMethod: FunctionComponent<PaymentMethodProps> = ({\n    checkoutService,\n    checkoutState,\n    language,\n    method,\n    paymentForm,\n}) => {\n    return (\n        <HostedPaymentComponent\n            checkoutService={checkoutService}\n            checkoutState={checkoutState}\n            deinitializePayment={checkoutService.deinitializePayment}\n            initializePayment={checkoutService.initializePayment}\n            language={language}\n            method={method}\n            paymentForm={paymentForm}\n        />\n    );\n};\n\nexport default toResolvableComponent<PaymentMethodProps, PaymentMethodResolveId>(\n    BraintreeVenmoPaymentMethod,\n    [{ id: 'braintreevenmo' }],\n);\n","import classNames from 'classnames';\nimport React, { forwardRef, type Ref, type TextareaHTMLAttributes } from 'react';\n\nexport interface TextAreaProps extends TextareaHTMLAttributes<HTMLTextAreaElement> {\n    additionalClassName?: string;\n    testId?: string;\n    isFloatingLabelEnabled?: boolean;\n}\n\nconst TextArea = forwardRef(\n    (\n        { additionalClassName, testId, className, isFloatingLabelEnabled, ...rest }: TextAreaProps,\n        ref: Ref<HTMLTextAreaElement>,\n    ) => {\n        return (\n            <textarea\n                {...rest}\n                className={\n                    className ||\n                    classNames(\n                        { 'floating-textarea': isFloatingLabelEnabled },\n                        'form-input',\n                        'optimizedCheckout-form-input',\n                        additionalClassName,\n                    )\n                }\n                data-test={testId}\n                ref={ref}\n            />\n        );\n    },\n);\n\nexport default TextArea;\n","import React, { type FunctionComponent, type ReactNode, useCallback } from 'react';\n\nimport { preventDefault } from '@bigcommerce/checkout/dom-utils';\nimport { TranslatedString } from '@bigcommerce/checkout/locale';\n\nimport { Button, ButtonSize } from '../button';\n\nimport Modal from './Modal';\nimport './ModalLink.scss';\nimport ModalTrigger, { type ModalTriggerModalProps } from './ModalTrigger';\n\nexport interface ModalLinkProps {\n    header: ReactNode;\n    body: ReactNode;\n    children?: ReactNode;\n}\n\nconst ModalLink: FunctionComponent<ModalLinkProps> = ({ children, body, header }) => {\n    const renderModal = useCallback(\n        (props: ModalTriggerModalProps) => (\n            <Modal\n                {...props}\n                additionalBodyClassName=\"modal--withText\"\n                footer={\n                    <Button onClick={props.onRequestClose} size={ButtonSize.Small}>\n                        <TranslatedString id=\"common.ok_action\" />\n                    </Button>\n                }\n                header={header}\n                shouldShowCloseButton={true}\n            >\n                {body}\n            </Modal>\n        ),\n        [header, body],\n    );\n\n    return (\n        <ModalTrigger modal={renderModal}>\n            { }\n            {({ onClick }) => <a onClick={preventDefault(onClick)}>{children}</a>}\n        </ModalTrigger>\n    );\n};\n\nexport default ModalLink;\n","import React, { Fragment, type FunctionComponent } from 'react';\n\nconst MultiLineText: FunctionComponent<{ children: string }> = ({ children }) => (\n    <>\n        {children.split('\\n').map((line, key) => (\n            <Fragment key={key}>\n                {line}\n                <br />\n            </Fragment>\n        ))}\n    </>\n);\n\nexport default MultiLineText;\n","import { type FieldProps } from 'formik';\nimport React, { type FunctionComponent, memo, useCallback, useMemo } from 'react';\n\nimport { parseAnchor } from '@bigcommerce/checkout/dom-utils';\nimport { TranslatedHtml, TranslatedString, withLanguage, type WithLanguageProps } from '@bigcommerce/checkout/locale';\n\nimport { CheckboxFormField, Fieldset, FormField, Legend, TextArea } from '../ui/form';\nimport { ModalHeader, ModalLink } from '../ui/modal';\nimport { MultiLineText } from '../ui/text';\n\nexport enum TermsConditionsType {\n    Link = 'link',\n    TextArea = 'textarea',\n    Modal = 'modal',\n}\n\nexport type TermsConditionsFieldProps =\n    | TermsConditionsLinkFieldProps\n    | TermsConditionsTextAreaFieldProps;\n\ninterface TermsConditionsLinkFieldProps {\n    name: string;\n    type: TermsConditionsType.Link;\n    url: string;\n}\n\ninterface TermsConditionsTextAreaFieldProps {\n    name: string;\n    terms: string;\n    type: TermsConditionsType.TextArea | TermsConditionsType.Modal;\n}\n\ninterface TermsConditionsTextFieldProps {\n    name: string;\n    terms: string;\n}\n\nconst BaseTermsConditionsModalCheckboxField: FunctionComponent<\n    TermsConditionsTextFieldProps & WithLanguageProps\n> = ({ language, name, terms }) => {\n    const translatedLabel = language.translate('terms_and_conditions.agreement_with_link_text', {\n        url: '',\n    });\n    const parsedLabel = parseAnchor(translatedLabel);\n\n    const labelContent = parsedLabel ? (\n        <>\n            {parsedLabel[0]}\n            <ModalLink\n                body={<MultiLineText>{terms}</MultiLineText>}\n                header={\n                    <ModalHeader>\n                        <TranslatedString id=\"terms_and_conditions.heading\" />\n                    </ModalHeader>\n                }\n            >\n                {parsedLabel[1]}\n            </ModalLink>\n            {parsedLabel[2]}\n        </>\n    ) : (\n        translatedLabel\n    );\n\n    return <CheckboxFormField labelContent={labelContent} name={name} />;\n};\n\nconst TermsConditionsModalCheckboxField = withLanguage(BaseTermsConditionsModalCheckboxField);\n\ninterface TermsConditionsCheckboxFieldProps {\n    name: string;\n    type: TermsConditionsType;\n    url?: string;\n}\n\nconst TermsConditionsCheckboxField: FunctionComponent<TermsConditionsCheckboxFieldProps> = ({\n    name,\n    url,\n}) => {\n    const labelContent = useMemo(\n        () =>\n            url ? (\n                <TranslatedHtml data={{ url }} id=\"terms_and_conditions.agreement_with_link_text\" />\n            ) : (\n                <TranslatedString id=\"terms_and_conditions.agreement_text\" />\n            ),\n        [url],\n    );\n\n    return <CheckboxFormField labelContent={labelContent} name={name} />;\n};\n\nconst TermsConditionsTextField: FunctionComponent<TermsConditionsTextFieldProps> = ({\n    name,\n    terms,\n}) => {\n    const renderInput = useCallback(\n        ({ field }: FieldProps) => <TextArea defaultValue={terms} name={field.name} readOnly />,\n        [terms],\n    );\n\n    return <FormField input={renderInput} name={`${name}Text`} />;\n};\n\nconst TermsConditionsFieldset: FunctionComponent<TermsConditionsFieldProps> = (props) => {\n    const { type } = props;\n\n    return (\n        <Fieldset\n            additionalClassName=\"checkout-terms\"\n            legend={\n                <Legend>\n                    <TranslatedString id=\"terms_and_conditions.terms_and_conditions_heading\" />\n                </Legend>\n            }\n        >\n            {isTermsConditionsTextArea(props) && <TermsConditionsTextField {...props} />}\n            {isTermsConditionModal(props) && type === TermsConditionsType.Modal ? (\n                <TermsConditionsModalCheckboxField {...props} />\n            ) : (\n                <TermsConditionsCheckboxField {...props} />\n            )}\n        </Fieldset>\n    );\n};\n\nfunction isTermsConditionsTextArea(props: any): props is TermsConditionsTextFieldProps {\n    return props.type === TermsConditionsType.TextArea;\n}\n\nfunction isTermsConditionModal(props: any): props is TermsConditionsTextFieldProps {\n    return props.type === TermsConditionsType.Modal;\n}\n\nexport default memo(TermsConditionsFieldset);\n","import { type TranslationData } from '@bigcommerce/checkout-sdk';\nimport { includes } from 'lodash';\n\nexport default function mapSubmitOrderErrorMessage(\n    error: any,\n    translate: (key: string, data?: TranslationData) => string,\n    shouldLocalise: boolean,\n): string {\n    switch (error.type) {\n        case 'not_initialized':\n            return translate('payment.payment_error');\n\n        case 'custom_provider_execute_error':\n            return translate(error.subtype);\n\n        case 'payment_cancelled':\n            return translate('payment.payment_cancelled');\n\n        case 'payment_method_invalid':\n            return translate('payment.payment_method_disabled_error');\n\n        case 'tax_provider_unavailable':\n            return translate('payment.tax_provider_unavailable');\n\n        case 'cart_changed':\n            return translate('shipping.cart_change_error');\n\n        case 'cart_consistency':\n            return translate('cart.consistency_error');\n\n        default:\n            if (\n                includes(\n                    [\n                        'order_could_not_be_finalized_error',\n                        'provider_fatal_error',\n                        'payment_invalid',\n                        'provider_error',\n                        'provider_widget_error',\n                        'user_payment_error',\n                    ],\n                    error.body && error.body.type,\n                )\n            ) {\n                return translate('payment.payment_method_error', { message: error.message });\n            }\n\n            if (shouldLocalise && error.body && error.body.errors && error.body.errors.length) {\n                const messages = error.body.errors.map((err: { code: any }) =>\n                    translate(`payment.errors.${err.code}`),\n                );\n\n                return messages.join(' ');\n            }\n\n            if (error.message) {\n                return error.message;\n            }\n\n            return error.type === 'unrecoverable'\n                ? translate('common.unavailable_error')\n                : translate('payment.place_order_error');\n    }\n}\n\nexport function mapSubmitOrderErrorTitle(\n    error: any,\n    translate: (key: string, data?: TranslationData) => string,\n): string {\n    if (error.type === 'unrecoverable') {\n        return translate('common.unavailable_heading');\n    }\n\n    if (error.type === 'missing_shipping_method') {\n        return translate('common.missing_shipping_method_heading');\n    }\n\n    if (error.type === 'invalid_shipping_address') {\n        return translate('common.invalid_shipping_address');\n    }\n\n    return translate('common.error_heading');\n}\n","export interface ExpiryDate {\n    month: string;\n    year: string;\n}\n\nexport default function unformatCreditCardExpiryDate(value: string): ExpiryDate {\n    const separator = '/';\n    const [month = '', year = ''] = value.split(new RegExp(`\\\\s*${separator}\\\\s*`));\n\n    if (!/^\\d+$/.test(month) || !/^\\d+$/.test(year)) {\n        return { month: '', year: '' };\n    }\n\n    return {\n        month: month.length === 1 ? `0${month}` : month.slice(0, 2),\n        year: year.length === 2 ? `20${year}` : year.slice(0, 4),\n    };\n}\n","import { compact } from 'lodash';\n\nexport default function getUniquePaymentMethodId(methodId: string, gatewayId?: string): string {\n    return compact([gatewayId, methodId]).join('-');\n}\n\nexport function parseUniquePaymentMethodId(value: string): {\n    methodId: string;\n    gatewayId?: string;\n} {\n    const [gatewayId, methodId] = value.includes('-') ? value.split('-') : [undefined, value];\n\n    return { gatewayId, methodId };\n}\n","import { type CardInstrumentFieldsetValues } from '../storedInstrument';\n\nexport default interface CreditCardFieldsetValues {\n    ccCustomerCode?: string;\n    ccCvv?: string;\n    ccExpiry: string;\n    ccName: string;\n    ccNumber: string;\n    shouldSaveInstrument?: boolean;\n}\n\nexport interface CreditCardValidationValues extends CardInstrumentFieldsetValues {\n    ccCvv?: string;\n    ccNumber?: string;\n}\n\nexport function hasCreditCardNumber(values: unknown): values is { ccNumber: string } {\n    if (!(values instanceof Object)) {\n        return false;\n    }\n\n    return 'ccNumber' in values;\n}\n\nexport function hasCreditCardExpiry(values: unknown): values is { ccExpiry: string } {\n    if (!(values instanceof Object)) {\n        return false;\n    }\n\n    return 'ccExpiry' in values;\n}\n","import React, { type FunctionComponent } from 'react';\n\nimport TermsConditionsField, { TermsConditionsType } from './TermsConditionsField';\n\nexport interface TermsConditionsProps {\n    termsConditionsText?: string;\n    termsConditionsUrl?: string;\n}\n\nexport const TermsConditions: FunctionComponent<TermsConditionsProps> = ({\n    termsConditionsUrl,\n    termsConditionsText = '',\n}) => (\n    <>\n        {termsConditionsUrl ? (\n            <TermsConditionsField\n                name=\"terms\"\n                type={TermsConditionsType.Link}\n                url={termsConditionsUrl}\n            />\n        ) : (\n            <TermsConditionsField\n                name=\"terms\"\n                terms={termsConditionsText}\n                type={TermsConditionsType.TextArea}\n            />\n        )}\n    </>\n);\n","import { type LanguageService } from '@bigcommerce/checkout-sdk';\nimport { object, type ObjectSchema, string, type StringSchema } from 'yup';\n\nimport { type PaymentFormValues } from '@bigcommerce/checkout/payment-integration-api';\n\nimport { getTermsConditionsValidationSchema } from '../termsConditions';\n\nexport interface PaymentValidationSchemaOptions {\n    additionalValidation?: ObjectSchema<Partial<PaymentFormValues>>;\n    isTermsConditionsRequired: boolean;\n    language: LanguageService;\n}\n\nexport default function getPaymentValidationSchema({\n    additionalValidation,\n    isTermsConditionsRequired,\n    language,\n}: PaymentValidationSchemaOptions): ObjectSchema<PaymentFormValues> {\n    const schemaFields: {\n        paymentProviderRadio: StringSchema;\n    } = {\n        paymentProviderRadio: string().required(),\n    };\n\n    const schemaFieldsWithTerms = object(schemaFields).concat(\n        getTermsConditionsValidationSchema({ isTermsConditionsRequired, language }),\n    );\n\n    return additionalValidation\n        ? schemaFieldsWithTerms.concat(additionalValidation as any)\n        : schemaFieldsWithTerms;\n}\n","import { type LanguageService } from '@bigcommerce/checkout-sdk';\nimport { boolean, type BooleanSchema, object, type ObjectSchema } from 'yup';\n\nexport interface TermsConditionValidationSchemaOptions {\n    isTermsConditionsRequired: boolean;\n    language: LanguageService;\n}\n\nexport default function getTermsConditionsValidationSchema({\n    isTermsConditionsRequired,\n    language,\n}: TermsConditionValidationSchemaOptions): ObjectSchema<{ terms?: boolean }> {\n    const schemaFields: {\n        terms?: BooleanSchema;\n    } = {};\n\n    if (isTermsConditionsRequired) {\n        schemaFields.terms = boolean().oneOf(\n            [true],\n            language.translate('terms_and_conditions.agreement_required_error'),\n        );\n    }\n\n    return object(schemaFields);\n}\n","import React, { type FunctionComponent, memo, type ReactNode } from 'react';\n\nexport interface CustomChecklistItemProps {\n    content?: ReactNode;\n    htmlId?: string;\n}\n\nconst CustomChecklistItem: FunctionComponent<CustomChecklistItemProps> = ({\n    content,\n    htmlId,\n}) => {\n    return (\n        <li\n            className=\"form-checklist-item optimizedCheckout-form-checklist-item custom-checklist-item\"\n            id={htmlId}\n        >\n            {content}\n        </li>\n    );\n};\n\nexport default memo(CustomChecklistItem);\n","import React, { FunctionComponent, useEffect } from 'react';\n\nimport { PaymentMethodId, useCheckout } from '@bigcommerce/checkout/payment-integration-api';\n\nconst BigCommercePaymentsPayLaterBanner: FunctionComponent<{\n    onUnhandledError?(error: Error): void\n}> = ({ onUnhandledError }) => {\n    const { checkoutService } = useCheckout();\n\n    useEffect(() => {\n        try {\n            void checkoutService.initializePayment({\n                methodId: PaymentMethodId.BigCommercePaymentsPayLater,\n                bigcommerce_payments_paylater: {\n                    bannerContainerId: 'bigcommerce-payments-banner-container',\n                },\n            });\n\n            void checkoutService.deinitializePayment({\n                methodId: PaymentMethodId.BigCommercePaymentsPayLater,\n            });\n        } catch (error) {\n            if (error instanceof Error) {\n                onUnhandledError?.(error);\n            }\n        }\n    }, []);\n\n    return (\n        <div\n            data-test='bigcommerce-payments-banner-container'\n            id='bigcommerce-payments-banner-container'\n        />\n    );\n};\n\nexport default BigCommercePaymentsPayLaterBanner;\n","import React, { type FunctionComponent, useEffect } from 'react';\n\nimport { useCheckout } from '@bigcommerce/checkout/payment-integration-api';\n\ninterface BraintreePaypalCreditBannerProps {\n    methodId: string;\n    containerId: string;\n    onUnhandledError?(error: Error): void;\n}\n\nconst BraintreePaypalCreditBanner: FunctionComponent<BraintreePaypalCreditBannerProps> = ({\n    methodId,\n    containerId,\n    onUnhandledError,\n}) => {\n    const { checkoutService } = useCheckout();\n\n    useEffect(() => {\n        try {\n            void checkoutService.initializePayment({\n                methodId,\n                braintree: {\n                    bannerContainerId: containerId,\n                },\n            });\n\n            void checkoutService.deinitializePayment({\n                methodId,\n            });\n        } catch (error) {\n            if (error instanceof Error) {\n                onUnhandledError?.(error);\n            }\n        }\n\n        return () => {\n            try {\n                void checkoutService.deinitializePayment({\n                    methodId,\n                });\n            } catch (error) {\n                if (error instanceof Error) {\n                    onUnhandledError?.(error);\n                }\n            }\n        };\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, []);\n\n    return <div data-test={containerId} id={containerId} />;\n};\n\nexport default BraintreePaypalCreditBanner;\n","import React, { type FunctionComponent, useEffect } from 'react';\n\nimport { useCheckout } from '@bigcommerce/checkout/payment-integration-api';\n\nconst PaypalCommerceCreditBanner: FunctionComponent<{\n    methodId: string;\n    containerId: string;\n    onUnhandledError?(error: Error): void;\n}> = ({ methodId, containerId, onUnhandledError }) => {\n    const { checkoutService } = useCheckout();\n\n    useEffect(() => {\n        try {\n            void checkoutService.initializePayment({\n                methodId,\n                [methodId]: {\n                    bannerContainerId: containerId,\n                },\n            });\n\n            void checkoutService.deinitializePayment({\n                methodId,\n            });\n        } catch (error) {\n            if (error instanceof Error) {\n                onUnhandledError?.(error);\n            }\n        }\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, []);\n\n    return <div data-test={containerId} id={containerId} />;\n};\n\nexport default PaypalCommerceCreditBanner;\n","import classNames from 'classnames';\nimport React, { type FunctionComponent, memo } from 'react';\n\nimport { CreditCardIcon, filterInstrumentTypes } from './';\n\nexport interface CreditCardIconListProps {\n    selectedCardType?: string;\n    cardTypes: string[];\n}\n\nconst CreditCardIconList: FunctionComponent<CreditCardIconListProps> = ({\n    selectedCardType,\n    cardTypes,\n}) => {\n    const filteredCardTypes = filterInstrumentTypes(cardTypes);\n\n    if (!filteredCardTypes.length) {\n        return null;\n    }\n\n    return (\n        <ul className=\"creditCardTypes-list\">\n            {filteredCardTypes.map((type) => (\n                <li\n                    className={classNames(\n                        'creditCardTypes-list-item',\n                        { 'is-active': selectedCardType === type },\n                        { 'not-active': selectedCardType && selectedCardType !== type },\n                    )}\n                    data-test={`${type}-icon`}\n                    key={type}\n                >\n                    <span className=\"cardIcon\">\n                        <CreditCardIcon cardType={type} />\n                    </span>\n                </li>\n            ))}\n        </ul>\n    );\n};\n\nexport default memo(CreditCardIconList);\n","import { type CardInstrument, type CheckoutSettings, type LanguageService, type PaymentMethod } from '@bigcommerce/checkout-sdk';\nimport { number } from 'card-validator';\nimport classNames from 'classnames';\nimport { compact } from 'lodash';\nimport React, { type FunctionComponent, memo, type ReactNode } from 'react';\n\nimport { BigCommercePaymentsPayLaterBanner } from '@bigcommerce/checkout/bigcommerce-payments-utils'\nimport { withLanguage, type WithLanguageProps } from '@bigcommerce/checkout/locale';\nimport { type CheckoutContextProps , type PaymentFormValues } from '@bigcommerce/checkout/payment-integration-api';\nimport { BraintreePaypalCreditBanner, PaypalCommerceCreditBanner } from '@bigcommerce/checkout/paypal-utils';\nimport { CreditCardIconList, mapFromPaymentMethodCardType, useThemeContext } from '@bigcommerce/checkout/ui';\n\nimport { withCheckout } from '../../checkout';\nimport { connectFormik, type ConnectFormikProps } from '../../common/form';\nimport { isExperimentEnabled } from '../../common/utility';\n\nimport { hasCreditCardNumber } from './CreditCardFieldsetValues';\nimport getPaymentMethodDisplayName from './getPaymentMethodDisplayName';\nimport getPaymentMethodName from './getPaymentMethodName';\nimport { isHostedCreditCardFieldsetValues } from './HostedCreditCardFieldsetValues';\nimport PaymentMethodId from './PaymentMethodId';\nimport PaymentMethodType from './PaymentMethodType';\n\nexport interface PaymentMethodTitleProps {\n    method: PaymentMethod;\n    isSelected?: boolean;\n    onUnhandledError?(error: Error): void;\n}\n\ninterface WithPaymentTitleProps {\n    instruments: CardInstrument[];\n    checkoutSettings: CheckoutSettings;\n    storeCountryCode: string;\n    cdnBasePath: string;\n}\n\ninterface PaymentMethodSubtitleProps {\n    onUnhandledError?(error: Error): void;\n    methodId: string;\n}\n\ntype SubtitleType = ReactNode | ((subtitleProps?: PaymentMethodSubtitleProps) => ReactNode);\n\nexport function getPaymentMethodTitle(\n    language: LanguageService,\n    basePath: string,\n    checkoutSettings: CheckoutSettings,\n    storeCountryCode: string,\n): (method: PaymentMethod) => {\n    logoUrl: string;\n    titleText: string,\n    subtitle?: SubtitleType\n} {\n    const cdnPath = (path: string) => `${basePath}${path}`;\n\n    return (method) => {\n        const paymentWithLogo = method.initializationData?.methodsWithLogo\n            ? method.initializationData.methodsWithLogo\n            : [];\n        const methodName = getPaymentMethodName(language)(method);\n        const methodDisplayName = getPaymentMethodDisplayName(language)(method);\n        // TODO: API could provide the data below so UI can read simply read it.\n        // However, I'm not sure how we deal with translation yet. TBC.\n        const customTitles: { [key: string]: { logoUrl: string; titleText: string, subtitle?: ReactNode | ((props: any) => ReactNode) } } = {\n            [PaymentMethodType.CreditCard]: {\n                logoUrl: '',\n                titleText: methodName,\n            },\n            [PaymentMethodId.BraintreeVenmo]: {\n                logoUrl: method.logoUrl || '',\n                titleText: method.logoUrl ? '' : methodDisplayName,\n            },\n            [PaymentMethodId.BraintreePaypalCredit]: {\n                logoUrl: cdnPath('/img/payment-providers/paypal_commerce_logo_letter.svg'),\n                titleText: methodDisplayName,\n                subtitle: (props: PaymentMethodSubtitleProps): ReactNode => (\n                    <BraintreePaypalCreditBanner containerId='braintree-credit-banner-container' {...props} />\n                ),\n            },\n            [PaymentMethodType.PaypalCredit]: {\n                logoUrl: cdnPath('/img/payment-providers/paypal_commerce_logo_letter.svg'),\n                titleText: methodDisplayName,\n            },\n            [PaymentMethodId.BraintreeAch]: {\n                logoUrl: method.logoUrl || '',\n                titleText: methodDisplayName,\n            },\n            [PaymentMethodId.BraintreeLocalPaymentMethod]: {\n                logoUrl: method.logoUrl || '',\n                titleText: methodDisplayName,\n            },\n            [PaymentMethodId.BigCommercePaymentsPayPal]: {\n                logoUrl: cdnPath('/img/payment-providers/paypal_commerce_logo.svg'),\n                titleText: '',\n                subtitle: (props: PaymentMethodSubtitleProps) => <BigCommercePaymentsPayLaterBanner {...props} />\n            },\n            [PaymentMethodId.BigCommercePaymentsPayLater]: {\n                logoUrl: cdnPath('/img/payment-providers/paypal_commerce_logo_letter.svg'),\n                titleText: methodDisplayName,\n                subtitle: (props: PaymentMethodSubtitleProps) => <BigCommercePaymentsPayLaterBanner {...props} />\n            },\n            [PaymentMethodId.BigCommercePaymentsAlternativeMethod]: {\n                logoUrl: method.logoUrl || '',\n                titleText: method.logoUrl ? '' : methodDisplayName,\n            },\n            [PaymentMethodId.PaypalCommerce]: {\n                logoUrl: cdnPath('/img/payment-providers/paypal_commerce_logo.svg'),\n                titleText: '',\n                subtitle: (props: PaymentMethodSubtitleProps) => <PaypalCommerceCreditBanner containerId='paypal-commerce-banner-container' {...props} />\n            },\n            [PaymentMethodId.PaypalCommerceCredit]: {\n                logoUrl: cdnPath('/img/payment-providers/paypal_commerce_logo_letter.svg'),\n                titleText: methodDisplayName,\n                subtitle: (props: PaymentMethodSubtitleProps) => <PaypalCommerceCreditBanner containerId='paypal-commerce-credit-banner-container' {...props} />\n            },\n            [PaymentMethodId.PaypalCommerceAlternativeMethod]: {\n                logoUrl: method.logoUrl || '',\n                titleText: method.logoUrl ? '' : methodDisplayName,\n            },\n            [PaymentMethodType.VisaCheckout]: {\n                logoUrl: cdnPath('/img/payment-providers/visa-checkout.png'),\n                titleText: methodName,\n            },\n            [PaymentMethodId.Affirm]: {\n                logoUrl: cdnPath('/img/payment-providers/affirm-checkout-header.png'),\n                titleText: language.translate('payment.affirm_display_name_text'),\n            },\n            [PaymentMethodId.Afterpay]: {\n                logoUrl: isExperimentEnabled(checkoutSettings, 'PROJECT-6993.change_afterpay_logo_for_us_stores') && storeCountryCode === 'US' ? cdnPath('/img/payment-providers/afterpay-new-us.svg') : cdnPath('/img/payment-providers/afterpay-badge-blackonmint.png'),\n                titleText: methodName,\n            },\n            [PaymentMethodId.AmazonPay]: {\n                logoUrl: cdnPath('/img/payment-providers/amazon-header.png'),\n                titleText: '',\n            },\n            [PaymentMethodId.ApplePay]: {\n                logoUrl: cdnPath('/modules/checkout/applepay/images/applepay-header@2x.png'),\n                titleText: '',\n            },\n            [PaymentMethodId.Bolt]: {\n                logoUrl: '',\n                titleText: methodDisplayName,\n            },\n            [PaymentMethodId.Clearpay]: {\n                logoUrl: cdnPath('/img/payment-providers/clearpay-header.png'),\n                titleText: '',\n            },\n            [PaymentMethodType.GooglePay]: {\n                logoUrl: cdnPath('/img/payment-providers/google-pay.png'),\n                titleText: '',\n            },\n            [PaymentMethodType.PayWithGoogle]: {\n                logoUrl: cdnPath('/img/payment-providers/google-pay.png'),\n                titleText: '',\n            },\n            [PaymentMethodId.Humm]: {\n                logoUrl: cdnPath('/img/payment-providers/humm-checkout-header.png'),\n                titleText: '',\n            },\n            [PaymentMethodId.Klarna]: {\n                logoUrl: method.initializationData?.enableBillie\n                        ? cdnPath('/img/payment-providers/klarna-billie-header.png')\n                        : cdnPath('/img/payment-providers/klarna-header.png'),\n                titleText: methodDisplayName,\n            },\n            [PaymentMethodId.Laybuy]: {\n                logoUrl: cdnPath('/img/payment-providers/laybuy-checkout-header.png'),\n                titleText: '',\n            },\n            [PaymentMethodId.Masterpass]: {\n                logoUrl: 'https://masterpass.com/dyn/img/acc/global/mp_mark_hor_blk.svg',\n                titleText: '',\n            },\n            [PaymentMethodType.Paypal]: {\n                // TODO: method.id === PaymentMethodId.BraintreeVenmo should be removed after the PAYPAL-1380.checkout_button_strategies_update experiment removal\n                logoUrl:\n                    method.id === PaymentMethodId.BraintreeVenmo && method.logoUrl\n                        ? method.logoUrl\n                        : cdnPath('/img/payment-providers/paypalpaymentsprouk.png'),\n                titleText: '',\n                subtitle: (props: PaymentMethodSubtitleProps): ReactNode => (\n                    <BraintreePaypalCreditBanner containerId='braintree-banner-container' {...props} />\n                ),\n            },\n            [PaymentMethodId.Quadpay]: {\n                logoUrl: cdnPath('/img/payment-providers/quadpay.png'),\n                titleText: language.translate('payment.quadpay_display_name_text'),\n            },\n            [PaymentMethodId.Sezzle]: {\n                logoUrl: cdnPath('/img/payment-providers/sezzle-checkout-header.png'),\n                titleText: language.translate('payment.sezzle_display_name_text'),\n            },\n            [PaymentMethodId.Zip]: {\n                logoUrl: cdnPath('/img/payment-providers/zip.png'),\n                titleText: language.translate('payment.zip_display_name_text'),\n            },\n            [PaymentMethodType.Barclaycard]: {\n                logoUrl: cdnPath(\n                    `/img/payment-providers/barclaycard_${method.id.toLowerCase()}.png`,\n                ),\n                titleText: '',\n            },\n            [PaymentMethodId.AdyenV2]: {\n                logoUrl: `https://checkoutshopper-live.adyen.com/checkoutshopper/images/logos/${\n                    method.method === 'scheme' ? 'card' : method.method\n                }.svg`,\n                titleText: methodDisplayName,\n            },\n            [PaymentMethodId.AdyenV3]: {\n                logoUrl: `https://checkoutshopper-live.adyen.com/checkoutshopper/images/logos/${\n                    method.method === 'scheme' ? 'card' : method.method\n                }.svg`,\n                titleText: methodDisplayName,\n            },\n            [PaymentMethodId.Mollie]: {\n                logoUrl:\n                    method.method === 'credit_card'\n                        ? ''\n                        : cdnPath(`/img/payment-providers/mollie_${method.method}.svg`),\n                titleText: methodDisplayName,\n            },\n            [PaymentMethodId.Checkoutcom]: {\n                logoUrl: ['credit_card', 'card', 'checkoutcom'].includes(method.id)\n                    ? ''\n                    : cdnPath(`/img/payment-providers/checkoutcom_${method.id.toLowerCase()}.svg`),\n                titleText: methodName,\n            },\n            [PaymentMethodId.StripeV3]: {\n                logoUrl: paymentWithLogo.includes(method.id)\n                    ? cdnPath(`/img/payment-providers/stripe-${method.id.toLowerCase()}.svg`)\n                    : '',\n                titleText:\n                    method.method === 'iban'\n                        ? language.translate('payment.stripe_sepa_display_name_text')\n                        : methodName,\n            },\n            [PaymentMethodId.StripeUPE]: {\n                logoUrl: paymentWithLogo.includes(method.id)\n                    ? cdnPath(`/img/payment-providers/stripe-${method.id.toLowerCase()}.svg`)\n                    : '',\n                titleText:\n                    method.method === 'iban'\n                        ? language.translate('payment.stripe_sepa_display_name_text')\n                        : methodName,\n            },\n            [PaymentMethodId.WorldpayAccess]: {\n                logoUrl: '',\n                titleText: language.translate('payment.credit_debit_card_text'),\n            },\n        };\n\n        if (method.gateway === PaymentMethodId.BlueSnapDirect) {\n            if (method.id === 'credit_card') {\n                return { logoUrl: '', titleText: language.translate('payment.credit_card_text') };\n            }\n\n            if (method.id === 'ecp') {\n                return { logoUrl: '', titleText: language.translate('payment.bluesnap_direct_electronic_check_label') };\n            }\n\n            if (method.id === 'banktransfer') {\n                return { logoUrl: '', titleText: language.translate('payment.bluesnap_direct_local_bank_transfer_label') };\n            }\n        }\n\n        if (method.id === PaymentMethodId.PaypalCommerceVenmo) {\n            return customTitles[PaymentMethodId.PaypalCommerceAlternativeMethod];\n        }\n\n        if (method.id === PaymentMethodId.BigCommercePaymentsVenmo) {\n            return customTitles[PaymentMethodId.BigCommercePaymentsAlternativeMethod];\n        }\n\n        // KLUDGE: 'paypal' is actually a credit card method. It is the only\n        // exception to the rule below. We should probably fix it on API level,\n        // but apparently it would break LCO if we are not careful.\n        if (\n            method.id === PaymentMethodId.PaypalPaymentsPro &&\n            method.method === PaymentMethodType.CreditCard\n        ) {\n            return customTitles[PaymentMethodType.CreditCard];\n        }\n\n        if (method.id === PaymentMethodId.Ratepay) {\n            return { logoUrl: method.logoUrl || '', titleText: language.translate('payment.ratepay.payment_method_title')};\n        }\n\n        return (\n            customTitles[method.gateway || ''] ||\n            customTitles[method.id] ||\n            customTitles[method.method] ||\n            customTitles[PaymentMethodType.CreditCard]\n        );\n    };\n}\n\nfunction getInstrumentForMethod(\n    instruments: CardInstrument[],\n    method: PaymentMethod,\n    values: PaymentFormValues\n): CardInstrument | undefined {\n    const instrumentsForMethod = instruments.filter(instrument => instrument.provider === method.id);\n    const selectedInstrument = instrumentsForMethod.find(instrument => instrument.bigpayToken === values.instrumentId);\n\n    return selectedInstrument;\n}\n\nconst PaymentMethodTitle: FunctionComponent<\n    PaymentMethodTitleProps &\n        WithLanguageProps &\n        WithPaymentTitleProps &\n        ConnectFormikProps<PaymentFormValues>\n> = ({ cdnBasePath, checkoutSettings, storeCountryCode, onUnhandledError, formik: { values }, instruments, isSelected, language, method }) => {\n    const methodName = getPaymentMethodName(language)(method);\n    const { logoUrl, titleText, subtitle } = getPaymentMethodTitle(language, cdnBasePath, checkoutSettings, storeCountryCode)(method);\n    const { themeV2 } = useThemeContext();\n\n    const getSelectedCardType = () => {\n        if (!isSelected) {\n            return;\n        }\n\n        const instrumentSelected = getInstrumentForMethod(instruments, method, values);\n\n        if (isHostedCreditCardFieldsetValues(values) && values.hostedForm.cardType) {\n            return values.hostedForm.cardType;\n        }\n\n        if (hasCreditCardNumber(values) && values.ccNumber) {\n            const { card } = number(values.ccNumber);\n\n            if (!card) {\n                return;\n            }\n\n            return card.type;\n        }\n\n        if (instrumentSelected) {\n            return instrumentSelected.brand;\n        }\n    };\n\n    const getSubtitle = () => {\n        const node = subtitle instanceof Function ? subtitle({ onUnhandledError, methodId: method.id }) : subtitle;\n\n        return node ? <div className=\"paymentProviderHeader-subtitleContainer\">\n            {node}\n        </div> : null\n    }\n\n    return (\n        <div className={\n            classNames(\n                'paymentProviderHeader-container',\n                {'paymentProviderHeader-container-googlePay': method.id.includes('googlepay')},\n            )\n        }>\n            <div\n                className=\"paymentProviderHeader-nameContainer\"\n                data-test={`payment-method-${method.id}`}\n            >\n                {logoUrl && (\n                    <img\n                        alt={`${methodName} icon`}\n                        className={classNames(\n                            'paymentProviderHeader-img',\n                            {'paymentProviderHeader-img-applePay': method.id === 'applepay'},\n                            {'paymentProviderHeader-img-googlePay': method.id.includes('googlepay')},\n                        )}\n                        data-test=\"payment-method-logo\"\n                        src={logoUrl}\n                    />\n                )}\n\n                {titleText && (\n                    <div className={classNames('paymentProviderHeader-name',\n                        { 'sub-header': themeV2 })}\n                        data-test=\"payment-method-name\">\n                        {titleText}\n                    </div>\n                )}\n                {getSubtitle()}\n            </div>\n            <div className=\"paymentProviderHeader-cc\">\n                <CreditCardIconList\n                    cardTypes={compact(method.supportedCards.map(mapFromPaymentMethodCardType))}\n                    selectedCardType={getSelectedCardType()}\n                />\n            </div>\n        </div>\n    );\n};\n\nfunction mapToCheckoutProps({ checkoutState }: CheckoutContextProps): WithPaymentTitleProps | null {\n    const {\n        data: { getConfig, getInstruments },\n    } = checkoutState;\n    const config = getConfig();\n\n    const instruments = getInstruments() || [];\n\n    if (!config) {\n        return null;\n    }\n\n    const storeCountryCode = config.storeProfile.storeCountryCode\n\n    return {\n        instruments,\n        checkoutSettings: config.checkoutSettings,\n        storeCountryCode,\n        cdnBasePath: config.cdnPath,\n    };\n}\n\nexport default connectFormik(\n    withLanguage(withCheckout(mapToCheckoutProps)(memo(PaymentMethodTitle))),\n);\n","import { type LanguageService, type PaymentMethod } from '@bigcommerce/checkout-sdk';\n\nimport PaymentMethodId from './PaymentMethodId';\n\nexport default function getPaymentMethodDisplayName(\n    language: LanguageService,\n): (method: PaymentMethod) => string {\n    return (method) => {\n        const { displayName } = method.config;\n\n        const isCreditCard = displayName?.toLowerCase() === 'credit card';\n\n        if (\n            method.id === PaymentMethodId.PaypalCommerceCredit ||\n            method.id === PaymentMethodId.BigCommercePaymentsPayLater ||\n            method.id === PaymentMethodId.BraintreePaypalCredit\n        ) {\n            const { payPalCreditProductBrandName } = method.initializationData;\n\n            if (payPalCreditProductBrandName) {\n                return payPalCreditProductBrandName.credit || payPalCreditProductBrandName;\n            }\n\n            return 'Pay Later';\n        }\n\n        if (\n            (isCreditCard && method.id === PaymentMethodId.AdyenV2) ||\n            method.id === PaymentMethodId.AdyenV3\n        ) {\n            return language.translate('payment.credit_debit_card_text');\n        }\n\n        if (isCreditCard) {\n            return language.translate('payment.credit_card_text');\n        }\n\n        return displayName || '';\n    };\n}\n","interface HostedCreditCardFieldsetValues {\n    hostedForm: {\n        cardType?: string;\n        errors?: {\n            cardCode?: string;\n            cardExpiry?: string;\n            cardName?: string;\n            cardNumber?: string;\n        };\n    };\n}\n\nexport function isHostedCreditCardFieldsetValues(\n    value: unknown,\n): value is HostedCreditCardFieldsetValues {\n    if (!(value instanceof Object)) {\n        return false;\n    }\n\n    if (!('hostedForm' in value)) {\n        return false;\n    }\n\n    return true;\n}\n","import React, { type ReactNode } from 'react';\n\nimport type PaymentFormService from '../../PaymentFormService';\n\nimport { PaymentFormContext } from './PaymentFormContext';\n\ninterface PaymentFormProviderProps {\n    children?: ReactNode;\n    paymentForm: PaymentFormService;\n}\n\nexport const PaymentFormProvider = ({ children, paymentForm }: PaymentFormProviderProps) => {\n    return (\n        <PaymentFormContext.Provider value={{ paymentForm }}>\n            {children}\n        </PaymentFormContext.Provider>\n    );\n};\n","import { lazy } from 'react';\n\nconst AdyenV2PaymentMethod = lazy(() => import(/* webpackChunkName: \"adyen-v2-payment-method\" */'@bigcommerce/checkout/adyen-integration').then(module => ({ default: module.AdyenV2PaymentMethod })));\nconst AdyenV3PaymentMethod = lazy(() => import(/* webpackChunkName: \"adyen-v3-payment-method\" */'@bigcommerce/checkout/adyen-integration').then(module => ({ default: module.AdyenV3PaymentMethod })));\nconst AffirmPaymentMethod = lazy(() => import(/* webpackChunkName: \"affirm-payment-method\" */'@bigcommerce/checkout/affirm-integration').then(module => ({ default: module.AffirmPaymentMethod })));\nconst AfterpayPaymentMethod = lazy(() => import(/* webpackChunkName: \"afterpay-payment-method\" */'@bigcommerce/checkout/afterpay-integration').then(module => ({ default: module.AfterpayPaymentMethod })));\nconst AmazonPayV2PaymentMethod = lazy(() => import(/* webpackChunkName: \"amazon-pay-v2-payment-method\" */'@bigcommerce/checkout/amazon-pay-v2-integration').then(module => ({ default: module.AmazonPayV2PaymentMethod })));\nconst ApplePayPaymentMethod = lazy(() => import(/* webpackChunkName: \"apple-pay-payment-method\" */'@bigcommerce/checkout/apple-pay-integration').then(module => ({ default: module.ApplePayPaymentMethod })));\nconst BarclaycardPaymentMethod = lazy(() => import(/* webpackChunkName: \"barclaycard-payment-method\" */'@bigcommerce/checkout/barclay-integration').then(module => ({ default: module.BarclaycardPaymentMethod })));\nconst BigCommercePaymentsPaymentMethod = lazy(() => import(/* webpackChunkName: \"big-commerce-payments-payment-method\" */'@bigcommerce/checkout/bigcommerce-payments-integration').then(module => ({ default: module.BigCommercePaymentsPaymentMethod })));\nconst BigCommercePaymentsAPMsPaymentMethod = lazy(() => import(/* webpackChunkName: \"big-commerce-payments-apms-payment-method\" */'@bigcommerce/checkout/bigcommerce-payments-integration').then(module => ({ default: module.BigCommercePaymentsAPMsPaymentMethod })));\nconst BigCommercePaymentsCreditCardsPaymentMethod = lazy(() => import(/* webpackChunkName: \"big-commerce-payments-credit-cards-payment-method\" */'@bigcommerce/checkout/bigcommerce-payments-integration').then(module => ({ default: module.BigCommercePaymentsCreditCardsPaymentMethod })));\nconst BigCommercePaymentsFastlanePaymentMethod = lazy(() => import(/* webpackChunkName: \"big-commerce-payments-fastlane-payment-method\" */'@bigcommerce/checkout/bigcommerce-payments-integration').then(module => ({ default: module.BigCommercePaymentsFastlanePaymentMethod })));\nconst BigCommercePaymentsPayLaterPaymentMethod = lazy(() => import(/* webpackChunkName: \"big-commerce-payments-pay-later-payment-method\" */'@bigcommerce/checkout/bigcommerce-payments-integration').then(module => ({ default: module.BigCommercePaymentsPayLaterPaymentMethod })));\nconst BigCommercePaymentsVenmoPaymentMethod = lazy(() => import(/* webpackChunkName: \"big-commerce-payments-venmo-payment-method\" */'@bigcommerce/checkout/bigcommerce-payments-integration').then(module => ({ default: module.BigCommercePaymentsVenmoPaymentMethod })));\nconst BigCommercePaymentsRatePayPaymentMethod = lazy(() => import(/* webpackChunkName: \"big-commerce-payments-rate-pay-payment-method\" */'@bigcommerce/checkout/bigcommerce-payments-integration').then(module => ({ default: module.BigCommercePaymentsRatePayPaymentMethod })));\nconst BlueSnapDirectEcpPaymentMethod = lazy(() => import(/* webpackChunkName: \"blue-snap-direct-ecp-payment-method\" */'@bigcommerce/checkout/bluesnap-direct-integration').then(module => ({ default: module.BlueSnapDirectEcpPaymentMethod })));\nconst BlueSnapDirectAlternativePaymentMethod = lazy(() => import(/* webpackChunkName: \"blue-snap-direct-alternative-payment-method\" */'@bigcommerce/checkout/bluesnap-direct-integration').then(module => ({ default: module.BlueSnapDirectAlternativePaymentMethod })));\nconst BlueSnapDirectSepaPaymentMethod = lazy(() => import(/* webpackChunkName: \"blue-snap-direct-sepa-payment-method\" */'@bigcommerce/checkout/bluesnap-direct-integration').then(module => ({ default: module.BlueSnapDirectSepaPaymentMethod })));\nconst BlueSnapDirectIdealPaymentMethod = lazy(() => import(/* webpackChunkName: \"blue-snap-direct-ideal-payment-method\" */'@bigcommerce/checkout/bluesnap-direct-integration').then(module => ({ default: module.BlueSnapDirectIdealPaymentMethod })));\nconst BlueSnapV2PaymentMethod = lazy(() => import(/* webpackChunkName: \"blue-snap-v2-payment-method\" */'@bigcommerce/checkout/bluesnap-direct-integration').then(module => ({ default: module.BlueSnapV2PaymentMethod })));\nconst BlueSnapDirectPayByBankPaymentMethod = lazy(() => import(/* webpackChunkName: \"blue-snap-direct-pay-by-bank-payment-method\" */'@bigcommerce/checkout/bluesnap-direct-integration').then(module => ({ default: module.BlueSnapDirectPayByBankPaymentMethod })));\nconst BoltClientPaymentMethod = lazy(() => import(/* webpackChunkName: \"bolt-client-payment-method\" */'@bigcommerce/checkout/bolt-integration').then(module => ({ default: module.BoltClientPaymentMethod })));\nconst BoltEmbeddedPaymentMethod = lazy(() => import(/* webpackChunkName: \"bolt-embedded-payment-method\" */'@bigcommerce/checkout/bolt-integration').then(module => ({ default: module.BoltEmbeddedPaymentMethod })));\nconst BoltPaymentMethod = lazy(() => import(/* webpackChunkName: \"bolt-payment-method\" */'@bigcommerce/checkout/bolt-integration').then(module => ({ default: module.BoltPaymentMethod })));\nconst BraintreeAchPaymentMethod = lazy(() => import(/* webpackChunkName: \"braintree-ach-payment-method\" */'@bigcommerce/checkout/braintree-integration').then(module => ({ default: module.BraintreeAchPaymentMethod })));\nconst BraintreeFastlanePaymentMethod = lazy(() => import(/* webpackChunkName: \"braintree-fastlane-payment-method\" */'@bigcommerce/checkout/braintree-integration').then(module => ({ default: module.BraintreeFastlanePaymentMethod })));\nconst BraintreeLocalPaymentMethod = lazy(() => import(/* webpackChunkName: \"braintree-local-payment-method\" */'@bigcommerce/checkout/braintree-integration').then(module => ({ default: module.BraintreeLocalPaymentMethod })));\nconst BraintreePaypalPaymentMethod = lazy(() => import(/* webpackChunkName: \"braintree-paypal-payment-method\" */'@bigcommerce/checkout/braintree-integration').then(module => ({ default: module.BraintreePaypalPaymentMethod })));\nconst VisaCheckoutPaymentMethod = lazy(() => import(/* webpackChunkName: \"visa-checkout-payment-method\" */'@bigcommerce/checkout/braintree-integration').then(module => ({ default: module.VisaCheckoutPaymentMethod })));\nconst BraintreeVenmoPaymentMethod = lazy(() => import(/* webpackChunkName: \"braintree-venmo-payment-method\" */'@bigcommerce/checkout/braintree-integration').then(module => ({ default: module.BraintreeVenmoPaymentMethod })));\nconst CheckoutcomCustomPaymentMethod = lazy(() => import(/* webpackChunkName: \"checkoutcom-custom-payment-method\" */'@bigcommerce/checkout/checkoutcom-integration').then(module => ({ default: module.CheckoutcomCustomPaymentMethod })));\nconst ClearpayPaymentMethod = lazy(() => import(/* webpackChunkName: \"clearpay-payment-method\" */'@bigcommerce/checkout/clearpay-integration').then(module => ({ default: module.ClearpayPaymentMethod })));\nconst GooglePayPaymentMethod = lazy(() => import(/* webpackChunkName: \"google-pay-payment-method\" */'@bigcommerce/checkout/google-pay-integration').then(module => ({ default: module.GooglePayPaymentMethod })));\nconst HostedCreditCardPaymentMethod = lazy(() => import(/* webpackChunkName: \"hosted-credit-card-payment-method\" */'@bigcommerce/checkout/hosted-credit-card-integration').then(module => ({ default: module.HostedCreditCardPaymentMethod })));\nconst HostedPaymentMethod = lazy(() => import(/* webpackChunkName: \"hosted-payment-method\" */'@bigcommerce/checkout/hosted-payment-integration').then(module => ({ default: module.HostedPaymentMethod })));\nconst KlarnaPaymentMethod = lazy(() => import(/* webpackChunkName: \"klarna-payment-method\" */'@bigcommerce/checkout/klarna-integration').then(module => ({ default: module.KlarnaPaymentMethod })));\nconst KlarnaV2PaymentMethod = lazy(() => import(/* webpackChunkName: \"klarna-v2-payment-method\" */'@bigcommerce/checkout/klarna-integration').then(module => ({ default: module.KlarnaV2PaymentMethod })));\nconst MolliePaymentMethod = lazy(() => import(/* webpackChunkName: \"mollie-payment-method\" */'@bigcommerce/checkout/mollie-integration').then(module => ({ default: module.MolliePaymentMethod })));\nconst MonerisPaymentMethod = lazy(() => import(/* webpackChunkName: \"moneris-payment-method\" */'@bigcommerce/checkout/moneris-integration').then(module => ({ default: module.MonerisPaymentMethod })));\nconst OfflinePaymentMethod = lazy(() => import(/* webpackChunkName: \"offline-payment-method\" */'@bigcommerce/checkout/offline-payment-integration').then(module => ({ default: module.OfflinePaymentMethod })));\nconst PayPalCommerceAPMsPaymentMethod = lazy(() => import(/* webpackChunkName: \"pay-pal-commerce-apms-payment-method\" */'@bigcommerce/checkout/paypal-commerce-integration').then(module => ({ default: module.PayPalCommerceAPMsPaymentMethod })));\nconst PayPalCommerceCreditPaymentMethod = lazy(() => import(/* webpackChunkName: \"pay-pal-commerce-credit-payment-method\" */'@bigcommerce/checkout/paypal-commerce-integration').then(module => ({ default: module.PayPalCommerceCreditPaymentMethod })));\nconst PayPalCommerceCreditCardsPaymentMethod = lazy(() => import(/* webpackChunkName: \"pay-pal-commerce-credit-cards-payment-method\" */'@bigcommerce/checkout/paypal-commerce-integration').then(module => ({ default: module.PayPalCommerceCreditCardsPaymentMethod })));\nconst PayPalCommerceFastlanePaymentMethod = lazy(() => import(/* webpackChunkName: \"pay-pal-commerce-fastlane-payment-method\" */'@bigcommerce/checkout/paypal-commerce-integration').then(module => ({ default: module.PayPalCommerceFastlanePaymentMethod })));\nconst PayPalCommercePaymentMethod = lazy(() => import(/* webpackChunkName: \"pay-pal-commerce-payment-method\" */'@bigcommerce/checkout/paypal-commerce-integration').then(module => ({ default: module.PayPalCommercePaymentMethod })));\nconst PayPalCommerceVenmoPaymentMethod = lazy(() => import(/* webpackChunkName: \"pay-pal-commerce-venmo-payment-method\" */'@bigcommerce/checkout/paypal-commerce-integration').then(module => ({ default: module.PayPalCommerceVenmoPaymentMethod })));\nconst PaypalCommerceRatePayPaymentMethod = lazy(() => import(/* webpackChunkName: \"paypal-commerce-rate-pay-payment-method\" */'@bigcommerce/checkout/paypal-commerce-integration').then(module => ({ default: module.PaypalCommerceRatePayPaymentMethod })));\nconst PaypalExpressPaymentMethod = lazy(() => import(/* webpackChunkName: \"paypal-express-payment-method\" */'@bigcommerce/checkout/paypal-express-integration').then(module => ({ default: module.PaypalExpressPaymentMethod })));\nconst PPSDKPaymentMethod = lazy(() => import(/* webpackChunkName: \"ppsdkpayment-method\" */'@bigcommerce/checkout/ppsdk-integration').then(module => ({ default: module.PPSDKPaymentMethod })));\nconst SquareV2PaymentMethod = lazy(() => import(/* webpackChunkName: \"square-v2-payment-method\" */'@bigcommerce/checkout/squarev2-integration').then(module => ({ default: module.SquareV2PaymentMethod })));\nconst StripeOCSPaymentMethod = lazy(() => import(/* webpackChunkName: \"stripe-ocspayment-method\" */'@bigcommerce/checkout/stripe-integration').then(module => ({ default: module.StripeOCSPaymentMethod })));\nconst StripeUPEPaymentMethod = lazy(() => import(/* webpackChunkName: \"stripe-upepayment-method\" */'@bigcommerce/checkout/stripe-integration').then(module => ({ default: module.StripeUPEPaymentMethod })));\nconst StripeV3PaymentMethod = lazy(() => import(/* webpackChunkName: \"stripe-v3-payment-method\" */'@bigcommerce/checkout/stripe-integration').then(module => ({ default: module.StripeV3PaymentMethod })));\nconst WorldpayCreditCardPaymentMethod = lazy(() => import(/* webpackChunkName: \"worldpay-credit-card-payment-method\" */'@bigcommerce/checkout/worldpay-access-integration').then(module => ({ default: module.WorldpayCreditCardPaymentMethod })));\n\nexport {\n  AdyenV2PaymentMethod,\n  AdyenV3PaymentMethod,\n  AffirmPaymentMethod,\n  AfterpayPaymentMethod,\n  AmazonPayV2PaymentMethod,\n  ApplePayPaymentMethod,\n  BarclaycardPaymentMethod,\n  BigCommercePaymentsPaymentMethod,\n  BigCommercePaymentsAPMsPaymentMethod,\n  BigCommercePaymentsCreditCardsPaymentMethod,\n  BigCommercePaymentsFastlanePaymentMethod,\n  BigCommercePaymentsPayLaterPaymentMethod,\n  BigCommercePaymentsVenmoPaymentMethod,\n  BigCommercePaymentsRatePayPaymentMethod,\n  BlueSnapDirectEcpPaymentMethod,\n  BlueSnapDirectAlternativePaymentMethod,\n  BlueSnapDirectSepaPaymentMethod,\n  BlueSnapDirectIdealPaymentMethod,\n  BlueSnapV2PaymentMethod,\n  BlueSnapDirectPayByBankPaymentMethod,\n  BoltClientPaymentMethod,\n  BoltEmbeddedPaymentMethod,\n  BoltPaymentMethod,\n  BraintreeAchPaymentMethod,\n  BraintreeFastlanePaymentMethod,\n  BraintreeLocalPaymentMethod,\n  BraintreePaypalPaymentMethod,\n  VisaCheckoutPaymentMethod,\n  BraintreeVenmoPaymentMethod,\n  CheckoutcomCustomPaymentMethod,\n  ClearpayPaymentMethod,\n  GooglePayPaymentMethod,\n  HostedCreditCardPaymentMethod,\n  HostedPaymentMethod,\n  KlarnaPaymentMethod,\n  KlarnaV2PaymentMethod,\n  MolliePaymentMethod,\n  MonerisPaymentMethod,\n  OfflinePaymentMethod,\n  PayPalCommerceAPMsPaymentMethod,\n  PayPalCommerceCreditPaymentMethod,\n  PayPalCommerceCreditCardsPaymentMethod,\n  PayPalCommerceFastlanePaymentMethod,\n  PayPalCommercePaymentMethod,\n  PayPalCommerceVenmoPaymentMethod,\n  PaypalCommerceRatePayPaymentMethod,\n  PaypalExpressPaymentMethod,\n  PPSDKPaymentMethod,\n  SquareV2PaymentMethod,\n  StripeOCSPaymentMethod,\n  StripeUPEPaymentMethod,\n  StripeV3PaymentMethod,\n  WorldpayCreditCardPaymentMethod,\n};\n\nimport { PaymentMethodId } from '@bigcommerce/checkout/payment-integration-api';\n\nexport const ComponentRegistry = {\n  'AdyenV2PaymentMethod': [\n    { \"gateway\": \"adyenv2\" }\n  ],\n  'AdyenV3PaymentMethod': [\n    { \"gateway\": \"adyenv3\" }\n  ],\n  'AffirmPaymentMethod': [\n    { \"id\": \"affirm\" }\n  ],\n  'AfterpayPaymentMethod': [\n    { \"gateway\": \"afterpay\" }\n  ],\n  'AmazonPayV2PaymentMethod': [\n    { \"id\": \"amazonpay\" }\n  ],\n  'ApplePayPaymentMethod': [\n    { \"id\": \"applepay\" }\n  ],\n  'BarclaycardPaymentMethod': [\n    { \"gateway\": \"barclaycard\" }\n  ],\n  'BigCommercePaymentsAPMsPaymentMethod': [\n    { \"gateway\": \"bigcommerce_payments_apms\" }\n  ],\n  'BigCommercePaymentsCreditCardsPaymentMethod': [\n    { \"id\": \"bigcommerce_payments_creditcards\" }\n  ],\n  'BigCommercePaymentsFastlanePaymentMethod': [\n    { \"id\": \"bigcommerce_payments_fastlane\" }\n  ],\n  'BigCommercePaymentsPayLaterPaymentMethod': [\n    { \"id\": \"bigcommerce_payments_paylater\" }\n  ],\n  'BigCommercePaymentsPaymentMethod': [\n    { \"id\": \"bigcommerce_payments\" }\n  ],\n  'BigCommercePaymentsRatePayPaymentMethod': [\n    { \"gateway\": \"bigcommerce_payments_apms\", \"id\": \"ratepay\" }\n  ],\n  'BigCommercePaymentsVenmoPaymentMethod': [\n    { \"id\": \"bigcommerce_payments_venmo\" }\n  ],\n  'BlueSnapDirectAlternativePaymentMethod': [\n    { \"gateway\": \"bluesnapdirect\" }\n  ],\n  'BlueSnapDirectEcpPaymentMethod': [\n    { \"id\": \"ecp\", \"gateway\": \"bluesnapdirect\" }\n  ],\n  'BlueSnapDirectIdealPaymentMethod': [\n    { \"id\": \"ideal\", \"gateway\": \"bluesnapdirect\" }\n  ],\n  'BlueSnapDirectPayByBankPaymentMethod': [\n    { \"id\": \"pay_by_bank\", \"gateway\": \"bluesnapdirect\" }\n  ],\n  'BlueSnapDirectSepaPaymentMethod': [\n    { \"id\": \"sepa_direct_debit\", \"gateway\": \"bluesnapdirect\" }\n  ],\n  'BlueSnapV2PaymentMethod': [\n    { \"gateway\": \"bluesnapv2\" }\n  ],\n  'BoltPaymentMethod': [\n    { \"id\": \"bolt\" }\n  ],\n  'BraintreeAchPaymentMethod': [\n    { \"id\": \"braintreeach\" }\n  ],\n  'BraintreeFastlanePaymentMethod': [\n    { \"id\": \"braintreeacceleratedcheckout\" }\n  ],\n  'BraintreeLocalPaymentMethod': [\n    { \"gateway\": \"braintreelocalmethods\" }\n  ],\n  'BraintreePaypalPaymentMethod': [\n    { \"id\": \"braintreepaypal\" }\n  ],\n  'BraintreeVenmoPaymentMethod': [\n    { \"id\": \"braintreevenmo\" }\n  ],\n  'CheckoutcomCustomPaymentMethod': [\n    { \"gateway\": \"checkoutcom\", \"id\": \"ideal\" },\n    { \"gateway\": \"checkoutcom\", \"id\": \"fawry\" },\n    { \"gateway\": \"checkoutcom\", \"id\": \"oxxo\" },\n    { \"gateway\": \"checkoutcom\", \"id\": \"boleto\" },\n    { \"gateway\": \"checkoutcom\", \"id\": \"sepa\" },\n    { \"gateway\": \"checkoutcom\", \"id\": \"qpay\" },\n    { \"gateway\": \"checkoutcom\", \"id\": \"p24\" }\n  ],\n  'ClearpayPaymentMethod': [\n    { \"gateway\": \"clearpay\" }\n  ],\n  'GooglePayPaymentMethod': [\n    { \"id\": PaymentMethodId.AdyenV2GooglePay },\n    { \"id\": PaymentMethodId.AdyenV3GooglePay },\n    { \"id\": PaymentMethodId.AuthorizeNetGooglePay },\n    { \"id\": PaymentMethodId.BNZGooglePay },\n    { \"id\": PaymentMethodId.BraintreeGooglePay },\n    { \"id\": PaymentMethodId.PayPalCommerceGooglePay },\n    { \"id\": PaymentMethodId.BigCommercePaymentsGooglePay },\n    { \"id\": PaymentMethodId.CheckoutcomGooglePay },\n    { \"id\": PaymentMethodId.CybersourceV2GooglePay },\n    { \"id\": PaymentMethodId.OrbitalGooglePay },\n    { \"id\": PaymentMethodId.StripeGooglePay },\n    { \"id\": PaymentMethodId.StripeUPEGooglePay },\n    { \"id\": PaymentMethodId.WorldpayAccessGooglePay },\n    { \"id\": PaymentMethodId.TdOnlineMartGooglePay },\n    { \"id\": PaymentMethodId.StripeOCSGooglePay }\n  ],\n  'HostedCreditCardPaymentMethod': [\n    { \"id\": \"hosted-credit-card\" },\n    { \"id\": \"credit_card\", \"gateway\": \"bluesnapdirect\" },\n    { \"id\": \"tdonlinemart\" }\n  ],\n  'HostedPaymentMethod': [\n    { \"id\": \"quadpay\" },\n    { \"id\": \"sezzle\" },\n    { \"id\": \"zip\" }\n  ],\n  'KlarnaPaymentMethod': [\n    { \"id\": \"klarna\" }\n  ],\n  'KlarnaV2PaymentMethod': [\n    { \"gateway\": \"klarna\" }\n  ],\n  'MolliePaymentMethod': [\n    { \"gateway\": \"mollie\" },\n    { \"gateway\": \"mollie\", \"id\": \"applepay\" }\n  ],\n  'MonerisPaymentMethod': [\n    { \"id\": \"moneris\" }\n  ],\n  'OfflinePaymentMethod': [\n    { \"type\": \"PAYMENT_TYPE_OFFLINE\" }\n  ],\n  'PayPalCommerceAPMsPaymentMethod': [\n    { \"gateway\": \"paypalcommercealternativemethods\" }\n  ],\n  'PayPalCommerceCreditCardsPaymentMethod': [\n    { \"id\": \"paypalcommercecreditcards\" }\n  ],\n  'PayPalCommerceCreditPaymentMethod': [\n    { \"id\": \"paypalcommercecredit\" }\n  ],\n  'PayPalCommerceFastlanePaymentMethod': [\n    { \"id\": \"paypalcommerceacceleratedcheckout\" }\n  ],\n  'PayPalCommercePaymentMethod': [\n    { \"id\": \"paypalcommerce\" }\n  ],\n  'PaypalCommerceRatePayPaymentMethod': [\n    { \"gateway\": \"paypalcommercealternativemethods\", \"id\": \"ratepay\" }\n  ],\n  'PayPalCommerceVenmoPaymentMethod': [\n    { \"id\": \"paypalcommercevenmo\" }\n  ],\n  'PaypalExpressPaymentMethod': [\n    { \"id\": \"paypalexpress\" }\n  ],\n  'PPSDKPaymentMethod': [\n    { \"type\": \"PAYMENT_TYPE_SDK\" }\n  ],\n  'SquareV2PaymentMethod': [\n    { \"id\": \"squarev2\" }\n  ],\n  'StripeOCSPaymentMethod': [\n    { \"gateway\": \"stripeocs\", \"id\": \"optimized_checkout\" }\n  ],\n  'StripeUPEPaymentMethod': [\n    { \"gateway\": \"stripeupe\" },\n    { \"gateway\": \"stripeupe\", \"id\": \"klarna\" }\n  ],\n  'StripeV3PaymentMethod': [\n    { \"gateway\": \"stripev3\" }\n  ],\n  'VisaCheckoutPaymentMethod': [\n    { \"id\": PaymentMethodId.BraintreeVisaCheckout }\n  ],\n  'WorldpayCreditCardPaymentMethod': [\n    { \"id\": \"worldpayaccess\" }\n  ]\n} as const;\n\n        \n","import {\n    type CheckoutSelectors,\n    type CustomerInitializeOptions,\n    type CustomerRequestOptions,\n    type PaymentInitializeOptions,\n    type PaymentMethod,\n    type PaymentRequestOptions,\n} from '@bigcommerce/checkout-sdk';\nimport React, { type FunctionComponent, lazy, memo, Suspense } from 'react';\n\nimport { type CheckoutContextProps } from '@bigcommerce/checkout/payment-integration-api';\n\nimport { withCheckout } from '../../checkout';\n\nconst BraintreeCreditCardPaymentMethod = lazy(() => import(/* webpackChunkName: \"braintree-credit-card-payment-method\" */'./BraintreeCreditCardPaymentMethod'));\nconst HostedCreditCardPaymentMethod = lazy(() => import(/* webpackChunkName: \"hosted-credit-card-payment-method\" */'./HostedCreditCardPaymentMethod'));\nconst HostedPaymentMethod = lazy(() => import(/* webpackChunkName: \"hosted-payment-method\" */'./HostedPaymentMethod'));\nconst MasterpassPaymentMethod = lazy(() => import(/* webpackChunkName: \"masterpass-payment-method\" */'./MasterpassPaymentMethod'));\nconst PaypalPaymentsProPaymentMethod = lazy(() => import(/* webpackChunkName: \"paypal-payments-pro-payment-method\" */'./PaypalPaymentsProPaymentMethod'));\n\nimport PaymentMethodId from './PaymentMethodId';\nimport PaymentMethodProviderType from './PaymentMethodProviderType';\nimport PaymentMethodType from './PaymentMethodType';\n\nexport interface PaymentMethodProps {\n    method: PaymentMethod;\n    isEmbedded?: boolean;\n    isUsingMultiShipping?: boolean;\n    onUnhandledError?(error: Error): void;\n    submitForm?(): void;\n}\n\nexport interface WithCheckoutPaymentMethodProps {\n    isInitializing: boolean;\n    deinitializeCustomer(options: CustomerRequestOptions): Promise<CheckoutSelectors>;\n    deinitializePayment(options: PaymentRequestOptions): Promise<CheckoutSelectors>;\n    initializeCustomer(options: CustomerInitializeOptions): Promise<CheckoutSelectors>;\n    initializePayment(options: PaymentInitializeOptions): Promise<CheckoutSelectors>;\n}\n\n/**\n * If possible, try to avoid having components that are specific to a specific\n * payment provider or method. Instead, try to generalise the requirements and\n * use components that can are reusable for multiple payment methods. i.e.:\n * CreditCardPaymentMethod, HostedPaymentMethod etc... If it is really necessary\n * for a particular payment method, you may write a method-specific component for\n * the purpose of configuring a general-purpose component in order to fulfill\n * its specific product or technical requirements.\n */\nconst PaymentMethodComponent: FunctionComponent<\n    PaymentMethodProps & WithCheckoutPaymentMethodProps\n> = (props) => {\n    const { method } = props;\n\n    if (method.id === PaymentMethodId.Masterpass) {\n        return <Suspense><MasterpassPaymentMethod {...props} /></Suspense>;\n    }\n\n    if (method.id === PaymentMethodId.Braintree) {\n        return <Suspense><BraintreeCreditCardPaymentMethod {...props} /></Suspense>;\n    }\n\n    if (\n        method.type !== PaymentMethodProviderType.Hosted &&\n        method.id === PaymentMethodId.PaypalPaymentsPro\n    ) {\n        return <Suspense><PaypalPaymentsProPaymentMethod {...props} /></Suspense>;\n    }\n\n    if (\n        method.id === PaymentMethodId.Humm ||\n        method.id === PaymentMethodId.Laybuy ||\n        method.method === PaymentMethodType.Paypal ||\n        method.method === PaymentMethodType.PaypalCredit ||\n        method.type === PaymentMethodProviderType.Hosted\n    ) {\n        return <Suspense><HostedPaymentMethod {...props} /></Suspense>;\n    }\n\n    // NOTE: Some payment methods have `method` as `credit-card` but they are\n    // actually not. Therefore, as a workaround, we are doing the following\n    // check last.\n    if (\n        method.method === PaymentMethodType.CreditCard ||\n        method.type === PaymentMethodProviderType.Api\n    ) {\n        return <Suspense><HostedCreditCardPaymentMethod {...props} /></Suspense>;\n    }\n\n    return null;\n};\n\nfunction mapToWithCheckoutPaymentMethodProps(\n    { checkoutService, checkoutState }: CheckoutContextProps,\n    { method }: PaymentMethodProps,\n): WithCheckoutPaymentMethodProps {\n    const {\n        statuses: { isInitializingPayment },\n    } = checkoutState;\n\n    return {\n        deinitializeCustomer: checkoutService.deinitializeCustomer,\n        deinitializePayment: checkoutService.deinitializePayment,\n        initializeCustomer: checkoutService.initializeCustomer,\n        initializePayment: checkoutService.initializePayment,\n        isInitializing: isInitializingPayment(method.id),\n    };\n}\n\nexport default withCheckout(mapToWithCheckoutPaymentMethodProps)(memo(PaymentMethodComponent));\n","import { type PaymentMethod } from '@bigcommerce/checkout-sdk';\nimport React, { type ComponentType, Suspense } from 'react';\n\nimport { withLanguage, type WithLanguageProps } from '@bigcommerce/checkout/locale';\nimport { PaymentFormProvider, type PaymentFormValues } from '@bigcommerce/checkout/payment-integration-api';\n\nimport { withCheckout, type WithCheckoutProps } from '../../checkout';\nimport { connectFormik, type WithFormikProps } from '../../common/form';\nimport { isExperimentEnabled } from '../../common/utility';\nimport { withForm, type WithFormProps } from '../../ui/form';\nimport createPaymentFormService from '../createPaymentFormService';\nimport resolvePaymentMethod from '../resolvePaymentMethod';\nimport withPayment, { type WithPaymentProps } from '../withPayment';\n\nimport { default as PaymentMethodV1 } from './PaymentMethod';\n\nexport interface PaymentMethodProps {\n    method: PaymentMethod;\n    isEmbedded?: boolean;\n    isUsingMultiShipping?: boolean;\n    onUnhandledError(error: Error): void;\n}\n\nconst PaymentMethodContainer: ComponentType<\n    PaymentMethodProps &\n        WithCheckoutProps &\n        WithLanguageProps &\n        WithPaymentProps &\n        WithFormProps &\n        WithFormikProps<PaymentFormValues>\n> = ({\n    formik: formikContext,\n    checkoutService,\n    checkoutState,\n    disableSubmit,\n    hidePaymentSubmitButton,\n    isEmbedded,\n    isSubmitted,\n    isUsingMultiShipping,\n    language,\n    method,\n    onUnhandledError,\n    setSubmit,\n    setSubmitted,\n    setValidationSchema,\n}) => {\n    const formContext = {\n        isSubmitted,\n        setSubmitted,\n    };\n\n    const paymentContext = {\n        disableSubmit,\n        hidePaymentSubmitButton,\n        setSubmit,\n        setValidationSchema,\n    };\n\n    const { getConfig } = checkoutState.data;\n\n    const ResolvedPaymentMethod = resolvePaymentMethod(\n        {\n            id: method.id,\n            gateway: method.gateway,\n            type: method.type,\n        },\n        isExperimentEnabled(getConfig()?.checkoutSettings, 'CHECKOUT-9432.lazy_load_payment_components', false)\n    );\n\n    if (!ResolvedPaymentMethod) {\n        return (\n            <PaymentMethodV1\n                isEmbedded={isEmbedded}\n                isUsingMultiShipping={isUsingMultiShipping}\n                method={method}\n                onUnhandledError={onUnhandledError}\n            />\n        );\n    }\n\n    const paymentForm = createPaymentFormService(formikContext, formContext, paymentContext);\n\n    return (\n        <PaymentFormProvider paymentForm={paymentForm}>\n            <Suspense>\n                <ResolvedPaymentMethod\n                    checkoutService={checkoutService}\n                    checkoutState={checkoutState}\n                    language={language}\n                    method={method}\n                    onUnhandledError={onUnhandledError}\n                    paymentForm={paymentForm}\n                />\n            </Suspense>\n        </PaymentFormProvider>\n    );\n};\n\nexport default withCheckout((props) => props)(\n    withLanguage(withPayment(withForm(connectFormik(PaymentMethodContainer)))),\n) as ComponentType<PaymentMethodProps>;\n","import { type ComponentType } from 'react';\n\nimport {\n    type PaymentMethodProps,\n    type PaymentMethodResolveId,\n} from '@bigcommerce/checkout/payment-integration-api';\n\nimport { resolveComponent , resolveLazyComponent } from '../common/resolver';\nimport * as paymentMethods from '../generated/paymentIntegrations';\nimport * as lazyPaymentMethods from '../generated/paymentIntegrations/lazy';\n\nexport default function resolvePaymentMethod(\n    query: PaymentMethodResolveId,\n    useLazyLoad: boolean,\n): ComponentType<PaymentMethodProps> | undefined {\n    if (useLazyLoad) {\n        const { ComponentRegistry, ...components } = lazyPaymentMethods;\n\n        return resolveLazyComponent<PaymentMethodResolveId, PaymentMethodProps>(\n            query, \n            components, \n            ComponentRegistry,\n        );\n    }\n\n    return resolveComponent<PaymentMethodResolveId, PaymentMethodProps>(query, paymentMethods);\n}\n","import { type FormikContextType } from 'formik';\n\nimport {\n    type PaymentFormService,\n    type PaymentFormValues,\n} from '@bigcommerce/checkout/payment-integration-api';\nimport { type FormContextType } from '@bigcommerce/checkout/ui';\n\nimport { type PaymentContextProps } from './PaymentContext';\n\nexport default function createPaymentFormService(\n    formikContext: FormikContextType<PaymentFormValues>,\n    formContext: FormContextType,\n    paymentContext: PaymentContextProps,\n): PaymentFormService {\n    const {\n        setFieldTouched,\n        setFieldValue,\n        submitForm,\n        validateForm,\n        values,\n    } = formikContext;\n\n    const { isSubmitted, setSubmitted } = formContext;\n\n    const { disableSubmit, setSubmit, setValidationSchema, hidePaymentSubmitButton } =\n        paymentContext;\n\n    const getFieldValue = <T>(key: string): T | unknown => values[key];\n\n    return {\n        disableSubmit,\n        getFieldValue,\n        getFormValues: () => values,\n        hidePaymentSubmitButton,\n        isSubmitted: () => isSubmitted,\n        setFieldTouched: setFieldTouched as PaymentFormService['setFieldTouched'],\n        setFieldValue: setFieldValue as PaymentFormService['setFieldValue'],\n        setSubmit,\n        setSubmitted,\n        setValidationSchema,\n        submitForm,\n        validateForm,\n    };\n}\n","import { type PaymentMethod } from '@bigcommerce/checkout-sdk';\nimport { find, get, noop } from 'lodash';\nimport React, { type FunctionComponent, memo, useCallback, useMemo } from 'react';\n\nimport { useLocale } from '@bigcommerce/checkout/locale';\nimport { useCheckout } from '@bigcommerce/checkout/payment-integration-api';\n\nimport { connectFormik, type ConnectFormikProps } from '../../common/form';\nimport { isMobile } from '../../common/utility';\nimport { Checklist, ChecklistItem, CustomChecklistItem } from '../../ui/form';\n\nimport getPaymentMethodName from './getPaymentMethodName';\nimport getUniquePaymentMethodId, { parseUniquePaymentMethodId } from './getUniquePaymentMethodId';\nimport PaymentMethodTitle, { getPaymentMethodTitle } from './PaymentMethodTitle';\nimport PaymentMethodV2 from './PaymentMethodV2';\n\nexport interface PaymentMethodListProps {\n    isEmbedded?: boolean;\n    isInitializingPayment?: boolean;\n    isUsingMultiShipping?: boolean;\n    methods: PaymentMethod[];\n    onSelect?(method: PaymentMethod): void;\n    onUnhandledError?(error: Error): void;\n}\n\nfunction getPaymentMethodFromListValue(methods: PaymentMethod[], value: string): PaymentMethod {\n    const { gatewayId: gateway, methodId: id } = parseUniquePaymentMethodId(value);\n    const method = gateway ? find(methods, { gateway, id }) : find(methods, { id });\n\n    if (!method) {\n        throw new Error(`Unable to find payment method with id: ${id}`);\n    }\n\n    return method;\n}\n\nconst PaymentMethodList: FunctionComponent<\n    PaymentMethodListProps & ConnectFormikProps<{ paymentProviderRadio?: string }>\n> = ({\n    formik: { values },\n    isEmbedded,\n    isInitializingPayment,\n    isUsingMultiShipping,\n    methods,\n    onSelect = noop,\n    onUnhandledError,\n}) => {\n    const { language } = useLocale();\n    const {\n        checkoutState: {\n            data: { getConfig }\n        }\n    } = useCheckout();\n\n    const config = getConfig();\n\n    const titleText = useMemo(() => {\n        if (config && values.paymentProviderRadio) {\n            const checkoutSettings = config.checkoutSettings;\n            const cdnBasePath = config.cdnPath;\n            const storeCountryCode = config.storeProfile.storeCountryCode;\n            const paymentMethod = getPaymentMethodFromListValue(methods, values.paymentProviderRadio);\n            const methodName = getPaymentMethodName(language)(paymentMethod);\n            const { titleText } = getPaymentMethodTitle(language, cdnBasePath, checkoutSettings, storeCountryCode)(paymentMethod);\n\n            return titleText || methodName;\n        }\n\n        return '';\n    }, [config, values.paymentProviderRadio])\n\n    const handleSelect = useCallback(\n        (value: string) => {\n            onSelect(getPaymentMethodFromListValue(methods, value));\n        },\n        [methods, onSelect],\n    );\n\n    return (\n        <>\n            <div aria-live=\"assertive\" className='is-srOnly' role=\"status\">{titleText}</div>\n            <Checklist\n                defaultSelectedItemId={values.paymentProviderRadio}\n                isDisabled={isInitializingPayment}\n                name=\"paymentProviderRadio\"\n                onSelect={handleSelect}\n            >\n                {methods.map((method) => {\n                    const value = getUniquePaymentMethodId(method.id, method.gateway);\n                    const showOnlyOnMobileDevices = get(\n                        method,\n                        'initializationData.showOnlyOnMobileDevices',\n                        false,\n                    );\n\n                    if (showOnlyOnMobileDevices && !isMobile()) {\n                        return;\n                    }\n\n                    return (\n                        <PaymentMethodListItem\n                            isDisabled={isInitializingPayment}\n                            isEmbedded={isEmbedded}\n                            isUsingMultiShipping={isUsingMultiShipping}\n                            key={value}\n                            method={method}\n                            onUnhandledError={onUnhandledError}\n                            value={value}\n                        />\n                    );\n                })}\n            </Checklist>\n        </>\n    );\n};\n\ninterface PaymentMethodListItemProps {\n    isDisabled?: boolean;\n    isEmbedded?: boolean;\n    isUsingMultiShipping?: boolean;\n    method: PaymentMethod;\n    value: string;\n    onUnhandledError?(error: Error): void;\n}\n\nconst PaymentMethodListItem: FunctionComponent<PaymentMethodListItemProps> = ({\n    isDisabled,\n    isEmbedded,\n    isUsingMultiShipping,\n    method,\n    onUnhandledError,\n    value,\n}) => {\n    const renderPaymentMethod = useMemo(() => {\n        return (\n            <PaymentMethodV2\n                isEmbedded={isEmbedded}\n                isUsingMultiShipping={isUsingMultiShipping}\n                method={method}\n                onUnhandledError={onUnhandledError || noop}\n            />\n        );\n    }, [isEmbedded, isUsingMultiShipping, method, onUnhandledError]);\n\n    const renderPaymentMethodTitle = useCallback(\n        (isSelected: boolean) => <PaymentMethodTitle isSelected={isSelected} method={method} onUnhandledError={onUnhandledError} />,\n        [method],\n    );\n\n    if (method.initializationData?.isCustomChecklistItem) {\n        return (\n            <CustomChecklistItem\n                content={renderPaymentMethod}\n                htmlId={`radio-${value}`}\n            />\n        );\n    }\n\n    return (\n        <ChecklistItem\n            content={renderPaymentMethod}\n            htmlId={`radio-${value}`}\n            isDisabled={isDisabled}\n            label={renderPaymentMethodTitle}\n            value={value}\n        />\n    );\n};\n\nexport default connectFormik(memo(PaymentMethodList));\n","export default function isMobile(): boolean {\n    return /Android|iPhone|iPad|iPod/i.test(window.navigator.userAgent);\n}\n","import React, { type FunctionComponent, memo } from 'react';\n\nimport { TranslatedString } from '@bigcommerce/checkout/locale';\n\nimport { mapToRedeemableProps, Redeemable, type RedeemableProps } from '../cart';\nimport { withCheckout } from '../checkout';\nimport { Fieldset, Legend } from '../ui/form';\n\nconst PaymentRedeemables: FunctionComponent<RedeemableProps> = (redeemableProps) => (\n    <Fieldset \n        additionalClassName=\"redeemable-payments\"\n        legend={\n            <Legend hidden>\n                <TranslatedString id=\"payment.redeemable_payments_text\" />\n            </Legend>\n        }\n    >\n        <Redeemable {...redeemableProps} showAppliedRedeemables={true} />\n    </Fieldset>\n);\n\nexport default withCheckout(mapToRedeemableProps)(memo(PaymentRedeemables));\n","import React, { type FunctionComponent, memo } from 'react';\n\nimport { TranslatedString } from '@bigcommerce/checkout/locale';\n\nimport { withCheckout } from '../checkout';\nimport { Button, ButtonSize, ButtonVariant } from '../ui/button';\nimport { IconBolt } from '../ui/icon';\n\nimport { PaymentMethodId, PaymentMethodType } from './paymentMethod';\n\ninterface PaymentSubmitButtonTextProps {\n    methodGateway?: string;\n    methodId?: string;\n    methodType?: string;\n    methodName?: string;\n    initialisationStrategyType?: string;\n    brandName?: string;\n    isComplete?: boolean;\n    isPaymentDataRequired?: boolean;\n}\n\nconst providersWithCustomClasses = [PaymentMethodId.Bolt];\n\nconst PaymentSubmitButtonText: FunctionComponent<PaymentSubmitButtonTextProps> = memo(\n    ({\n        methodId,\n        methodName,\n        methodType,\n        methodGateway,\n        initialisationStrategyType,\n        brandName,\n        isComplete,\n        isPaymentDataRequired,\n    }) => {\n        if (!isPaymentDataRequired) {\n            return <TranslatedString id=\"payment.place_order_action\" />;\n        }\n\n        if (methodName && initialisationStrategyType === 'none') {\n            return <TranslatedString data={{ methodName }} id=\"payment.ppsdk_continue_action\" />;\n        }\n\n        if (methodId === PaymentMethodId.AmazonPay) {\n            return <TranslatedString id=\"payment.amazonpay_continue_action\" />;\n        }\n\n        if (methodId === PaymentMethodId.Bolt) {\n            return (\n                <>\n                    <IconBolt additionalClassName=\"payment-submit-button-bolt-icon\" />\n                    <TranslatedString id=\"payment.place_order_action\" />\n                </>\n            );\n        }\n\n        if (methodGateway === PaymentMethodId.Barclaycard) {\n            return <TranslatedString id=\"payment.barclaycard_continue_action\" />;\n        }\n\n        if (methodGateway === PaymentMethodId.BlueSnapV2) {\n            return <TranslatedString id=\"payment.bluesnap_v2_continue_action\" />;\n        }\n\n        if (methodType === PaymentMethodType.VisaCheckout) {\n            return <TranslatedString id=\"payment.visa_checkout_continue_action\" />;\n        }\n\n        if (\n            methodType === PaymentMethodType.PaypalVenmo ||\n            methodId === PaymentMethodId.BraintreeVenmo\n        ) {\n            return <TranslatedString id=\"payment.paypal_venmo_continue_action\" />;\n        }\n\n        if (methodType === PaymentMethodType.Paypal) {\n            const continueActionId = methodId === PaymentMethodId.PaypalCommerce\n                ? 'payment.place_order_action'\n                : 'payment.paypal_continue_action';\n\n            return <TranslatedString\n                data={{ isComplete }}\n                id={isComplete ? 'payment.paypal_complete_action' : continueActionId}\n            />;\n        }\n\n        if (methodType === PaymentMethodType.PaypalCredit) {\n            const continueTranslationId = brandName\n                ? 'payment.continue_with_brand'\n                : 'payment.paypal_pay_later_continue_action'\n            const completeTranslationId = brandName\n                ? 'payment.complete_with_brand'\n                : 'payment.paypal_pay_later_complete_action'\n\n            return (\n                <TranslatedString\n                    data={{ brandName, isComplete, continueTranslationId, completeTranslationId }}\n                    id={\n                        isComplete\n                            ? completeTranslationId\n                            : continueTranslationId\n                    }\n                />\n            );\n        }\n\n        if (methodId === PaymentMethodId.Quadpay) {\n            return <TranslatedString id=\"payment.quadpay_continue_action\" />;\n        }\n\n        if (methodId === PaymentMethodId.Zip) {\n            return <TranslatedString id=\"payment.zip_continue_action\" />;\n        }\n\n        if (methodId === PaymentMethodId.Klarna) {\n            return <TranslatedString id=\"payment.klarna_continue_action\" />;\n        }\n\n        return <TranslatedString id=\"payment.place_order_action\" />;\n    },\n);\n\nexport interface PaymentSubmitButtonProps {\n    methodGateway?: string;\n    methodId?: string;\n    methodName?: string;\n    methodType?: string;\n    isDisabled?: boolean;\n    initialisationStrategyType?: string;\n    brandName?: string;\n    isComplete?: boolean;\n    isPaymentDataRequired?: boolean;\n}\n\ninterface WithCheckoutPaymentSubmitButtonProps {\n    isInitializing?: boolean;\n    isSubmitting?: boolean;\n}\n\nconst PaymentSubmitButton: FunctionComponent<\n    PaymentSubmitButtonProps & WithCheckoutPaymentSubmitButtonProps\n> = ({\n    isDisabled,\n    isInitializing,\n    isSubmitting,\n    isPaymentDataRequired,\n    methodGateway,\n    methodId,\n    methodName,\n    methodType,\n    initialisationStrategyType,\n    brandName,\n    isComplete,\n}) => (\n    <Button\n        className={\n            providersWithCustomClasses.includes(methodId as PaymentMethodId)\n                ? `payment-submit-button-${methodId}`\n                : undefined\n        }\n        data-test=\"payment-submit-button\"\n        disabled={isInitializing || isSubmitting || isDisabled}\n        id=\"checkout-payment-continue\"\n        isFullWidth\n        isLoading={isSubmitting}\n        size={ButtonSize.Large}\n        type=\"submit\"\n        variant={ButtonVariant.Action}\n    >\n        <PaymentSubmitButtonText\n            brandName={brandName}\n            initialisationStrategyType={initialisationStrategyType}\n            isComplete={isComplete}\n            isPaymentDataRequired={isPaymentDataRequired}\n            methodGateway={methodGateway}\n            methodId={methodId}\n            methodName={methodName}\n            methodType={methodType}\n        />\n    </Button>\n);\n\nexport default withCheckout(({ checkoutState }) => {\n    const {\n        data: { isPaymentDataRequired },\n        statuses: { isInitializingCustomer, isInitializingPayment, isSubmittingOrder },\n    } = checkoutState;\n\n    return {\n        isInitializing: isInitializingCustomer() || isInitializingPayment(),\n        isPaymentDataRequired: isPaymentDataRequired(),\n        isSubmitting: isSubmittingOrder(),\n    };\n})(memo(PaymentSubmitButton));\n","import { type CheckoutSelectors } from '@bigcommerce/checkout-sdk';\nimport { noop } from 'lodash';\nimport React, { Component, type MouseEvent, type ReactNode } from 'react';\n\nimport { TranslatedString } from '@bigcommerce/checkout/locale';\nimport { type CheckoutContextProps } from '@bigcommerce/checkout/payment-integration-api';\nimport { LoadingOverlay } from '@bigcommerce/checkout/ui';\n\nimport { withCheckout } from '../checkout';\nimport { isErrorWithType } from '../common/error';\n\nexport interface SpamProtectionProps {\n    didExceedSpamLimit?: boolean;\n    onUnhandledError?(error: Error): void;\n}\n\ninterface SpamProtectionState {\n    shouldShowRetryButton: boolean;\n}\n\ninterface WithCheckoutSpamProtectionProps {\n    isExecutingSpamCheck: boolean;\n    executeSpamCheck(): Promise<CheckoutSelectors>;\n}\n\nfunction mapToSpamProtectionProps({\n    checkoutService,\n    checkoutState,\n}: CheckoutContextProps): WithCheckoutSpamProtectionProps {\n    return {\n        isExecutingSpamCheck: checkoutState.statuses.isExecutingSpamCheck(),\n        executeSpamCheck: checkoutService.executeSpamCheck,\n    };\n}\n\nclass SpamProtectionField extends Component<\n    SpamProtectionProps & WithCheckoutSpamProtectionProps,\n    SpamProtectionState\n> {\n    state = {\n        shouldShowRetryButton: false,\n    };\n\n    async componentDidMount() {\n        const { didExceedSpamLimit } = this.props;\n\n        if (didExceedSpamLimit) {\n            return;\n        }\n\n        this.verify();\n    }\n\n    render() {\n        const { isExecutingSpamCheck } = this.props;\n\n        return (\n            <div className=\"spamProtection-container\">\n                <LoadingOverlay isLoading={isExecutingSpamCheck}>\n                    {this.renderContent()}\n                </LoadingOverlay>\n            </div>\n        );\n    }\n\n    private renderContent(): ReactNode {\n        const { didExceedSpamLimit } = this.props;\n        const { shouldShowRetryButton } = this.state;\n\n        if (!didExceedSpamLimit && !shouldShowRetryButton) {\n            return;\n        }\n\n        return (\n            <div className=\"spamProtection-panel optimizedCheckout-overlay\">\n                <a\n                    className=\"spamProtection-panel-message optimizedCheckout-primaryContent\"\n                    data-test=\"spam-protection-verify-button\"\n                    onClick={this.handleRetry}\n                >\n                    <TranslatedString id=\"spam_protection.verify_action\" />\n                </a>\n            </div>\n        );\n    }\n\n    private async verify(): Promise<void> {\n        const { executeSpamCheck, onUnhandledError = noop } = this.props;\n\n        try {\n            await executeSpamCheck();\n        } catch (error) {\n            this.setState({ shouldShowRetryButton: true });\n\n            // Notify the parent component if the user experiences a problem other than cancelling the reCaptcha challenge.\n            if (\n                isErrorWithType(error) &&\n                error.type !== 'spam_protection_challenge_not_completed'\n            ) {\n                onUnhandledError(error);\n            }\n        }\n    }\n\n    private handleRetry: (event: MouseEvent) => void = (event) => {\n        event.preventDefault();\n\n        this.verify();\n    };\n}\n\nexport default withCheckout(mapToSpamProtectionProps)(SpamProtectionField);\n","import { noop } from 'lodash';\nimport React, { type FunctionComponent, useCallback, useMemo } from 'react';\n\nimport { preventDefault } from '@bigcommerce/checkout/dom-utils';\nimport { TranslatedString, withCurrency, type WithCurrencyProps } from '@bigcommerce/checkout/locale';\nimport { useCheckout } from '@bigcommerce/checkout/payment-integration-api';\n\nimport { CheckboxInput } from '../../ui/form';\nimport { Tooltip, TooltipTrigger } from '../../ui/tooltip';\n\nexport interface StoreCreditFieldProps {\n    availableStoreCredit: number;\n    name: string;\n    usableStoreCredit: number;\n    isStoreCreditApplied: boolean;\n    onChange?(value: boolean): void;\n}\n\nconst StoreCreditField: FunctionComponent<StoreCreditFieldProps & WithCurrencyProps> = ({\n    availableStoreCredit,\n    currency,\n    name,\n    onChange = noop,\n    usableStoreCredit,\n    isStoreCreditApplied,\n}) => {\n    const {\n        checkoutState: {\n            statuses: { isSubmittingOrder }\n        }\n    } = useCheckout();\n\n    const handleChange = useCallback((event: any) => onChange(event.target.checked), [onChange]);\n    const labelContent = useMemo(\n        () => (\n            <>\n                <TranslatedString id=\"redeemable.apply_store_credit_before_action\" />{' '}\n                <TooltipTrigger\n                    placement=\"top-start\"\n                    tooltip={\n                        <Tooltip testId=\"payment-store-credit-tooltip\">\n                            <TranslatedString\n                                data={{\n                                    storeCredit: currency.toCustomerCurrency(availableStoreCredit),\n                                }}\n                                id=\"redeemable.store_credit_available_text\"\n                            />\n                        </Tooltip>\n                    }\n                >\n                    <a href=\"#\" onClick={preventDefault()}>\n                        {currency.toCustomerCurrency(usableStoreCredit)}\n                    </a>\n                </TooltipTrigger>{' '}\n                <TranslatedString id=\"redeemable.apply_store_credit_after_action\" />\n            </>\n        ),\n        [availableStoreCredit, currency, usableStoreCredit],\n    );\n\n    return (\n        <CheckboxInput\n            checked={isStoreCreditApplied}\n            disabled={isSubmittingOrder()}\n            id={name}\n            label={labelContent}\n            name={name}\n            onChange={handleChange}\n            value={name}\n        />\n    );\n};\n\nexport default withCurrency(StoreCreditField);\n","import React, { type FunctionComponent } from 'react';\n\nimport { TranslatedString } from '@bigcommerce/checkout/locale';\n\nconst StoreCreditOverlay: FunctionComponent = () => (\n    <div className=\"storeCreditOverlay\" data-test=\"payment-store-credit-overlay\">\n        <p className=\"storeCreditOverlay-text\">\n            <TranslatedString id=\"payment.payment_not_required_text\" />\n        </p>\n    </div>\n);\n\nexport default StoreCreditOverlay;\n","import { ExtensionRegion, type PaymentMethod } from '@bigcommerce/checkout-sdk';\nimport { type FormikProps, type FormikState, withFormik, type WithFormikConfig } from 'formik';\nimport { isNil, noop, omitBy } from 'lodash';\nimport React, { type FunctionComponent, memo, useCallback, useContext, useMemo } from 'react';\nimport { type ObjectSchema } from 'yup';\n\nimport { Extension } from '@bigcommerce/checkout/checkout-extension';\nimport { TranslatedString, withLanguage, type WithLanguageProps } from '@bigcommerce/checkout/locale';\nimport { type PaymentFormValues } from '@bigcommerce/checkout/payment-integration-api';\nimport { FormContext } from '@bigcommerce/checkout/ui';\n\nimport { TermsConditions } from '../termsConditions';\nimport { Fieldset, Form, Legend } from '../ui/form';\n\nimport getPaymentValidationSchema from './getPaymentValidationSchema';\nimport {\n    getPaymentMethodName,\n    getUniquePaymentMethodId,\n    PaymentMethodId,\n    PaymentMethodList,\n} from './paymentMethod';\nimport PaymentRedeemables from './PaymentRedeemables';\nimport PaymentSubmitButton from './PaymentSubmitButton';\nimport SpamProtectionField from './SpamProtectionField';\nimport { StoreCreditField, StoreCreditOverlay } from './storeCredit';\n\nexport interface PaymentFormProps {\n    availableStoreCredit?: number;\n    defaultGatewayId?: string;\n    defaultMethodId: string;\n    didExceedSpamLimit?: boolean;\n    isEmbedded?: boolean;\n    isInitializingPayment?: boolean;\n    isTermsConditionsRequired?: boolean;\n    isUsingMultiShipping?: boolean;\n    isStoreCreditApplied: boolean;\n    methods: PaymentMethod[];\n    selectedMethod?: PaymentMethod;\n    shouldShowStoreCredit?: boolean;\n    shouldDisableSubmit?: boolean;\n    shouldHidePaymentSubmitButton?: boolean;\n    shouldExecuteSpamCheck?: boolean;\n    termsConditionsText?: string;\n    termsConditionsUrl?: string;\n    usableStoreCredit?: number;\n    validationSchema?: ObjectSchema<Partial<PaymentFormValues>>;\n    isPaymentDataRequired(): boolean;\n    onMethodSelect?(method: PaymentMethod): void;\n    onStoreCreditChange?(useStoreCredit?: boolean): void;\n    onSubmit?(values: PaymentFormValues): void;\n    onUnhandledError?(error: Error): void;\n}\n\nconst PaymentForm: FunctionComponent<\n    PaymentFormProps & FormikProps<PaymentFormValues> & WithLanguageProps\n> = ({\n    availableStoreCredit = 0,\n    didExceedSpamLimit,\n    isEmbedded,\n    isInitializingPayment,\n    isPaymentDataRequired,\n    isTermsConditionsRequired,\n    isStoreCreditApplied,\n    isUsingMultiShipping,\n    language,\n    methods,\n    onMethodSelect,\n    onStoreCreditChange,\n    onUnhandledError,\n    resetForm,\n    selectedMethod,\n    shouldDisableSubmit,\n    shouldHidePaymentSubmitButton,\n    shouldExecuteSpamCheck,\n    termsConditionsText = '',\n    termsConditionsUrl,\n    usableStoreCredit = 0,\n    values,\n}) => {\n    const selectedMethodId = useMemo(() => {\n        if (!selectedMethod) {\n            return;\n        }\n\n        switch (selectedMethod.id) {\n            case PaymentMethodId.AmazonPay:\n                if (selectedMethod.initializationData.paymentToken) {\n                    return;\n                }\n\n                return selectedMethod.id;\n\n            default:\n                return selectedMethod.id;\n        }\n    }, [selectedMethod]);\n\n    const brandName = useMemo(() => {\n        if (!selectedMethod) {\n            return;\n        }\n\n        return (\n            selectedMethod.initializationData?.payPalCreditProductBrandName?.credit ||\n            selectedMethod.initializationData?.payPalCreditProductBrandName\n        );\n    }, [selectedMethod]);\n\n    if (shouldExecuteSpamCheck) {\n        return (\n            <SpamProtectionField\n                didExceedSpamLimit={didExceedSpamLimit}\n                onUnhandledError={onUnhandledError}\n            />\n        );\n    }\n\n    return (\n        <Form className=\"checkout-form\" testId=\"payment-form\">\n            {usableStoreCredit > 0 && (\n                <StoreCreditField\n                    availableStoreCredit={availableStoreCredit}\n                    isStoreCreditApplied={isStoreCreditApplied}\n                    name=\"useStoreCredit\"\n                    onChange={onStoreCreditChange}\n                    usableStoreCredit={usableStoreCredit}\n                />\n            )}\n\n            <PaymentMethodListFieldset\n                isEmbedded={isEmbedded}\n                isInitializingPayment={isInitializingPayment}\n                isPaymentDataRequired={isPaymentDataRequired}\n                isUsingMultiShipping={isUsingMultiShipping}\n                methods={methods}\n                onMethodSelect={onMethodSelect}\n                onUnhandledError={onUnhandledError}\n                resetForm={resetForm}\n                values={values}\n            />\n\n            <PaymentRedeemables />\n\n            {isTermsConditionsRequired && (\n                <TermsConditions\n                    termsConditionsText={termsConditionsText}\n                    termsConditionsUrl={termsConditionsUrl}\n                />\n            )}\n\n            <div className=\"form-actions\">\n                {shouldHidePaymentSubmitButton ? (\n                    <PaymentMethodSubmitButtonContainer />\n                ) : (\n                    <PaymentSubmitButton\n                        brandName={brandName}\n                        initialisationStrategyType={\n                            selectedMethod && selectedMethod.initializationStrategy?.type\n                        }\n                        isComplete={!!selectedMethod?.initializationData?.isComplete}\n                        isDisabled={shouldDisableSubmit}\n                        methodGateway={selectedMethod && selectedMethod.gateway}\n                        methodId={selectedMethodId}\n                        methodName={\n                            selectedMethod && getPaymentMethodName(language)(selectedMethod)\n                        }\n                        methodType={selectedMethod && selectedMethod.method}\n                    />\n                )}\n            </div>\n        </Form>\n    );\n};\n\nconst PaymentMethodSubmitButtonContainer: FunctionComponent = () => {\n    return <div className=\"submitButtonContainer\" id=\"checkout-payment-continue\" />;\n};\n\ninterface PaymentMethodListFieldsetProps {\n    isEmbedded?: boolean;\n    isInitializingPayment?: boolean;\n    isUsingMultiShipping?: boolean;\n    methods: PaymentMethod[];\n    values: PaymentFormValues;\n    isPaymentDataRequired(): boolean;\n    onMethodSelect?(method: PaymentMethod): void;\n    onUnhandledError?(error: Error): void;\n    resetForm(nextValues?: Partial<FormikState<PaymentFormValues>>): void;\n}\n\nconst PaymentMethodListFieldset: FunctionComponent<PaymentMethodListFieldsetProps> = ({\n    isEmbedded,\n    isInitializingPayment,\n    isPaymentDataRequired,\n    isUsingMultiShipping,\n    methods,\n    onMethodSelect = noop,\n    onUnhandledError,\n    resetForm,\n    values,\n}) => {\n    const { setSubmitted } = useContext(FormContext);\n\n    const handlePaymentMethodSelect = useCallback(\n        (method: PaymentMethod) => {\n            const updatedValues = {\n                ...values,\n                ccCustomerCode: '',\n                ccCvv: '',\n                ccDocument: '',\n                customerEmail: '',\n                customerMobile: '',\n                ccExpiry: '',\n                ccName: '',\n                ccNumber: '',\n                instrumentId: '',\n                paymentProviderRadio: getUniquePaymentMethodId(method.id, method.gateway),\n                shouldCreateAccount: true,\n                shouldSaveInstrument: false,\n            };\n\n            resetForm({ values: updatedValues });\n            setSubmitted(false);\n            onMethodSelect(method);\n        },\n        [values, onMethodSelect, resetForm, setSubmitted],\n    );\n\n    return (\n        <Fieldset\n            legend={\n                <Legend hidden>\n                    <TranslatedString id=\"payment.payment_methods_text\" />\n                </Legend>\n            }\n        >\n            {!isPaymentDataRequired() && <StoreCreditOverlay />}\n\n            <Extension region={ExtensionRegion.PaymentPaymentMethodListBefore}/>\n\n            <PaymentMethodList\n                isEmbedded={isEmbedded}\n                isInitializingPayment={isInitializingPayment}\n                isUsingMultiShipping={isUsingMultiShipping}\n                methods={methods}\n                onSelect={handlePaymentMethodSelect}\n                onUnhandledError={onUnhandledError}\n            />\n        </Fieldset>\n    );\n};\n\nconst paymentFormConfig: WithFormikConfig<PaymentFormProps & WithLanguageProps, PaymentFormValues> =\n    {\n        mapPropsToValues: ({ defaultGatewayId, defaultMethodId }) => ({\n            ccCustomerCode: '',\n            ccCvv: '',\n            ccDocument: '',\n            customerEmail: '',\n            customerMobile: '',\n            ccExpiry: '',\n            ccName: '',\n            ccNumber: '',\n            paymentProviderRadio: getUniquePaymentMethodId(defaultMethodId, defaultGatewayId),\n            instrumentId: '',\n            shouldCreateAccount: true,\n            shouldSaveInstrument: false,\n            terms: false,\n            hostedForm: {\n                cardType: '',\n                errors: {\n                    cardCode: '',\n                    cardCodeVerification: '',\n                    cardExpiry: '',\n                    cardName: '',\n                    cardNumber: '',\n                    cardNumberVerification: '',\n                },\n            },\n            accountNumber: '',\n            routingNumber: '',\n        }),\n\n        handleSubmit: (values, { props: { onSubmit = noop } }) => {\n            onSubmit(\n                omitBy(\n                    values,\n                    (value, key) => isNil(value) || value === '' || key === 'hostedForm',\n                ),\n            );\n        },\n\n        validationSchema: ({\n            language,\n            isTermsConditionsRequired = false,\n            validationSchema,\n        }: PaymentFormProps & WithLanguageProps) =>\n            getPaymentValidationSchema({\n                additionalValidation: validationSchema,\n                isTermsConditionsRequired,\n                language,\n            }),\n    };\n\nexport default withLanguage(withFormik(paymentFormConfig)(memo(PaymentForm)));\n","import {\n    type CartChangedError,\n    type CheckoutSelectors,\n    type CheckoutService,\n    type CheckoutSettings,\n    type OrderRequestBody,\n    type PaymentMethod,\n} from '@bigcommerce/checkout-sdk';\nimport { memoizeOne } from '@bigcommerce/memoize';\nimport { compact, find, isEmpty, noop } from 'lodash';\nimport React, { Component, type ReactNode } from 'react';\nimport { type ObjectSchema } from 'yup';\n\nimport { type AnalyticsContextProps } from '@bigcommerce/checkout/analytics';\nimport { type ErrorLogger } from '@bigcommerce/checkout/error-handling-utils';\nimport { withLanguage, type WithLanguageProps } from '@bigcommerce/checkout/locale';\nimport { type CheckoutContextProps, type PaymentFormValues } from '@bigcommerce/checkout/payment-integration-api';\nimport { ChecklistSkeleton } from '@bigcommerce/checkout/ui';\n\nimport { withAnalytics } from '../analytics';\nimport { withCheckout } from '../checkout';\nimport {\n    ErrorModal,\n    type ErrorModalOnCloseProps,\n    isCartChangedError,\n    isErrorWithType,\n} from '../common/error';\nimport { EMPTY_ARRAY } from '../common/utility';\nimport { TermsConditionsType } from '../termsConditions';\n\nimport mapSubmitOrderErrorMessage, { mapSubmitOrderErrorTitle } from './mapSubmitOrderErrorMessage';\nimport mapToOrderRequestBody from './mapToOrderRequestBody';\nimport PaymentContext from './PaymentContext';\nimport PaymentForm from './PaymentForm';\nimport {\n    getUniquePaymentMethodId,\n    PaymentMethodId,\n    PaymentMethodProviderType,\n} from './paymentMethod';\n\nexport interface PaymentProps {\n    errorLogger: ErrorLogger;\n    isEmbedded?: boolean;\n    isUsingMultiShipping?: boolean;\n    checkEmbeddedSupport?(methodIds: string[]): void; // TODO: We're currently doing this check in multiple places, perhaps we should move it up so this check get be done in a single place instead.\n    onCartChangedError?(error: CartChangedError): void;\n    onFinalize?(): void;\n    onFinalizeError?(error: Error): void;\n    onReady?(): void;\n    onSubmit?(): void;\n    onSubmitError?(error: Error): void;\n    onUnhandledError?(error: Error): void;\n}\n\ninterface WithCheckoutPaymentProps {\n    availableStoreCredit: number;\n    cartUrl: string;\n    defaultMethod?: PaymentMethod;\n    finalizeOrderError?: Error;\n    isInitializingPayment: boolean;\n    isSubmittingOrder: boolean;\n    isStoreCreditApplied: boolean;\n    isTermsConditionsRequired: boolean;\n    methods: PaymentMethod[];\n    shouldExecuteSpamCheck: boolean;\n    shouldLocaliseErrorMessages: boolean;\n    submitOrderError?: Error;\n    termsConditionsText?: string;\n    termsConditionsUrl?: string;\n    usableStoreCredit: number;\n    applyStoreCredit(useStoreCredit: boolean): Promise<CheckoutSelectors>;\n    clearError(error: Error): void;\n    finalizeOrderIfNeeded(): Promise<CheckoutSelectors>;\n    isPaymentDataRequired(): boolean;\n    loadCheckout(): Promise<CheckoutSelectors>;\n    loadPaymentMethods(): Promise<CheckoutSelectors>;\n    submitOrder(values: OrderRequestBody): Promise<CheckoutSelectors>;\n    checkoutServiceSubscribe: CheckoutService['subscribe'];\n}\n\ninterface PaymentState {\n    didExceedSpamLimit: boolean;\n    isReady: boolean;\n    selectedMethod?: PaymentMethod;\n    shouldDisableSubmit: { [key: string]: boolean };\n    shouldHidePaymentSubmitButton: { [key: string]: boolean };\n    submitFunctions: { [key: string]: ((values: PaymentFormValues) => void) | null };\n    validationSchemas: { [key: string]: ObjectSchema<Partial<PaymentFormValues>> | null };\n}\n\nclass Payment extends Component<\n    PaymentProps & WithCheckoutPaymentProps & WithLanguageProps & AnalyticsContextProps,\n    PaymentState\n> {\n    state: PaymentState = {\n        didExceedSpamLimit: false,\n        isReady: false,\n        shouldDisableSubmit: {},\n        shouldHidePaymentSubmitButton: {},\n        validationSchemas: {},\n        submitFunctions: {},\n    };\n\n    private grandTotalChangeUnsubscribe?: () => void;\n\n    private getContextValue = memoizeOne(() => {\n        return {\n            disableSubmit: this.disableSubmit,\n            setSubmit: this.setSubmit,\n            setValidationSchema: this.setValidationSchema,\n            hidePaymentSubmitButton: this.hidePaymentSubmitButton,\n        };\n    });\n\n    async componentDidMount(): Promise<void> {\n        const {\n            finalizeOrderIfNeeded,\n            onFinalize = noop,\n            onFinalizeError = noop,\n            onReady = noop,\n            usableStoreCredit,\n            checkoutServiceSubscribe,\n        } = this.props;\n\n        if (usableStoreCredit) {\n            this.handleStoreCreditChange(true);\n        }\n\n        await this.loadPaymentMethodsOrThrow();\n\n        try {\n            const state = await finalizeOrderIfNeeded();\n            const order = state.data.getOrder();\n\n            onFinalize(order?.orderId);\n        } catch (error) {\n            if (isErrorWithType(error) && error.type !== 'order_finalization_not_required') {\n                onFinalizeError(error);\n            }\n        }\n\n        this.grandTotalChangeUnsubscribe = checkoutServiceSubscribe(\n            () => this.handleCartTotalChange(),\n            ({ data }) => data.getCheckout()?.grandTotal,\n            ({ data }) => data.getCheckout()?.outstandingBalance,\n        );\n\n        window.addEventListener('beforeunload', this.handleBeforeUnload);\n        this.setState({ isReady: true });\n        onReady();\n    }\n\n    componentDidUpdate(): void {\n        const { checkEmbeddedSupport = noop, methods } = this.props;\n\n        checkEmbeddedSupport(methods.map(({ id }) => id));\n    }\n\n    componentWillUnmount(): void {\n        if (this.grandTotalChangeUnsubscribe) {\n            this.grandTotalChangeUnsubscribe();\n            this.grandTotalChangeUnsubscribe = undefined;\n        }\n\n        window.removeEventListener('beforeunload', this.handleBeforeUnload);\n    }\n\n    render(): ReactNode {\n        const {\n            defaultMethod,\n            finalizeOrderError,\n            isInitializingPayment,\n            isUsingMultiShipping,\n            methods,\n            applyStoreCredit,\n            ...rest\n        } = this.props;\n\n        const {\n            didExceedSpamLimit,\n            isReady,\n            selectedMethod = defaultMethod,\n            shouldDisableSubmit,\n            validationSchemas,\n            shouldHidePaymentSubmitButton,\n        } = this.state;\n\n        const uniqueSelectedMethodId =\n            selectedMethod && getUniquePaymentMethodId(selectedMethod.id, selectedMethod.gateway);\n\n        return (\n            <PaymentContext.Provider value={this.getContextValue()}>\n                <ChecklistSkeleton isLoading={!isReady}>\n                    {!isEmpty(methods) && defaultMethod && (\n                        <PaymentForm\n                            {...rest}\n                            defaultGatewayId={defaultMethod.gateway}\n                            defaultMethodId={defaultMethod.id}\n                            didExceedSpamLimit={didExceedSpamLimit}\n                            isInitializingPayment={isInitializingPayment}\n                            isUsingMultiShipping={isUsingMultiShipping}\n                            methods={methods}\n                            onMethodSelect={this.setSelectedMethod}\n                            onStoreCreditChange={this.handleStoreCreditChange}\n                            onSubmit={this.handleSubmit}\n                            onUnhandledError={this.handleError}\n                            selectedMethod={selectedMethod}\n                            shouldDisableSubmit={\n                                (uniqueSelectedMethodId &&\n                                    shouldDisableSubmit[uniqueSelectedMethodId]) ||\n                                undefined\n                            }\n                            shouldHidePaymentSubmitButton={\n                                (uniqueSelectedMethodId &&\n                                    rest.isPaymentDataRequired() &&\n                                    shouldHidePaymentSubmitButton[uniqueSelectedMethodId]) ||\n                                undefined\n                            }\n                            validationSchema={\n                                (uniqueSelectedMethodId &&\n                                    validationSchemas[uniqueSelectedMethodId]) ||\n                                undefined\n                            }\n                        />\n                    )}\n                </ChecklistSkeleton>\n\n                {this.renderOrderErrorModal()}\n                {this.renderEmbeddedSupportErrorModal()}\n            </PaymentContext.Provider>\n        );\n    }\n\n    private renderOrderErrorModal(): ReactNode {\n        const { finalizeOrderError, language, shouldLocaliseErrorMessages, submitOrderError } =\n            this.props;\n\n        // FIXME: Export correct TS interface\n        const error: any = submitOrderError || finalizeOrderError;\n\n        if (\n            !error ||\n            error.type === 'order_finalization_not_required' ||\n            error.type === 'payment_cancelled' ||\n            error.type === 'payment_invalid_form' ||\n            error.type === 'spam_protection_not_completed' ||\n            error.type === 'invalid_hosted_form_value'\n        ) {\n            return null;\n        }\n\n        return (\n            <ErrorModal\n                error={error}\n                message={mapSubmitOrderErrorMessage(\n                    error,\n                    language.translate.bind(language),\n                    shouldLocaliseErrorMessages,\n                )}\n                onClose={this.handleCloseModal}\n                title={mapSubmitOrderErrorTitle(error, language.translate.bind(language))}\n            />\n        );\n    }\n\n    private renderEmbeddedSupportErrorModal(): ReactNode {\n        const { checkEmbeddedSupport = noop, methods } = this.props;\n\n        try {\n            checkEmbeddedSupport(methods.map(({ id }) => id));\n        } catch (error) {\n            if (error instanceof Error) {\n                return <ErrorModal error={error} onClose={this.handleCloseModal} />;\n            }\n        }\n\n        return null;\n    }\n\n    private disableSubmit: (method: PaymentMethod, disabled?: boolean) => void = (\n        method,\n        disabled = true,\n    ) => {\n        const uniqueId = getUniquePaymentMethodId(method.id, method.gateway);\n        const { shouldDisableSubmit } = this.state;\n\n        if (shouldDisableSubmit[uniqueId] === disabled) {\n            return;\n        }\n\n        this.setState({\n            shouldDisableSubmit: {\n                ...shouldDisableSubmit,\n                [uniqueId]: disabled,\n            },\n        });\n    };\n\n    private hidePaymentSubmitButton: (method: PaymentMethod, disabled?: boolean) => void = (\n        method,\n        disabled = true,\n    ) => {\n        const uniqueId = getUniquePaymentMethodId(method.id, method.gateway);\n        const { shouldHidePaymentSubmitButton } = this.state;\n\n        if (shouldHidePaymentSubmitButton[uniqueId] === disabled) {\n            return;\n        }\n\n        this.setState({\n            shouldHidePaymentSubmitButton: {\n                ...shouldHidePaymentSubmitButton,\n                [uniqueId]: disabled,\n            },\n        });\n    };\n\n    private handleBeforeUnload: (event: BeforeUnloadEvent) => string | undefined = (event) => {\n        const { defaultMethod, isSubmittingOrder, language } = this.props;\n        const { selectedMethod = defaultMethod } = this.state;\n\n        if (\n            !isSubmittingOrder ||\n            !selectedMethod ||\n            selectedMethod.type === PaymentMethodProviderType.Hosted ||\n            selectedMethod.type === PaymentMethodProviderType.PPSDK ||\n            selectedMethod.skipRedirectConfirmationAlert\n        ) {\n            return;\n        }\n\n        const message = language.translate('common.leave_warning');\n\n        event.returnValue = message;\n\n        return message;\n    };\n\n    private handleCloseModal: (event: Event, props: ErrorModalOnCloseProps) => Promise<void> =\n        async (_, { error }) => {\n            if (!error) {\n                return;\n            }\n\n            const { cartUrl, clearError, loadCheckout } = this.props;\n            const { type: errorType } = error as any; // FIXME: Export correct TS interface\n\n            if (\n                errorType === 'provider_fatal_error' ||\n                errorType === 'order_could_not_be_finalized_error'\n            ) {\n                window.location.replace(cartUrl || '/');\n            }\n\n            if (errorType === 'tax_provider_unavailable') {\n                window.location.reload();\n            }\n\n            if (errorType === 'cart_consistency') {\n                await loadCheckout();\n            }\n\n            if (isErrorWithType(error) && error.body) {\n                const { body, headers, status } = error;\n\n                if (body.type === 'provider_error' && headers.location) {\n                    window.top?.location.assign(headers.location);\n                }\n\n                // Reload the checkout object to get the latest `shouldExecuteSpamCheck` value,\n                // which will in turn make `SpamProtectionField` visible again.\n                // NOTE: As a temporary fix, we're checking the status code instead of the error\n                // type because of an issue with Nginx config, which causes the server to return\n                // HTML page instead of JSON response when there is a 429 error.\n                if (\n                    status === 429 ||\n                    body.type === 'spam_protection_expired' ||\n                    body.type === 'spam_protection_failed'\n                ) {\n                    this.setState({ didExceedSpamLimit: true });\n\n                    await loadCheckout();\n                }\n            }\n\n            clearError(error);\n        };\n\n    private handleStoreCreditChange: (useStoreCredit: boolean) => void = async (useStoreCredit) => {\n        const { applyStoreCredit, onUnhandledError = noop } = this.props;\n\n        try {\n            await applyStoreCredit(useStoreCredit);\n        } catch (e) {\n            onUnhandledError(e);\n        }\n    };\n\n    private handleError: (error: Error) => void = (error: Error) => {\n        const { onUnhandledError = noop, errorLogger } = this.props;\n\n        const { type } = error as any;\n\n        if (type === 'unexpected_detachment') {\n            errorLogger.log(error);\n\n            return;\n        }\n\n        return onUnhandledError(error);\n    };\n\n    private handleSubmit: (values: PaymentFormValues) => void = async (values) => {\n        const {\n            defaultMethod,\n            loadPaymentMethods,\n            isPaymentDataRequired,\n            onCartChangedError = noop,\n            onSubmit = noop,\n            onSubmitError = noop,\n            submitOrder,\n            analyticsTracker\n        } = this.props;\n\n        const { selectedMethod = defaultMethod, submitFunctions } = this.state;\n\n        analyticsTracker.clickPayButton({shouldCreateAccount: values.shouldCreateAccount});\n\n        const customSubmit =\n            selectedMethod &&\n            submitFunctions[getUniquePaymentMethodId(selectedMethod.id, selectedMethod.gateway)];\n\n        if (customSubmit) {\n            return customSubmit(values);\n        }\n\n        try {\n            const state = await submitOrder(mapToOrderRequestBody(values, isPaymentDataRequired()));\n            const order = state.data.getOrder();\n\n            analyticsTracker.paymentComplete();\n\n            onSubmit(order?.orderId);\n        } catch (error) {\n            analyticsTracker.paymentRejected();\n\n            if (isErrorWithType(error) && error.type === 'payment_method_invalid') {\n                return loadPaymentMethods();\n            }\n\n            if (isCartChangedError(error)) {\n                return onCartChangedError(error);\n            }\n\n            onSubmitError(error);\n        }\n    };\n\n    private setSelectedMethod: (method?: PaymentMethod) => void = (method) => {\n        const { selectedMethod } = this.state;\n\n        if (selectedMethod === method) {\n            return;\n        }\n\n        if (method) {\n            this.trackSelectedPaymentMethod(method);\n        }\n\n        this.setState({ selectedMethod: method });\n    };\n\n    private setSubmit: (\n        method: PaymentMethod,\n        fn: (values: PaymentFormValues) => void | null,\n    ) => void = (method, fn) => {\n        const uniqueId = getUniquePaymentMethodId(method.id, method.gateway);\n        const { submitFunctions } = this.state;\n\n        if (submitFunctions[uniqueId] === fn) {\n            return;\n        }\n\n        this.setState({\n            submitFunctions: {\n                ...submitFunctions,\n                [uniqueId]: fn,\n            },\n        });\n    };\n\n    private setValidationSchema: (\n        method: PaymentMethod,\n        schema: ObjectSchema<Partial<PaymentFormValues>> | null,\n    ) => void = (method, schema) => {\n        const uniqueId = getUniquePaymentMethodId(method.id, method.gateway);\n        const { validationSchemas } = this.state;\n\n        if (validationSchemas[uniqueId] === schema) {\n            return;\n        }\n\n        this.setState({\n            validationSchemas: {\n                ...validationSchemas,\n                [uniqueId]: schema,\n            },\n        });\n    };\n\n    private trackSelectedPaymentMethod(method: PaymentMethod) {\n        const { analyticsTracker } = this.props;\n\n        const methodName = method.config.displayName || method.id;\n        const methodId = method.id;\n\n        analyticsTracker.selectedPaymentMethod(methodName, methodId);\n    }\n\n    private async loadPaymentMethodsOrThrow(): Promise<void> {\n        const {\n            loadPaymentMethods,\n            onUnhandledError = noop,\n        } = this.props;\n\n        try {\n            await loadPaymentMethods();\n\n            const selectedMethod = this.state.selectedMethod || this.props.defaultMethod;\n\n            if (selectedMethod) {\n                this.trackSelectedPaymentMethod(selectedMethod);\n            }\n        } catch (error) {\n            onUnhandledError(error);\n        }\n    }\n\n    private async handleCartTotalChange(): Promise<void> {\n        const { isReady } = this.state;\n\n        if (!isReady) {\n            return;\n        }\n\n        this.setState({ isReady: false });\n\n        await this.loadPaymentMethodsOrThrow();\n\n        this.setState({ isReady: true });\n    }\n}\n\nexport function mapToPaymentProps({\n        checkoutService,\n        checkoutState,\n}: CheckoutContextProps): WithCheckoutPaymentProps | null {\n    const {\n        data: {\n            getCheckout,\n            getConfig,\n            getCustomer,\n            getConsignments,\n            getOrder,\n            getPaymentMethod,\n            getPaymentMethods,\n            isPaymentDataRequired,\n            getPaymentProviderCustomer,\n        },\n        errors: { getFinalizeOrderError, getSubmitOrderError },\n        statuses: { isInitializingPayment, isSubmittingOrder },\n    } = checkoutState;\n\n    const checkout = getCheckout();\n    const config = getConfig();\n    const customer = getCustomer();\n    const consignments = getConsignments();\n    const paymentProviderCustomer = getPaymentProviderCustomer();\n\n    const { isComplete = false } = getOrder() || {};\n    let methods = getPaymentMethods() || EMPTY_ARRAY;\n\n    // TODO: In accordance with the checkout team, this functionality is temporary and will be implemented in the backend instead.\n    if (paymentProviderCustomer?.stripeLinkAuthenticationState) {\n        const stripeUpePaymentMethod = methods.filter(method =>\n            method.id === 'card' && method.gateway === PaymentMethodId.StripeUPE\n        );\n\n        methods = stripeUpePaymentMethod.length ? stripeUpePaymentMethod : methods;\n    }\n\n    if (!checkout || !config || !customer || isComplete) {\n        return null;\n    }\n\n    const {\n        enableTermsAndConditions: isTermsConditionsEnabled,\n        features,\n        orderTermsAndConditionsType: termsConditionsType,\n        orderTermsAndConditions: termsCondtitionsText,\n        orderTermsAndConditionsLink: termsCondtitionsUrl,\n    } = config.checkoutSettings as CheckoutSettings & { orderTermsAndConditionsLocation: string };\n\n    const isTermsConditionsRequired = isTermsConditionsEnabled;\n    const selectedPayment = find(checkout.payments, {\n        providerType: PaymentMethodProviderType.Hosted,\n    });\n\n    const { isStoreCreditApplied } = checkout;\n\n    let selectedPaymentMethod;\n    let filteredMethods;\n\n    filteredMethods = methods.filter((method: PaymentMethod) => {\n        if (method.id === PaymentMethodId.Bolt && method.initializationData) {\n            return !!method.initializationData.showInCheckout;\n        }\n\n        if (method.id === PaymentMethodId.BraintreeLocalPaymentMethod) {\n            return false;\n        }\n\n        return true;\n    });\n\n    if (consignments && consignments.length > 1) {\n        const multiShippingIncompatibleMethodIds: string[] = [\n            PaymentMethodId.AmazonPay,\n        ];\n\n        filteredMethods = methods.filter((method: PaymentMethod) => {\n            return !multiShippingIncompatibleMethodIds.includes(method.id);\n        });\n    }\n\n    if (selectedPayment) {\n        selectedPaymentMethod = getPaymentMethod(\n            selectedPayment.providerId,\n            selectedPayment.gatewayId,\n        );\n        filteredMethods = selectedPaymentMethod\n            ? compact([selectedPaymentMethod])\n            : filteredMethods;\n    } else {\n        selectedPaymentMethod = find(filteredMethods, {\n            config: { hasDefaultStoredInstrument: true },\n        });\n        // eslint-disable-next-line no-self-assign\n        filteredMethods = filteredMethods;\n    }\n\n    return {\n        applyStoreCredit: checkoutService.applyStoreCredit,\n        availableStoreCredit: customer.storeCredit,\n        cartUrl: config.links.cartLink,\n        clearError: checkoutService.clearError,\n        defaultMethod: selectedPaymentMethod || filteredMethods[0],\n        finalizeOrderError: getFinalizeOrderError(),\n        finalizeOrderIfNeeded: checkoutService.finalizeOrderIfNeeded,\n        loadCheckout: checkoutService.loadCheckout,\n        isInitializingPayment: isInitializingPayment(),\n        isPaymentDataRequired,\n        isStoreCreditApplied,\n        isSubmittingOrder: isSubmittingOrder(),\n        isTermsConditionsRequired,\n        loadPaymentMethods: checkoutService.loadPaymentMethods,\n        methods: filteredMethods,\n        shouldExecuteSpamCheck: checkout.shouldExecuteSpamCheck,\n        shouldLocaliseErrorMessages:\n            features['PAYMENTS-6799.localise_checkout_payment_error_messages'],\n        submitOrder: checkoutService.submitOrder,\n        submitOrderError: getSubmitOrderError(),\n        checkoutServiceSubscribe: checkoutService.subscribe,\n        termsConditionsText:\n            isTermsConditionsRequired && termsConditionsType === TermsConditionsType.TextArea\n                ? termsCondtitionsText\n                : undefined,\n        termsConditionsUrl:\n            isTermsConditionsRequired && termsConditionsType === TermsConditionsType.Link\n                ? termsCondtitionsUrl\n                : undefined,\n        usableStoreCredit:\n            checkout.grandTotal > 0 ? Math.min(checkout.grandTotal, customer.storeCredit || 0) : 0,\n    };\n}\n\nexport default withAnalytics(withLanguage(withCheckout(mapToPaymentProps)(Payment)));\n","import { type OrderPaymentRequestBody, type OrderRequestBody } from '@bigcommerce/checkout-sdk';\nimport { isEmpty, isNil, omitBy } from 'lodash';\n\nimport { type PaymentFormValues } from '@bigcommerce/checkout/payment-integration-api';\n\nimport { unformatCreditCardExpiryDate, unformatCreditCardNumber } from './creditCard';\nimport {\n    hasCreditCardExpiry,\n    hasCreditCardNumber,\n    parseUniquePaymentMethodId,\n} from './paymentMethod';\n\nexport default function mapToOrderRequestBody(\n    values: PaymentFormValues,\n    isPaymentDataRequired: boolean,\n): OrderRequestBody {\n    if (!isPaymentDataRequired) {\n        return {};\n    }\n\n    const { paymentProviderRadio, ...rest } = values;\n    const { methodId, gatewayId } = parseUniquePaymentMethodId(paymentProviderRadio);\n    const payload: OrderRequestBody = {\n        payment: { gatewayId, methodId },\n    };\n    const paymentData = omitBy(\n        {\n            ...rest,\n            ccExpiry: hasCreditCardExpiry(values)\n                ? unformatCreditCardExpiryDate(values.ccExpiry)\n                : null,\n            ccNumber: hasCreditCardNumber(values)\n                ? unformatCreditCardNumber(values.ccNumber)\n                : null,\n        },\n        isNil,\n    ) as OrderPaymentRequestBody['paymentData'];\n\n    if (payload.payment && !isEmpty(paymentData)) {\n        payload.payment.paymentData = paymentData;\n    }\n\n    return payload;\n}\n","import { type CartChangedError } from '@bigcommerce/checkout-sdk';\n\nexport default function isCartChangedError(error: unknown): error is CartChangedError {\n    const requestError = error as CartChangedError;\n\n    return requestError.type === 'cart_changed';\n}\n","import { connect } from 'formik';\nimport React, { type ComponentType, type FunctionComponent, memo } from 'react';\nimport shallowEqual from 'shallowequal';\n\nimport type ConnectFormikProps from './ConnectFormikProps';\n\nexport default function connectFormik<TProps extends ConnectFormikProps<TValues>, TValues = any>(\n    OriginalComponent: ComponentType<TProps>,\n): ComponentType<Omit<TProps, keyof ConnectFormikProps<TValues>>> {\n    const InnerComponent: FunctionComponent<TProps> = memo(\n        (props) => <OriginalComponent {...props} />,\n        ({ formik: prevFormik, ...prevProps }, { formik: nextFormik, ...nextProps }) =>\n            shallowEqual(prevFormik, nextFormik) && shallowEqual(prevProps, nextProps),\n    );\n\n    const DecoratedComponent = connect<TProps, TValues>(InnerComponent) as ComponentType<\n        Omit<TProps, keyof ConnectFormikProps<TValues>>\n    >;\n\n    DecoratedComponent.displayName = `ConnectFormik(${\n        OriginalComponent.displayName || OriginalComponent.name\n    })`;\n\n    return DecoratedComponent;\n}\n","import React, {\n    type KeyboardEvent,\n    type KeyboardEventHandler,\n    type MouseEventHandler,\n    type ReactElement,\n    type ReactNode,\n    useEffect,\n    useRef,\n    useState,\n} from 'react';\n\nexport interface ModalTriggerProps {\n    children(props: { onClick: MouseEventHandler; onKeyPress: KeyboardEventHandler<HTMLDivElement> }): ReactNode;\n    modal(props: ModalTriggerModalProps): ReactNode;\n}\n\nexport interface ModalTriggerModalProps {\n    isOpen: boolean;\n    onRequestClose(): void;\n}\n\nconst ModalTrigger = ({ children, modal }: ModalTriggerProps): ReactElement => {\n    const [isOpen, setIsOpen] = useState(false);\n    const canHandleEventRef = useRef(false);\n\n    useEffect(() => {\n        canHandleEventRef.current = true;\n\n        return () => {\n            canHandleEventRef.current = false;\n        };\n    }, []);\n\n    const handleOpen = (): void => {\n        if (!canHandleEventRef.current) {\n            return;\n        }\n\n        setIsOpen(true);\n    };\n\n    const handleClose = (): void => {\n        if (!canHandleEventRef.current) {\n            return;\n        }\n\n        setIsOpen(false);\n    };\n\n    const handleKeyOpen = (keyboardEvent: KeyboardEvent<HTMLElement>): void => {\n        if (keyboardEvent.key === 'Enter') {\n            handleOpen();\n        }\n    };\n\n    return (\n        <>\n            {children({\n                onClick: handleOpen,\n                onKeyPress: handleKeyOpen,\n            })}\n\n            {modal({\n                isOpen,\n                onRequestClose: handleClose,\n            })}\n        </>\n    );\n};\n\nexport default ModalTrigger;\n","import {\n    type AdyenValidationState,\n    type CardInstrument,\n    type LanguageService,\n    type PaymentMethod,\n} from '@bigcommerce/checkout-sdk';\nimport classNames from 'classnames';\nimport React, { type FunctionComponent, useEffect, useState } from 'react';\n\nexport type FieldsValidation = { [key in AdyenCardFields]?: AdyenValidationState };\n\nenum AdyenCardFields {\n    CardNumber = 'encryptedCardNumber',\n    SecurityCode = 'encryptedSecurityCode',\n    ExpiryDate = 'encryptedExpiryDate',\n}\n\nexport interface AdyenV2CardValidationProps {\n    verificationFieldsContainerId?: string;\n    shouldShowNumberField: boolean;\n    paymentMethod: PaymentMethod;\n    cardValidationState?: AdyenValidationState;\n    selectedInstrument?: CardInstrument;\n    language?: LanguageService;\n}\n\nconst getInitialValidationState = ({\n    shouldShowNumberField,\n    method,\n}: {\n    shouldShowNumberField: boolean;\n    method: string;\n}) => {\n    const validationState: FieldsValidation = {};\n\n    if (shouldShowNumberField) {\n        validationState[AdyenCardFields.CardNumber] = { valid: false };\n    }\n\n    if (method === 'scheme') {\n        validationState[AdyenCardFields.SecurityCode] = { valid: false };\n    }\n\n    if (method === 'bcmc') {\n        validationState[AdyenCardFields.ExpiryDate] = { valid: false };\n    }\n\n    return validationState;\n};\n\nconst isFieldInvalid = (fieldKey: AdyenCardFields, fieldsValidation: FieldsValidation): boolean =>\n    !!fieldsValidation[fieldKey] && !fieldsValidation[fieldKey].valid;\n\nconst AdyenV2CardValidation: FunctionComponent<AdyenV2CardValidationProps> = ({\n    verificationFieldsContainerId,\n    shouldShowNumberField,\n    selectedInstrument,\n    paymentMethod,\n    cardValidationState,\n    language,\n}) => {\n    const [fieldsValidation, setFieldsValidation] = useState<FieldsValidation>(\n        getInitialValidationState({ shouldShowNumberField, method: paymentMethod.method }),\n    );\n\n    useEffect(() => {\n        if (!cardValidationState) {\n            return;\n        }\n\n        if (\n            cardValidationState.fieldType &&\n            (!fieldsValidation[cardValidationState.fieldType] ||\n                fieldsValidation[cardValidationState.fieldType]?.valid !==\n                    cardValidationState.valid)\n        ) {\n            if (cardValidationState.fieldType === AdyenCardFields.CardNumber) {\n                setFieldsValidation({\n                    ...fieldsValidation,\n                    [AdyenCardFields.CardNumber]:\n                        cardValidationState.endDigits !== selectedInstrument?.last4\n                            ? { ...cardValidationState, valid: false }\n                            : { ...cardValidationState },\n                });\n            } else {\n                setFieldsValidation({\n                    ...fieldsValidation,\n                    [cardValidationState.fieldType]: cardValidationState,\n                });\n            }\n        }\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [cardValidationState, setFieldsValidation, selectedInstrument?.last4]);\n\n    useEffect(() => {\n        if (selectedInstrument?.bigpayToken) {\n            setFieldsValidation(\n                getInitialValidationState({ shouldShowNumberField, method: paymentMethod.method }),\n            );\n        }\n    }, [selectedInstrument?.bigpayToken, paymentMethod.method, shouldShowNumberField]);\n\n    const showValidationIcon = (key: AdyenCardFields) =>\n        isFieldInvalid(key, fieldsValidation) && (\n            <span\n                className=\"adyen-checkout-input__inline-validation adyen-checkout-input__inline-validation--invalid\"\n                style={{ transform: 'none', right: '20px' }}\n            >\n                <img\n                    alt=\"adyen-checkout-icon\"\n                    className=\"adyen-checkout__icon\"\n                    src=\"https://checkoutshopper-test.adyen.com/checkoutshopper/images/components/field_error.svg\"\n                />\n            </span>\n        );\n\n    return (\n        <div>\n            {shouldShowNumberField && (\n                <p>\n                    <strong>\n                        {language?.translate(\n                            'payment.instrument_trusted_shipping_address_title_text',\n                        )}\n                    </strong>\n\n                    <br />\n\n                    {language?.translate('payment.instrument_trusted_shipping_address_text')}\n                </p>\n            )}\n\n            <div className=\"form-ccFields\" id={verificationFieldsContainerId}>\n                {shouldShowNumberField && (\n                    <div\n                        className={classNames(\n                            'form-field',\n                            'form-field--ccNumber',\n                            {\n                                'form-field--ccNumber--hasExpiryDate':\n                                    paymentMethod.method === 'bcmc',\n                            },\n                            // This div is hiding by CSS because there is an Adyen library in\n                            // checkout-sdk which mounts verification fields and if is removed with JS this mounting event will be thrown an error\n                            { 'form-field-ccNumber--hide': !shouldShowNumberField },\n                        )}\n                    >\n                        <label htmlFor={AdyenCardFields.CardNumber}>\n                            {language?.translate('payment.credit_card_number_label')}\n                        </label>\n                        <div\n                            className={classNames(\n                                'form-input',\n                                'optimizedCheckout-form-input',\n                                'has-icon',\n                                'adyen-checkout__input-wrapper',\n                                {\n                                    'adyen-checkout__input--error': isFieldInvalid(\n                                        AdyenCardFields.CardNumber,\n                                        fieldsValidation,\n                                    ),\n                                },\n                            )}\n                            data-cse={AdyenCardFields.CardNumber}\n                            id={AdyenCardFields.CardNumber}\n                        />\n                        {showValidationIcon(AdyenCardFields.CardNumber)}\n                    </div>\n                )}\n\n                {paymentMethod.method === 'scheme' && (\n                    <div className=\"form-field form-ccFields-field--ccCvv\">\n                        <label htmlFor={AdyenCardFields.SecurityCode}>\n                            {language?.translate('payment.credit_card_cvv_label')}\n                        </label>\n                        <div\n                            className={classNames(\n                                'form-input',\n                                'optimizedCheckout-form-input',\n                                'has-icon',\n                                'adyen-checkout__input-wrapper',\n                                {\n                                    'adyen-checkout__input--error': isFieldInvalid(\n                                        AdyenCardFields.SecurityCode,\n                                        fieldsValidation,\n                                    ),\n                                },\n                            )}\n                            data-cse={AdyenCardFields.SecurityCode}\n                            id={AdyenCardFields.SecurityCode}\n                        />\n                        {showValidationIcon(AdyenCardFields.SecurityCode)}\n                    </div>\n                )}\n                {paymentMethod.method === 'bcmc' && (\n                    <div className=\"form-field form-field--ccExpiry\">\n                        <label htmlFor={AdyenCardFields.ExpiryDate}>\n                            {language?.translate('payment.credit_card_expiration_label')}\n                        </label>\n                        <div\n                            className={classNames(\n                                'form-input',\n                                'optimizedCheckout-form-input',\n                                'has-icon',\n                                'adyen-checkout__input-wrapper',\n                                {\n                                    'adyen-checkout__input--error': isFieldInvalid(\n                                        AdyenCardFields.ExpiryDate,\n                                        fieldsValidation,\n                                    ),\n                                },\n                            )}\n                            data-cse={AdyenCardFields.ExpiryDate}\n                            id={AdyenCardFields.ExpiryDate}\n                        />\n                        {showValidationIcon(AdyenCardFields.ExpiryDate)}\n                    </div>\n                )}\n            </div>\n        </div>\n    );\n};\n\nexport default AdyenV2CardValidation;\n","import { type CardInstrument } from '@bigcommerce/checkout-sdk';\nimport React, { type FunctionComponent, type ReactNode } from 'react';\n\nimport {\n    type HostedWidgetComponentProps,\n    HostedWidgetPaymentComponent,\n} from '@bigcommerce/checkout/hosted-widget-integration';\nimport {\n    isInstrumentCardCodeRequiredSelector,\n    isInstrumentCardNumberRequiredSelector,\n} from '@bigcommerce/checkout/instrument-utils';\nimport {\n    type PaymentMethodProps,\n    useCheckout,\n} from '@bigcommerce/checkout/payment-integration-api';\nimport { Modal } from '@bigcommerce/checkout/ui';\n\nexport type AdyenV2FormProps = Omit<\n    HostedWidgetComponentProps,\n    | 'onSignOut'\n    | 'isInstrumentFeatureAvailable'\n    | 'instruments'\n    | 'isLoadingInstruments'\n    | 'isPaymentDataRequired'\n    | 'isSignedIn'\n    | 'isInstrumentCardCodeRequired'\n    | 'isInstrumentCardNumberRequired'\n    | 'loadInstruments'\n    | 'signOut'\n    | 'deinitializePayment'\n> & {\n    containerId: string;\n    isAccountInstrument: boolean;\n    shouldHideInstrumentExpiryDate: boolean;\n    validateInstrument: (\n        shouldShowNumberField: boolean,\n        selectedInstrument: CardInstrument,\n    ) => ReactNode;\n    showAdditionalActionContent: boolean;\n    cancelAdditionalActionModalFlow: () => void;\n    additionalActionContainerId: string;\n};\n\nconst AdyenV2Form: FunctionComponent<AdyenV2FormProps & PaymentMethodProps> = ({\n    method,\n    containerId,\n    initializePayment,\n    isAccountInstrument,\n    shouldHideInstrumentExpiryDate,\n    validateInstrument,\n    language,\n    showAdditionalActionContent,\n    cancelAdditionalActionModalFlow,\n    additionalActionContainerId,\n    onUnhandledError,\n    checkoutService,\n    checkoutState,\n    paymentForm,\n    ...rest\n}) => {\n    const {\n        hidePaymentSubmitButton,\n        disableSubmit,\n        setFieldValue,\n        setSubmit,\n        setValidationSchema,\n    } = paymentForm;\n    const customer = checkoutState.data.getCustomer();\n    const { isLoadingInstruments } = checkoutState.statuses;\n\n    const instruments = checkoutState.data.getInstruments(method) || [];\n\n    const {\n        checkoutState: {\n            data: { isPaymentDataRequired },\n        },\n    } = useCheckout();\n    const isSignedIn = customer?.isGuest;\n    const isInstrumentFeatureAvailable = !isSignedIn && Boolean(method.config.isVaultingEnabled);\n    const isInstrumentCardCodeRequired = isInstrumentCardCodeRequiredSelector(checkoutState);\n    const isInstrumentCardNumberRequired = isInstrumentCardNumberRequiredSelector(checkoutState);\n\n    return (\n        <>\n            <HostedWidgetPaymentComponent\n                {...rest}\n                containerId={containerId}\n                deinitializePayment={checkoutService.deinitializePayment}\n                disableSubmit={disableSubmit}\n                hideContentWhenSignedOut\n                hidePaymentSubmitButton={hidePaymentSubmitButton}\n                initializePayment={initializePayment}\n                instruments={instruments}\n                isAccountInstrument={isAccountInstrument}\n                isInstrumentCardCodeRequired={isInstrumentCardCodeRequired}\n                isInstrumentCardNumberRequired={isInstrumentCardNumberRequired}\n                isInstrumentFeatureAvailable={isInstrumentFeatureAvailable}\n                isLoadingInstruments={isLoadingInstruments()}\n                isPaymentDataRequired={isPaymentDataRequired()}\n                isSignedIn={!isSignedIn}\n                loadInstruments={checkoutService.loadInstruments}\n                method={method}\n                onUnhandledError={onUnhandledError}\n                setFieldValue={setFieldValue}\n                setSubmit={setSubmit}\n                setValidationSchema={setValidationSchema}\n                shouldHideInstrumentExpiryDate={shouldHideInstrumentExpiryDate}\n                shouldRenderCustomInstrument\n                signOut={checkoutService.signOutCustomer}\n                validateInstrument={validateInstrument}\n            />\n            <Modal\n                additionalBodyClassName=\"modal-body--center\"\n                closeButtonLabel={language.translate('common.close_action')}\n                isOpen={showAdditionalActionContent}\n                onRequestClose={cancelAdditionalActionModalFlow}\n                shouldShowCloseButton={true}\n            >\n                <div id={additionalActionContainerId} style={{ width: '100%' }} />\n            </Modal>\n            {!showAdditionalActionContent && (\n                <div id={additionalActionContainerId} style={{ display: 'none' }} />\n            )}\n        </>\n    );\n};\n\nexport default AdyenV2Form;\n","import {\n    type AdyenCreditCardComponentOptions,\n    type AdyenIdealComponentOptions,\n    type AdyenValidationState,\n    type CardInstrument,\n    type PaymentInitializeOptions,\n} from '@bigcommerce/checkout-sdk';\nimport React, { type FunctionComponent, useCallback, useRef, useState } from 'react';\n\nimport { type HostedWidgetComponentProps } from '@bigcommerce/checkout/hosted-widget-integration';\nimport { LocaleProvider } from '@bigcommerce/checkout/locale';\nimport {\n    CheckoutContext,\n    PaymentFormContext,\n    type PaymentMethodProps,\n    type PaymentMethodResolveId,\n    toResolvableComponent,\n} from '@bigcommerce/checkout/payment-integration-api';\nimport { FormContext, LoadingOverlay } from '@bigcommerce/checkout/ui';\n\nimport AdyenV2CardValidation from './AdyenV2CardValidation';\nimport AdyenV2Form from './AdyenV2Form';\n\nexport interface AdyenOptions {\n    scheme: AdyenCreditCardComponentOptions;\n    bcmc: AdyenCreditCardComponentOptions;\n    ideal: AdyenIdealComponentOptions;\n}\n\nexport enum AdyenV2PaymentMethodType {\n    // eslint-disable-next-line @typescript-eslint/naming-convention\n    scheme = 'scheme',\n    // eslint-disable-next-line @typescript-eslint/naming-convention\n    bcmc = 'bcmc',\n    // eslint-disable-next-line @typescript-eslint/naming-convention\n    ideal = 'ideal',\n}\n\ninterface AdyenPaymentMethodRef {\n    shouldShowModal: boolean;\n    shouldShowNumberField?: boolean;\n    cancelAdditionalAction?(): void;\n}\n\nconst AdyenV2PaymentMethod: FunctionComponent<PaymentMethodProps> = ({\n    checkoutService,\n    checkoutState,\n    paymentForm,\n    method,\n    language,\n    ...rest\n}) => {\n    const ref = useRef<AdyenPaymentMethodRef>({\n        shouldShowModal: true,\n    });\n    const [showAdditionalActionContent, setShowAdditionalActionContent] = useState<boolean>(false);\n    const [cardValidationState, setCardValidationState] = useState<AdyenValidationState>();\n    const containerId = `adyen-${method.id}-component-field`;\n    const additionalActionContainerId = `adyen-${method.id}-additional-action-component-field`;\n    const cardVerificationContainerId = `adyen-${method.id}-tsv-component-field`;\n    const threeDS2ContainerId = `adyen-${method.id}-additional-action-component-field`;\n    // eslint-disable-next-line @typescript-eslint/consistent-type-assertions\n    const component = method.id as AdyenV2PaymentMethodType;\n    const shouldHideInstrumentExpiryDate = component === AdyenV2PaymentMethodType.bcmc;\n\n    const onBeforeLoad = useCallback((shopperInteraction: boolean) => {\n        ref.current.shouldShowModal = shopperInteraction;\n\n        setShowAdditionalActionContent(ref.current.shouldShowModal);\n    }, []);\n\n    const onComplete = useCallback(() => {\n        setShowAdditionalActionContent(false);\n        ref.current.cancelAdditionalAction = undefined;\n    }, []);\n\n    const onLoad = useCallback((cancel?: any) => {\n        // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment\n        ref.current.cancelAdditionalAction = cancel;\n    }, []);\n\n    const cancelAdditionalActionModalFlow = useCallback(() => {\n        setShowAdditionalActionContent(false);\n\n        if (ref.current.cancelAdditionalAction) {\n            ref.current.cancelAdditionalAction();\n            ref.current.cancelAdditionalAction = undefined;\n        }\n    }, []);\n\n    const initializeAdyenPayment: HostedWidgetComponentProps['initializePayment'] = useCallback(\n        async (options: PaymentInitializeOptions, selectedInstrument: CardInstrument) => {\n            // eslint-disable-next-line @typescript-eslint/no-unnecessary-condition\n            const selectedInstrumentId = selectedInstrument?.bigpayToken;\n            const adyenOptions: AdyenOptions = {\n                [AdyenV2PaymentMethodType.scheme]: {\n                    hasHolderName: true,\n                    holderNameRequired: true,\n                },\n                [AdyenV2PaymentMethodType.bcmc]: {\n                    hasHolderName: false,\n                },\n                [AdyenV2PaymentMethodType.ideal]: {\n                    showImage: true,\n                },\n            };\n\n            return checkoutService.initializePayment({\n                ...options,\n                adyenv2: {\n                    cardVerificationContainerId:\n                        selectedInstrumentId && cardVerificationContainerId,\n                    containerId,\n                    hasVaultedInstruments: !!selectedInstrumentId,\n                    options: adyenOptions[component],\n                    threeDS2ContainerId,\n                    additionalActionOptions: {\n                        widgetSize: '05',\n                        containerId: additionalActionContainerId,\n                        onBeforeLoad,\n                        onComplete,\n                        onLoad,\n                    },\n                    shouldShowNumberField: ref.current.shouldShowNumberField,\n                    validateCardFields: (state: AdyenValidationState) => {\n                        setCardValidationState(state);\n                    },\n                },\n            });\n        },\n        [\n            component,\n            cardVerificationContainerId,\n            containerId,\n            additionalActionContainerId,\n            threeDS2ContainerId,\n            onBeforeLoad,\n            onComplete,\n            onLoad,\n            checkoutService,\n        ],\n    );\n\n    const validateInstrument = (\n        shouldShowNumberField: boolean,\n        selectedInstrument: CardInstrument,\n    ) => {\n        ref.current.shouldShowNumberField = shouldShowNumberField;\n\n        return (\n            <AdyenV2CardValidation\n                cardValidationState={cardValidationState}\n                language={language}\n                paymentMethod={method}\n                selectedInstrument={selectedInstrument}\n                shouldShowNumberField={shouldShowNumberField}\n                verificationFieldsContainerId={cardVerificationContainerId}\n            />\n        );\n    };\n\n    const isAccountInstrument = () => {\n        switch (method.method) {\n            case 'directEbanking':\n            case 'giropay':\n            case 'ideal':\n            case 'sepadirectdebit':\n                return true;\n\n            default:\n                return false;\n        }\n    };\n\n    const isLoading =\n        checkoutState.statuses.isLoadingInstruments() ||\n        checkoutState.statuses.isLoadingPaymentMethod(method.id);\n\n    const formContextProps = {\n        isSubmitted: paymentForm.isSubmitted(),\n        setSubmitted: paymentForm.setSubmitted,\n    };\n\n    return (\n        <FormContext.Provider value={formContextProps}>\n            <CheckoutContext.Provider value={{ checkoutState, checkoutService }}>\n                <LocaleProvider checkoutService={checkoutService}>\n                    <PaymentFormContext.Provider value={{ paymentForm }}>\n                        <LoadingOverlay hideContentWhenLoading isLoading={isLoading}>\n                            <AdyenV2Form\n                                {...rest}\n                                additionalActionContainerId={additionalActionContainerId}\n                                cancelAdditionalActionModalFlow={cancelAdditionalActionModalFlow}\n                                checkoutService={checkoutService}\n                                checkoutState={checkoutState}\n                                containerId={containerId}\n                                initializePayment={initializeAdyenPayment}\n                                isAccountInstrument={isAccountInstrument()}\n                                language={language}\n                                method={method}\n                                paymentForm={paymentForm}\n                                shouldHideInstrumentExpiryDate={shouldHideInstrumentExpiryDate}\n                                showAdditionalActionContent={showAdditionalActionContent}\n                                validateInstrument={validateInstrument}\n                            />\n                        </LoadingOverlay>\n                    </PaymentFormContext.Provider>\n                </LocaleProvider>\n            </CheckoutContext.Provider>\n        </FormContext.Provider>\n    );\n};\n\nexport default toResolvableComponent<PaymentMethodProps, PaymentMethodResolveId>(\n    AdyenV2PaymentMethod,\n    [{ gateway: 'adyenv2' }],\n);\n","import { type FormFieldOptions } from '@bigcommerce/checkout-sdk';\nimport { type FieldProps } from 'formik';\nimport React, { type FunctionComponent, memo, useCallback } from 'react';\n\nimport { DynamicFormFieldType, DynamicInput, FormField } from '@bigcommerce/checkout/ui';\n\nexport interface BlueSnapDirectSelectFieldProps {\n    labelContent: string;\n    name: string;\n    options: FormFieldOptions;\n    useFloatingLabel?: boolean;\n}\n\nconst BlueSnapDirectSelectField: FunctionComponent<BlueSnapDirectSelectFieldProps> = ({\n    options: { helperLabel, items, rows },\n    useFloatingLabel,\n    ...rest\n}) => {\n    const renderSelect = useCallback(\n        ({ field }: FieldProps<string>) => (\n            <DynamicInput\n                {...field}\n                aria-labelledby={`${field.name}-label ${field.name}-field-error-message`}\n                fieldType={DynamicFormFieldType.DROPDOWM}\n                id={field.name}\n                isFloatingLabelEnabled={useFloatingLabel}\n                options={items}\n                placeholder={helperLabel}\n                rows={rows}\n            />\n        ),\n        [helperLabel, items, rows, useFloatingLabel],\n    );\n\n    return <FormField {...rest} input={renderSelect} />;\n};\n\nexport default memo(BlueSnapDirectSelectField);\n","import { some } from 'lodash';\nimport React, { type FunctionComponent, useCallback } from 'react';\n\nimport { HostedWidgetPaymentComponent } from '@bigcommerce/checkout/hosted-widget-integration';\nimport {\n    isInstrumentCardCodeRequiredSelector,\n    isInstrumentCardNumberRequiredSelector,\n} from '@bigcommerce/checkout/instrument-utils';\nimport {\n    type PaymentMethodProps,\n    type PaymentMethodResolveId,\n    toResolvableComponent,\n} from '@bigcommerce/checkout/payment-integration-api';\n\nconst KlarnaV2PaymentMethod: FunctionComponent<PaymentMethodProps> = ({\n    checkoutService,\n    checkoutState,\n    method,\n    paymentForm,\n    ...rest\n}) => {\n    const initializeKlarnaV2Payment = useCallback(\n        (options: any) =>\n            // eslint-disable-next-line @typescript-eslint/no-unsafe-argument\n            checkoutService.initializePayment({\n                ...options,\n                klarnav2: {\n                    container: `#${options.methodId}Widget`,\n                },\n            }),\n        [checkoutService],\n    );\n\n    const {\n        hidePaymentSubmitButton,\n        disableSubmit,\n        setFieldValue,\n        setSubmit,\n        setValidationSchema,\n    } = paymentForm;\n\n    const instruments = checkoutState.data.getInstruments(method) || [];\n\n    const {\n        data: { getCheckout, isPaymentDataRequired },\n        statuses: { isLoadingInstruments },\n    } = checkoutState;\n\n    const checkout = getCheckout();\n    const customer = checkoutState.data.getCustomer();\n    const isGuestCustomer = customer?.isGuest;\n    const isInstrumentFeatureAvailable =\n        !isGuestCustomer && Boolean(method.config.isVaultingEnabled);\n\n    return (\n        <HostedWidgetPaymentComponent\n            containerId={`${method.id}Widget`}\n            deinitializePayment={checkoutService.deinitializePayment}\n            disableSubmit={disableSubmit}\n            hidePaymentSubmitButton={hidePaymentSubmitButton}\n            initializePayment={initializeKlarnaV2Payment}\n            instruments={instruments}\n            isInstrumentCardCodeRequired={isInstrumentCardCodeRequiredSelector(checkoutState)}\n            isInstrumentCardNumberRequired={isInstrumentCardNumberRequiredSelector(checkoutState)}\n            isInstrumentFeatureAvailable={isInstrumentFeatureAvailable}\n            isLoadingInstruments={isLoadingInstruments()}\n            isPaymentDataRequired={isPaymentDataRequired()}\n            isSignedIn={some(checkout?.payments, { providerId: method.id })}\n            loadInstruments={checkoutService.loadInstruments}\n            method={method}\n            setFieldValue={setFieldValue}\n            setSubmit={setSubmit}\n            setValidationSchema={setValidationSchema}\n            signOut={checkoutService.signOutCustomer}\n            {...rest}\n        />\n    );\n};\n\nexport default toResolvableComponent<PaymentMethodProps, PaymentMethodResolveId>(\n    KlarnaV2PaymentMethod,\n    [{ gateway: 'klarna' }],\n);\n","import React, { type FunctionComponent } from 'react';\n\nimport { HostedPaymentComponent } from '@bigcommerce/checkout/hosted-payment-integration';\nimport {\n    type PaymentMethodProps,\n    type PaymentMethodResolveId,\n    toResolvableComponent,\n} from '@bigcommerce/checkout/payment-integration-api';\n\nconst AfterpayPaymentMethod: FunctionComponent<PaymentMethodProps> = ({\n    checkoutService,\n    checkoutState,\n    method,\n    paymentForm,\n    ...rest\n}) => {\n    return (\n        <HostedPaymentComponent\n            {...rest}\n            checkoutService={checkoutService}\n            checkoutState={checkoutState}\n            deinitializePayment={checkoutService.deinitializePayment}\n            initializePayment={checkoutService.initializePayment}\n            method={method}\n            paymentForm={paymentForm}\n        />\n    );\n};\n\nexport default toResolvableComponent<PaymentMethodProps, PaymentMethodResolveId>(\n    AfterpayPaymentMethod,\n    [{ gateway: 'afterpay' }],\n);\n","import { number } from 'card-validator';\n\nimport { type WalletButtonInitializationData } from './types';\n\ninterface WalletPaymentData {\n    accountMask: string;\n    cardType: string;\n    expiryMonth?: string;\n    expiryYear?: string;\n}\n\nconst formatAccountMask = (accountMask = '', padding = '****'): string =>\n    accountMask.includes('*') ? accountMask : `${padding} ${accountMask}`;\n\nconst isWalletButtonInitializationData = (\n    object: unknown,\n): object is WalletButtonInitializationData => {\n    if (typeof object === 'object' && object !== null) {\n        if (\n            'card_information' in object &&\n            typeof object.card_information === 'object' &&\n            object.card_information !== null &&\n            'number' in object.card_information &&\n            'type' in object.card_information\n        ) {\n            return true;\n        }\n\n        if (\n            'cardData' in object &&\n            typeof object.cardData === 'object' &&\n            object.cardData !== null &&\n            'accountMask' in object.cardData &&\n            'cardType' in object.cardData &&\n            'expMonth' in object.cardData &&\n            'expYear' in object.cardData\n        ) {\n            return true;\n        }\n\n        if ('accountNum' in object && 'accountMask' in object && 'expDate' in object) {\n            return true;\n        }\n    }\n\n    return false;\n};\n\n// For some odd reason, `initializationData` is a schema-less object. So in\n// order to use it safely, we have to normalize it first.\nconst normalizeWalletPaymentData = (data: unknown): WalletPaymentData | undefined => {\n    if (isWalletButtonInitializationData(data)) {\n        if (data.card_information) {\n            return {\n                accountMask: formatAccountMask(data.card_information.number),\n                cardType: data.card_information.type,\n            };\n        }\n\n        if (data.cardData) {\n            return {\n                accountMask: formatAccountMask(data.cardData.accountMask),\n                cardType: data.cardData.cardType,\n                expiryMonth: data.cardData.expMonth,\n                expiryYear: data.cardData.expYear,\n            };\n        }\n\n        if (data.accountNum) {\n            const { card } = number(data.accountNum);\n\n            return {\n                accountMask: formatAccountMask(data.accountMask),\n                expiryMonth: data.expDate && data.expDate.substr(0, 2),\n                expiryYear: data.expDate && data.expDate.substr(2, 2),\n                cardType: card ? card.niceType : '',\n            };\n        }\n    }\n\n    return undefined;\n};\n\nexport default normalizeWalletPaymentData;\n","enum PaymentMethodType {\n    ApplePay = 'applepay',\n    Barclaycard = 'barclaycard',\n    CreditCard = 'credit-card',\n    GooglePay = 'googlepay',\n    PayWithGoogle = 'paywithgoogle',\n    Masterpass = 'masterpass',\n    MultiOption = 'multi-option',\n    Paypal = 'paypal',\n    PaypalCredit = 'paypal-credit',\n    PaypalVenmo = 'paypal-venmo',\n    VisaCheckout = 'visa-checkout',\n}\n\nexport default PaymentMethodType;\n","import { type LanguageService, type PaymentMethod } from '@bigcommerce/checkout-sdk';\nimport { capitalize, get } from 'lodash';\n\nimport PaymentMethodId from './PaymentMethodId';\nimport PaymentMethodType from './PaymentMethodType';\n\n/**\n * Always return the translated name of a payment method unless it is a\n * multi-option payment method or it doesn't have any translation. It's possible\n * to translate the gateway name of multi-option methods, i.e.: AfterPay.\n * However, because the options provided by the gateway can vary a lot, i.e.:\n * \"Pay by Installment\", therefore it's not feasible to do the translation on\n * the UI level.\n */\nexport default function getPaymentMethodName(\n    language: LanguageService,\n): (method: PaymentMethod) => string {\n    return (method) => {\n        let name = getTranslatedPaymentMethodName(language)(method);\n\n        if (!name || method.method === PaymentMethodType.MultiOption) {\n            name = method.config.displayName;\n        }\n\n        if (!name) {\n            name = capitalize(\n                get(method, 'initializationData.paymentData.cardData.digital_wallet_type') ||\n                    method.method ||\n                    method.id,\n            );\n        }\n\n        return name;\n    };\n}\n\nexport function getTranslatedPaymentMethodName(\n    language: LanguageService,\n): (method: PaymentMethod) => string | undefined {\n    return (method) => {\n        const translations: { [key: string]: string } = {\n            [PaymentMethodId.Affirm]: language.translate('payment.affirm_name_text'),\n            [PaymentMethodId.Afterpay]: language.translate('payment.afterpay_name_text'),\n            [PaymentMethodId.AmazonPay]: language.translate('payment.amazon_name_text'),\n            [PaymentMethodId.Bolt]: language.translate('payment.bolt_name_text'),\n            [PaymentMethodId.Clearpay]: language.translate('payment.clearpay_name_text'),\n            [PaymentMethodType.GooglePay]: language.translate('payment.google_pay_name_text'),\n            [PaymentMethodId.Klarna]: language.translate('payment.klarna_name_text'),\n            [PaymentMethodType.Paypal]: language.translate('payment.paypal_name_text'),\n            [PaymentMethodType.PaypalCredit]: language.translate('payment.paypal_credit_name_text'),\n            [PaymentMethodType.VisaCheckout]: language.translate('payment.vco_name_text'),\n        };\n\n        return translations[method.id] || translations[method.method];\n    };\n}\n","import { type PaymentMethod } from '@bigcommerce/checkout-sdk';\nimport React, { type FunctionComponent } from 'react';\n\nimport { preventDefault } from '@bigcommerce/checkout/dom-utils';\nimport { TranslatedString, useLocale } from '@bigcommerce/checkout/locale';\nimport { getPaymentMethodName } from '@bigcommerce/checkout/payment-integration-api';\n\nexport interface SignOutLinkProps {\n    method: PaymentMethod;\n    onSignOut(): void;\n}\n\nconst SignOutLink: FunctionComponent<SignOutLinkProps> = ({ method, onSignOut }) => {\n    const { language } = useLocale();\n\n    return (\n        <div className=\"signout-link\">\n            <TranslatedString id=\"remote.sign_out_before_action\" />{' '}\n            {\n                // eslint-disable-next-line jsx-a11y/anchor-is-valid\n                <a href=\"#\" onClick={preventDefault(onSignOut)}>\n                    <TranslatedString\n                        data={{ providerName: getPaymentMethodName(language)(method) }}\n                        id=\"remote.sign_out_action\"\n                    />\n                </a>\n            }{' '}\n            <TranslatedString id=\"remote.sign_out_after_action\" />\n        </div>\n    );\n};\n\nexport default SignOutLink;\n","import { type PaymentMethod } from '@bigcommerce/checkout-sdk';\nimport React, { type ReactNode } from 'react';\n\nimport { preventDefault } from '@bigcommerce/checkout/dom-utils';\nimport { SignOutLink } from '@bigcommerce/checkout/instrument-utils';\nimport { TranslatedString } from '@bigcommerce/checkout/locale';\n\nexport interface PaymentViewProps {\n    accountMask?: string;\n    cardName?: string;\n    cardType?: string;\n    expiryMonth?: string;\n    expiryYear?: string;\n    shouldShowEditButton?: boolean;\n    editButtonClassName?: string;\n    editButtonLabel?: ReactNode;\n    buttonId: string;\n    method: PaymentMethod;\n    onSignOut: () => void;\n}\n\nconst PaymentView: React.FC<PaymentViewProps> = ({\n    accountMask,\n    cardName,\n    cardType,\n    expiryMonth,\n    expiryYear,\n    shouldShowEditButton,\n    editButtonClassName,\n    editButtonLabel,\n    buttonId,\n    method,\n    onSignOut,\n}) => {\n    return (\n        <>\n            {!!cardName && (\n                <p data-test=\"payment-method-wallet-card-name\">\n                    <strong>\n                        <TranslatedString id=\"payment.credit_card_name_label\" />:\n                    </strong>{' '}\n                    {cardName}\n                </p>\n            )}\n\n            {!!accountMask && !!cardType && (\n                <p data-test=\"payment-method-wallet-card-type\">\n                    <strong>{`${cardType}:`}</strong> {accountMask}\n                </p>\n            )}\n\n            {!!expiryMonth && !!expiryYear && (\n                <p data-test=\"payment-method-wallet-card-expiry\">\n                    <strong>\n                        <TranslatedString id=\"payment.credit_card_expiration_date_label\" />:\n                    </strong>{' '}\n                    {`${expiryMonth}/${expiryYear}`}\n                </p>\n            )}\n\n            {!!shouldShowEditButton && (\n                <p>\n                    {\n                        // eslint-disable-next-line jsx-a11y/anchor-is-valid\n                        <a\n                            className={editButtonClassName}\n                            href=\"#\"\n                            id={buttonId}\n                            onClick={preventDefault()}\n                        >\n                            {editButtonLabel || (\n                                <TranslatedString id=\"remote.select_different_card_action\" />\n                            )}\n                        </a>\n                    }\n                </p>\n            )}\n\n            <SignOutLink method={method} onSignOut={onSignOut} />\n        </>\n    );\n};\n\nexport default PaymentView;\n","import { type PaymentMethod } from '@bigcommerce/checkout-sdk';\nimport React, { type ReactNode } from 'react';\n\nimport { preventDefault } from '@bigcommerce/checkout/dom-utils';\nimport { TranslatedString, useLocale } from '@bigcommerce/checkout/locale';\nimport { getPaymentMethodName } from '@bigcommerce/checkout/payment-integration-api';\n\nexport interface SignInViewProps {\n    buttonId: string;\n    method: PaymentMethod;\n    signInButtonClassName?: string;\n    signInButtonLabel?: ReactNode;\n}\n\nconst SignInView: React.FC<SignInViewProps> = ({\n    buttonId,\n    method,\n    signInButtonClassName,\n    signInButtonLabel,\n}) => {\n    const { language } = useLocale();\n\n    return (\n        // eslint-disable-next-line jsx-a11y/anchor-is-valid\n        <a className={signInButtonClassName} href=\"#\" id={buttonId} onClick={preventDefault()}>\n            {signInButtonLabel || (\n                <TranslatedString\n                    data={{ providerName: getPaymentMethodName(language)(method) }}\n                    id=\"remote.sign_in_action\"\n                />\n            )}\n        </a>\n    );\n};\n\nexport default SignInView;\n","import {\n    type CheckoutSelectors,\n    type CustomerRequestOptions,\n    type PaymentInitializeOptions,\n    type PaymentMethod,\n    type PaymentRequestOptions,\n} from '@bigcommerce/checkout-sdk';\nimport { noop, some } from 'lodash';\nimport React, { type ReactNode, useCallback, useEffect } from 'react';\n\nimport {\n    type PaymentFormService,\n    useCheckout,\n} from '@bigcommerce/checkout/payment-integration-api';\nimport { LoadingOverlay } from '@bigcommerce/checkout/ui';\n\nimport normalizeWalletPaymentData from './normalizeWalletPaymentData';\nimport PaymentView from './PaymentView';\nimport SignInView from './SignInView';\n\nexport interface WalletButtonPaymentMethodProps {\n    paymentForm: PaymentFormService;\n    buttonId: string;\n    editButtonClassName?: string;\n    editButtonLabel?: ReactNode;\n    isInitializing?: boolean;\n    method: PaymentMethod;\n    shouldShowEditButton?: boolean;\n    signInButtonClassName?: string;\n    signInButtonLabel?: ReactNode;\n    signOutCustomer(options: CustomerRequestOptions): Promise<CheckoutSelectors>;\n    deinitializePayment(options: PaymentRequestOptions): Promise<CheckoutSelectors>;\n    initializePayment(options: PaymentInitializeOptions): Promise<CheckoutSelectors>;\n    onSignOut?(): void;\n    onSignOutError?(error: Error): void;\n    onUnhandledError?(error: Error): void;\n}\n\nconst WalletButtonPaymentMethodComponent: React.FC<WalletButtonPaymentMethodProps> = ({\n    paymentForm,\n    buttonId,\n    editButtonClassName,\n    editButtonLabel,\n    isInitializing = false,\n    method,\n    shouldShowEditButton,\n    signInButtonClassName,\n    signInButtonLabel,\n    signOutCustomer,\n    deinitializePayment,\n    initializePayment,\n    onSignOut = noop,\n    onSignOutError = noop,\n    onUnhandledError = noop,\n}) => {\n    const {\n        checkoutState: {\n            data: { getBillingAddress, getCheckout, isPaymentDataRequired },\n        },\n    } = useCheckout();\n\n    const billingAddress = getBillingAddress();\n    const checkout = getCheckout();\n\n    if (!billingAddress || !checkout) {\n        throw new Error('Unable to get checkout');\n    }\n\n    const walletPaymentData = normalizeWalletPaymentData(method.initializationData);\n    const isPaymentSelected = some(checkout.payments, { providerId: method.id });\n    // FIXME: I'm not sure how this would work for non-English names.\n    const cardName =\n        walletPaymentData && [billingAddress.firstName, billingAddress.lastName].join(' ');\n\n    const toggleSubmit = () => {\n        const { disableSubmit } = paymentForm;\n        const currentIsPaymentDataRequired = isPaymentDataRequired();\n\n        if (\n            normalizeWalletPaymentData(method.initializationData) ||\n            !currentIsPaymentDataRequired\n        ) {\n            disableSubmit(method, false);\n        } else {\n            disableSubmit(method, true);\n        }\n    };\n\n    const handleSignOut = useCallback(async () => {\n        try {\n            await signOutCustomer({ methodId: method.id });\n            onSignOut();\n            window.location.reload();\n        } catch (error) {\n            onSignOutError(error);\n        }\n    }, [signOutCustomer, method.id, onSignOut, onSignOutError]);\n\n    useEffect(() => {\n        const initializePaymentAsync = async () => {\n            toggleSubmit();\n\n            try {\n                await initializePayment({\n                    gatewayId: method.gateway,\n                    methodId: method.id,\n                });\n            } catch (error) {\n                onUnhandledError(error);\n            }\n        };\n\n        void initializePaymentAsync();\n\n        return () => {\n            const deinitializePaymentAsync = async () => {\n                const { disableSubmit } = paymentForm;\n\n                disableSubmit(method, false);\n\n                try {\n                    await deinitializePayment({\n                        gatewayId: method.gateway,\n                        methodId: method.id,\n                    });\n                } catch (error) {\n                    onUnhandledError(error);\n                }\n            };\n\n            void deinitializePaymentAsync();\n        };\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, []);\n\n    useEffect(() => {\n        toggleSubmit();\n    });\n\n    return (\n        <LoadingOverlay hideContentWhenLoading isLoading={isInitializing}>\n            <div className=\"paymentMethod paymentMethod--walletButton\">\n                {isPaymentSelected ? (\n                    <PaymentView\n                        {...walletPaymentData}\n                        buttonId={buttonId}\n                        cardName={cardName}\n                        editButtonClassName={editButtonClassName}\n                        editButtonLabel={editButtonLabel}\n                        method={method}\n                        onSignOut={handleSignOut}\n                        shouldShowEditButton={shouldShowEditButton}\n                    />\n                ) : (\n                    <SignInView\n                        buttonId={buttonId}\n                        method={method}\n                        signInButtonClassName={signInButtonClassName}\n                        signInButtonLabel={signInButtonLabel}\n                    />\n                )}\n            </div>\n        </LoadingOverlay>\n    );\n};\n\nexport default WalletButtonPaymentMethodComponent;\n","import { type LanguageService, type PaymentMethod } from '@bigcommerce/checkout-sdk';\nimport { capitalize, get } from 'lodash';\n\nimport PaymentMethodId from './PaymentMethodId';\nimport PaymentMethodType from './PaymentMethodType';\n\n/**\n * Always return the translated name of a payment method unless it is a\n * multi-option payment method or it doesn't have any translation. It's possible\n * to translate the gateway name of multi-option methods, i.e.: AfterPay.\n * However, because the options provided by the gateway can vary a lot, i.e.:\n * \"Pay by Installment\", therefore it's not feasible to do the translation on\n * the UI level.\n */\nexport default function getPaymentMethodName(\n    language: LanguageService,\n): (method: PaymentMethod) => string {\n    return (method) => {\n        let name = getTranslatedPaymentMethodName(language)(method);\n\n        if (!name || method.method === PaymentMethodType.MultiOption) {\n            name = method.config && method.config.displayName;\n        }\n\n        if (!name) {\n            name = capitalize(\n                get(method, 'initializationData.paymentData.cardData.digital_wallet_type') ||\n                    method.method ||\n                    method.id,\n            );\n        }\n\n        return name;\n    };\n}\n\nexport function getTranslatedPaymentMethodName(\n    language: LanguageService,\n): (method: PaymentMethod) => string | undefined {\n    return (method) => {\n        const translations: { [key: string]: string } = {\n            [PaymentMethodId.Affirm]: language.translate('payment.affirm_name_text'),\n            [PaymentMethodId.Afterpay]: language.translate('payment.afterpay_name_text'),\n            [PaymentMethodId.AmazonPay]: language.translate('payment.amazon_name_text'),\n            [PaymentMethodId.Bolt]: language.translate('payment.bolt_name_text'),\n            [PaymentMethodId.Clearpay]: language.translate('payment.clearpay_name_text'),\n            [PaymentMethodType.GooglePay]: language.translate('payment.google_pay_name_text'),\n            [PaymentMethodId.Klarna]: language.translate('payment.klarna_name_text'),\n            [PaymentMethodType.Paypal]: language.translate('payment.paypal_name_text'),\n            [PaymentMethodType.PaypalCredit]: language.translate('payment.paypal_credit_name_text'),\n            [PaymentMethodType.VisaCheckout]: language.translate('payment.vco_name_text'),\n        };\n\n        return translations[method.id] || translations[method.method];\n    };\n}\n","import { type FieldProps } from 'formik';\nimport React, { type FunctionComponent, memo, useCallback, useMemo } from 'react';\n\nimport { TranslatedString } from '@bigcommerce/checkout/locale';\nimport { Fieldset, FormField, TextInput } from '@bigcommerce/checkout/ui';\n\nexport interface TextFieldProps {\n    additionalClassName: string;\n    autoComplete: string;\n    labelId: string;\n    name: string;\n}\n\nexport interface TextFieldFormProps {\n    additionalClassName: string;\n    autoComplete: string;\n    labelId: string;\n    name: string;\n}\n\nconst TextField: FunctionComponent<TextFieldProps> = (props) => {\n    const { additionalClassName, autoComplete, labelId, name } = props;\n\n    const renderInput = useCallback(\n        ({ field }: FieldProps) => (\n            <TextInput {...field} autoComplete={autoComplete} id={field.name} />\n        ),\n        [autoComplete],\n    );\n\n    const labelContent = useMemo(() => <TranslatedString id={labelId} />, [labelId]);\n\n    return (\n        <FormField\n            additionalClassName={additionalClassName}\n            input={renderInput}\n            labelContent={labelContent}\n            name={name}\n        />\n    );\n};\n\nconst TextFieldForm: FunctionComponent<TextFieldFormProps> = ({\n    additionalClassName,\n    autoComplete,\n    labelId,\n    name,\n}) => (\n    <Fieldset>\n        <div className=\"form-ccFields\">\n            <TextField\n                additionalClassName={additionalClassName}\n                autoComplete={autoComplete}\n                labelId={labelId}\n                name={name}\n            />\n        </div>\n    </Fieldset>\n);\n\nexport default memo(TextFieldForm);\n","import { type BillingAddress, type PaymentMethod } from '@bigcommerce/checkout-sdk';\nimport { type FieldProps } from 'formik';\nimport React, {\n    type FunctionComponent,\n    type SyntheticEvent,\n    useCallback,\n    useContext,\n    useEffect,\n    useState,\n} from 'react';\n\nimport { TranslatedString } from '@bigcommerce/checkout/locale';\nimport { PaymentFormContext } from '@bigcommerce/checkout/payment-integration-api';\nimport { CheckboxFormField, DropdownTrigger, FormField } from '@bigcommerce/checkout/ui';\n\nimport TextFieldForm from './checkoutcomFieldsets/TextFieldForm';\n\ninterface CheckoutcomAPMFormProps {\n    method: PaymentMethod;\n    debtor: BillingAddress;\n}\n\ninterface Issuer {\n    bic: string;\n    name: string;\n}\n\ninterface HiddenInputProps extends FieldProps {\n    selectedIssuer?: string;\n}\n\ninterface DropdownButtonProps {\n    selectedIssuer?: Issuer;\n}\n\ninterface OptionButtonProps {\n    className?: string;\n    issuer: Issuer;\n    onClick?(event: SyntheticEvent<EventTarget>): void;\n}\n\ninterface SepaCreditor {\n    sepaCreditorAddress: string;\n    sepaCreditorCity: string;\n    sepaCreditorCompanyName: string;\n    sepaCreditorCountry: string;\n    sepaCreditorIdentifier: string;\n    sepaCreditorPostalCode: string;\n}\n\nconst Sepa: FunctionComponent<CheckoutcomAPMFormProps> = ({ method, debtor }) => {\n    const paymentContext = useContext(PaymentFormContext);\n    const creditor: SepaCreditor = method.initializationData.sepaCreditor;\n\n    useEffect(() => {\n        paymentContext?.paymentForm.disableSubmit(method, true);\n\n        return () => paymentContext?.paymentForm.disableSubmit(method, false);\n    }, [paymentContext, method]);\n\n    function toggleSubmitButton(isChecked: boolean) {\n        paymentContext?.paymentForm.disableSubmit(method, !isChecked);\n    }\n\n    return (\n        <>\n            <div className=\"checkoutcom-sepa-column-container\">\n                <div className=\"checkoutcom-sepa-column-content\">\n                    <h4 className=\"checkoutcom-sepa-title\">\n                        <TranslatedString id=\"payment.checkoutcom_sepa_creditor_title\" />\n                    </h4>\n                    <h5 className=\"checkoutcom-sepa-title\">{creditor.sepaCreditorCompanyName}</h5>\n                    <p className=\"checkoutcom-sepa-line\">{creditor.sepaCreditorAddress}</p>\n                    <p className=\"checkoutcom-sepa-line\">{`${creditor.sepaCreditorPostalCode} ${creditor.sepaCreditorCity}`}</p>\n                    <p className=\"checkoutcom-sepa-line\">{creditor.sepaCreditorCountry}</p>\n                    <br />\n                    <p className=\"checkoutcom-sepa-line\">\n                        <TranslatedString\n                            data={{ creditorId: creditor.sepaCreditorIdentifier }}\n                            id=\"payment.checkoutcom_sepa_creditor_id\"\n                        />\n                    </p>\n                </div>\n                <div className=\"checkoutcom-sepa-column-content\">\n                    <h4 className=\"checkoutcom-sepa-title\">\n                        <TranslatedString id=\"payment.checkoutcom_sepa_debtor_title\" />\n                    </h4>\n                    <h5 className=\"checkoutcom-sepa-title\">{`${debtor.firstName} ${debtor.lastName}`}</h5>\n                    <p className=\"checkoutcom-sepa-line\">{debtor.address1}</p>\n                    <p className=\"checkoutcom-sepa-line\">{`${debtor.postalCode} ${debtor.city}, ${debtor.stateOrProvinceCode}`}</p>\n                    <p className=\"checkoutcom-sepa-line\">{debtor.countryCode}</p>\n                </div>\n            </div>\n            <p className=\"checkoutcom-sepa-line\">\n                <TranslatedString id=\"payment.checkoutcom_sepa_payment_type\" />\n            </p>\n            <br />\n\n            <TextFieldForm\n                additionalClassName=\"form-field--iban\"\n                autoComplete=\"iban\"\n                labelId=\"payment.sepa_account_number\"\n                name=\"iban\"\n            />\n            <CheckboxFormField\n                labelContent={\n                    <TranslatedString\n                        data={{ creditorName: creditor.sepaCreditorCompanyName }}\n                        id=\"payment.checkoutcom_sepa_mandate_disclaimer\"\n                    />\n                }\n                name=\"sepaMandate\"\n                // eslint-disable-next-line react/jsx-no-bind\n                onChange={toggleSubmitButton}\n            />\n        </>\n    );\n};\n\nexport const HiddenInput: FunctionComponent<HiddenInputProps> = ({\n    field: { value, ...restField },\n    form,\n    selectedIssuer,\n}) => {\n    const Input = useCallback(() => <input {...restField} type=\"hidden\" />, [restField]);\n\n    useEffect(() => {\n        if (value === selectedIssuer) {\n            return;\n        }\n\n        void form.setFieldValue(restField.name, selectedIssuer);\n    }, [value, form, selectedIssuer, restField.name]);\n\n    return <Input />;\n};\n\nexport const OptionButton: FunctionComponent<OptionButtonProps> = ({ issuer, ...restProps }) => {\n    const { bic, name } = issuer;\n\n    return (\n        <button data-bic={bic} type=\"button\" {...restProps}>\n            <div className=\"instrumentSelect-details\">{`${bic} / ${name}`}</div>\n        </button>\n    );\n};\n\nconst DropdownButton: FunctionComponent<DropdownButtonProps> = ({ selectedIssuer }) => {\n    if (!selectedIssuer) {\n        return (\n            <button\n                className=\"instrumentSelect-button optimizedCheckout-form-select dropdown-button form-input\"\n                type=\"button\"\n            >\n                <div className=\"instrumentSelect-details instrumentSelect-details--addNew\">\n                    <div className=\"instrumentSelect-card\">Your bank</div>\n                </div>\n            </button>\n        );\n    }\n\n    return (\n        <OptionButton\n            className=\"instrumentSelect-button optimizedCheckout-form-select dropdown-button form-input\"\n            issuer={selectedIssuer}\n        />\n    );\n};\n\nconst Fawry: FunctionComponent<CheckoutcomAPMFormProps> = () => {\n    return (\n        <>\n            <TextFieldForm\n                additionalClassName=\"form-field--customerMobile\"\n                autoComplete=\"tel\"\n                labelId=\"payment.checkoutcom_fawry_customer_mobile_label\"\n                name=\"customerMobile\"\n            />\n            <TextFieldForm\n                additionalClassName=\"form-field--customerEmail\"\n                autoComplete=\"email\"\n                labelId=\"payment.checkoutcom_fawry_customer_email_label\"\n                name=\"customerEmail\"\n            />\n        </>\n    );\n};\n\nconst Ideal: FunctionComponent<CheckoutcomAPMFormProps> = ({ method }) => {\n    const [selectedIssuer, setSelectedIssuer] = useState<Issuer | undefined>();\n    const [bicValue, setBicValue] = useState<string>('');\n    const render = useCallback(\n        (props: FieldProps) => <HiddenInput {...props} selectedIssuer={bicValue} />,\n        [bicValue],\n    );\n\n    const issuers: Issuer[] = method.initializationData.idealIssuers;\n\n    const handleClick = ({ currentTarget }: SyntheticEvent<HTMLButtonElement>) => {\n        // eslint-disable-next-line no-underscore-dangle\n        const _selectedIssuer = issuers.find(({ bic }) => bic === currentTarget.dataset.bic);\n\n        if (!_selectedIssuer) {\n            return;\n        }\n\n        setSelectedIssuer(_selectedIssuer);\n        setBicValue(_selectedIssuer.bic);\n    };\n\n    const issuersList = (\n        <ul className=\"instrumentSelect-dropdownMenu instrumentSelect-dropdownMenuNext dropdown-menu\">\n            {issuers.map((issuer) => (\n                <li className=\"instrumentSelect-option dropdown-menu-item\" key={issuer.bic}>\n                    <OptionButton issuer={issuer} onClick={handleClick} />\n                </li>\n            ))}\n        </ul>\n    );\n\n    return (\n        <>\n            <DropdownTrigger dropdown={issuersList}>\n                <DropdownButton selectedIssuer={selectedIssuer} />\n            </DropdownTrigger>\n            <FormField input={render} name=\"bic\" />\n        </>\n    );\n};\n\nconst checkoutcomCustomFormFields: CheckoutcomCustomFormFields = {\n    fawry: Fawry,\n    sepa: Sepa,\n    ideal: Ideal,\n};\n\ninterface CheckoutcomCustomFormFields {\n    [key: string]: React.FunctionComponent<CheckoutcomAPMFormProps>;\n}\n\nexport const ccDocumentField = ({ method }: CheckoutcomAPMFormProps) => (\n    <TextFieldForm\n        additionalClassName=\"form-field--ccDocument\"\n        autoComplete=\"cc-document\"\n        labelId={`payment.checkoutcom_document_label_${method.id}`}\n        name=\"ccDocument\"\n    />\n);\n\nexport default checkoutcomCustomFormFields;\n","import React, { type FunctionComponent } from 'react';\n\nimport {\n    CreditCardPaymentMethodComponent,\n    type CreditCardPaymentMethodProps,\n} from '@bigcommerce/checkout/credit-card-integration';\nimport {\n    type PaymentMethodProps,\n    type PaymentMethodResolveId,\n    toResolvableComponent,\n} from '@bigcommerce/checkout/payment-integration-api';\n\nimport checkoutcomCustomFormFields, { ccDocumentField } from './CheckoutcomCustomFormFields';\nimport {\n    type checkoutcomPaymentMethods,\n    getCheckoutcomValidationSchemas,\n} from './checkoutcomFieldsets';\nimport { checkoutcomPaymentMethodsArray } from './checkoutcomFieldsets/getCheckoutcomFieldsetValidationSchemas';\n\nexport interface CheckoutcomCustomPaymentMethodProps\n    extends Omit<CreditCardPaymentMethodProps, 'cardFieldset' | 'cardValidationSchema'> {\n    checkoutCustomMethod: string;\n}\n\nconst isCheckoutcomPaymentMethod = (methodId: string): methodId is checkoutcomPaymentMethods => {\n    return Object.values(checkoutcomPaymentMethodsArray).includes(methodId);\n};\nconst CheckoutcomCustomPaymentMethod: FunctionComponent<PaymentMethodProps> = ({\n    language,\n    method,\n    checkoutService,\n    checkoutState,\n    ...rest\n}) => {\n    const { getConfig } = checkoutState.data;\n    const isIdealHostedPageExperimentOn =\n        getConfig()?.checkoutSettings.features['PI-2979.checkoutcom_enable_ideal_hosted_page'];\n\n    const checkoutCustomMethod = method.id;\n    const CheckoutcomCustomFieldset =\n        checkoutCustomMethod in checkoutcomCustomFormFields\n            ? checkoutcomCustomFormFields[checkoutCustomMethod]\n            : ccDocumentField;\n\n    const billingAddress = checkoutState.data.getBillingAddress();\n\n    if (\n        !isCheckoutcomPaymentMethod(checkoutCustomMethod) ||\n        (checkoutCustomMethod === 'ideal' && isIdealHostedPageExperimentOn)\n    ) {\n        return null;\n    }\n\n    return (\n        <CreditCardPaymentMethodComponent\n            checkoutService={checkoutService}\n            checkoutState={checkoutState}\n            deinitializePayment={checkoutService.deinitializePayment}\n            initializePayment={checkoutService.initializePayment}\n            language={language}\n            method={method}\n            {...rest}\n            cardFieldset={<CheckoutcomCustomFieldset debtor={billingAddress!} method={method} />}\n            cardValidationSchema={getCheckoutcomValidationSchemas({\n                paymentMethod: checkoutCustomMethod,\n                language,\n            })}\n        />\n    );\n};\n\nexport default toResolvableComponent<PaymentMethodProps, PaymentMethodResolveId>(\n    CheckoutcomCustomPaymentMethod,\n    [\n        { gateway: 'checkoutcom', id: 'ideal' },\n        { gateway: 'checkoutcom', id: 'fawry' },\n        { gateway: 'checkoutcom', id: 'oxxo' },\n        { gateway: 'checkoutcom', id: 'boleto' },\n        { gateway: 'checkoutcom', id: 'sepa' },\n        { gateway: 'checkoutcom', id: 'qpay' },\n        { gateway: 'checkoutcom', id: 'p24' },\n    ],\n);\n","import {\n    type CardInstrument,\n    type LegacyHostedFormOptions,\n    type PaymentInitializeOptions,\n} from '@bigcommerce/checkout-sdk';\nimport { compact, forIn } from 'lodash';\nimport React, {\n    createRef,\n    type FunctionComponent,\n    type RefObject,\n    useCallback,\n    useRef,\n    useState,\n} from 'react';\n\nimport { CreditCardPaymentMethodComponent } from '@bigcommerce/checkout/credit-card-integration';\nimport {\n    getHostedCreditCardValidationSchema,\n    getHostedInstrumentValidationSchema,\n    HostedCreditCardFieldset,\n    useHostedCreditCard,\n} from '@bigcommerce/checkout/hosted-credit-card-integration';\nimport {\n    CreditCardCustomerCodeField,\n    CreditCardInputStylesType,\n    getCreditCardInputStyles,\n    isInstrumentCardCodeRequiredSelector,\n    isInstrumentCardNumberRequiredSelector,\n} from '@bigcommerce/checkout/instrument-utils';\nimport {\n    type PaymentMethodProps,\n    type PaymentMethodResolveId,\n    toResolvableComponent,\n} from '@bigcommerce/checkout/payment-integration-api';\nimport { Modal } from '@bigcommerce/checkout/ui';\n\ninterface WorldpayPaymentMethodRef {\n    paymentPageContentRef: RefObject<HTMLDivElement>;\n    cancelThreeDSecureVerification?(): void;\n}\n\nconst WorldpayCreditCardPaymentMethod: FunctionComponent<PaymentMethodProps> = ({\n    language,\n    paymentForm,\n    checkoutState,\n    checkoutService,\n    method,\n    ...rest\n}) => {\n    const [threeDSecureVerification, setThreeDSecureVerification] = useState<HTMLElement>();\n    const [focusedFieldType, setFocusedFieldType] = useState<string>();\n    const { getHostedStoredCardValidationFieldset } = useHostedCreditCard({\n        checkoutState,\n        method,\n        language,\n        paymentForm,\n    });\n    const { setFieldTouched, setFieldValue, setSubmitted, submitForm } = paymentForm;\n\n    const isInstrumentCardCodeRequiredProp = isInstrumentCardCodeRequiredSelector(checkoutState);\n    const isInstrumentCardNumberRequiredProp =\n        isInstrumentCardNumberRequiredSelector(checkoutState);\n\n    const {\n        config: { cardCode },\n    } = method;\n    const isCardCodeRequired = cardCode || cardCode === null;\n    const getHostedFieldId: (name: string) => string = useCallback(\n        (name) => {\n            return `${compact([method.gateway, method.id]).join('-')}-${name}`;\n        },\n        [method],\n    );\n\n    const hostedStoredCardValidationSchema = getHostedInstrumentValidationSchema({ language });\n\n    const ref = useRef<WorldpayPaymentMethodRef>({\n        paymentPageContentRef: createRef(),\n    });\n    const getHostedFormOptions: (\n        selectedInstrument?: CardInstrument,\n    ) => Promise<LegacyHostedFormOptions> = useCallback(\n        async (selectedInstrument) => {\n            const styleProps = ['color', 'fontFamily', 'fontSize', 'fontWeight'];\n            const isInstrumentCardNumberRequired = selectedInstrument\n                ? isInstrumentCardNumberRequiredProp(selectedInstrument)\n                : false;\n            const isInstrumentCardCodeRequired = selectedInstrument\n                ? isInstrumentCardCodeRequiredProp(selectedInstrument, method)\n                : false;\n            const styleContainerId = selectedInstrument\n                ? isInstrumentCardCodeRequired\n                    ? getHostedFieldId('ccCvv')\n                    : undefined\n                : getHostedFieldId('ccNumber');\n\n            return {\n                fields: selectedInstrument\n                    ? {\n                          cardCodeVerification:\n                              isInstrumentCardCodeRequired && selectedInstrument\n                                  ? {\n                                        accessibilityLabel: language.translate(\n                                            'payment.credit_card_cvv_label',\n                                        ),\n                                        containerId: getHostedFieldId('ccCvv'),\n                                        instrumentId: selectedInstrument.bigpayToken,\n                                    }\n                                  : undefined,\n                          cardNumberVerification:\n                              isInstrumentCardNumberRequired && selectedInstrument\n                                  ? {\n                                        accessibilityLabel: language.translate(\n                                            'payment.credit_card_number_label',\n                                        ),\n                                        containerId: getHostedFieldId('ccNumber'),\n                                        instrumentId: selectedInstrument.bigpayToken,\n                                    }\n                                  : undefined,\n                      }\n                    : {\n                          cardCode: isCardCodeRequired\n                              ? {\n                                    accessibilityLabel: language.translate(\n                                        'payment.credit_card_cvv_label',\n                                    ),\n                                    containerId: getHostedFieldId('ccCvv'),\n                                }\n                              : undefined,\n                          cardExpiry: {\n                              accessibilityLabel: language.translate(\n                                  'payment.credit_card_expiration_label',\n                              ),\n                              containerId: getHostedFieldId('ccExpiry'),\n                              placeholder: language.translate(\n                                  'payment.credit_card_expiration_placeholder_text',\n                              ),\n                          },\n                          cardName: {\n                              accessibilityLabel: language.translate(\n                                  'payment.credit_card_name_label',\n                              ),\n                              containerId: getHostedFieldId('ccName'),\n                          },\n                          cardNumber: {\n                              accessibilityLabel: language.translate(\n                                  'payment.credit_card_number_label',\n                              ),\n                              containerId: getHostedFieldId('ccNumber'),\n                          },\n                      },\n                styles: styleContainerId\n                    ? {\n                          default: await getCreditCardInputStyles(styleContainerId, styleProps),\n                          error: await getCreditCardInputStyles(\n                              styleContainerId,\n                              styleProps,\n                              CreditCardInputStylesType.Error,\n                          ),\n                          focus: await getCreditCardInputStyles(\n                              styleContainerId,\n                              styleProps,\n                              CreditCardInputStylesType.Focus,\n                          ),\n                      }\n                    : {},\n                onBlur: ({ fieldType }) => {\n                    if (focusedFieldType === fieldType) {\n                        setFocusedFieldType(undefined);\n                    }\n                },\n                onCardTypeChange: ({ cardType }) => {\n                    setFieldValue('hostedForm.cardType', cardType);\n                },\n                onEnter: () => {\n                    setSubmitted(true);\n                    submitForm();\n                },\n                onFocus: ({ fieldType }) => {\n                    setFocusedFieldType(fieldType);\n                },\n                onValidate: ({ errors = {} }) => {\n                    forIn(errors, (fieldErrors = [], fieldType) => {\n                        const errorKey = `hostedForm.errors.${fieldType}`;\n\n                        setFieldValue(errorKey, fieldErrors[0]?.type ?? '');\n\n                        if (fieldErrors[0]) {\n                            setFieldTouched(errorKey);\n                        }\n                    });\n                },\n            };\n        },\n        [\n            focusedFieldType,\n            getHostedFieldId,\n            isCardCodeRequired,\n            isInstrumentCardCodeRequiredProp,\n            isInstrumentCardNumberRequiredProp,\n            language,\n            method,\n            setFieldValue,\n            setFieldTouched,\n            setFocusedFieldType,\n            setSubmitted,\n            submitForm,\n        ],\n    );\n    const cancelWorldpayModalFlow = useCallback(() => {\n        setThreeDSecureVerification(undefined);\n\n        if (ref.current.cancelThreeDSecureVerification) {\n            ref.current.cancelThreeDSecureVerification();\n            ref.current.cancelThreeDSecureVerification = undefined;\n        }\n    }, []);\n    const initializeWorldpayPayment = useCallback(\n        async (options: PaymentInitializeOptions, selectedInstrument: any) => {\n            return checkoutService.initializePayment({\n                ...options,\n                creditCard: {\n                    form: getHostedFormOptions && (await getHostedFormOptions(selectedInstrument)),\n                },\n                worldpay: {\n                    onLoad(content: HTMLIFrameElement, cancel: () => void) {\n                        setThreeDSecureVerification(content);\n                        ref.current.cancelThreeDSecureVerification = cancel;\n                    },\n                },\n            });\n        },\n        [checkoutService, getHostedFormOptions],\n    );\n    const hostedValidationSchema = getHostedCreditCardValidationSchema({ language });\n\n    const appendPaymentPageContent = useCallback(() => {\n        if (threeDSecureVerification) {\n            ref.current.paymentPageContentRef.current?.appendChild(threeDSecureVerification);\n        }\n    }, [threeDSecureVerification]);\n\n    return (\n        <>\n            <CreditCardPaymentMethodComponent\n                {...rest}\n                cardFieldset={\n                    <HostedCreditCardFieldset\n                        additionalFields={\n                            method.config.requireCustomerCode && (\n                                <CreditCardCustomerCodeField name=\"ccCustomerCode\" />\n                            )\n                        }\n                        cardCodeId={isCardCodeRequired ? getHostedFieldId('ccCvv') : undefined}\n                        cardExpiryId={getHostedFieldId('ccExpiry')}\n                        cardNameId={getHostedFieldId('ccName')}\n                        cardNumberId={getHostedFieldId('ccNumber')}\n                        focusedFieldType={focusedFieldType}\n                    />\n                }\n                cardValidationSchema={hostedValidationSchema}\n                checkoutService={checkoutService}\n                checkoutState={checkoutState}\n                deinitializePayment={checkoutService.deinitializePayment}\n                getStoredCardValidationFieldset={getHostedStoredCardValidationFieldset}\n                initializePayment={initializeWorldpayPayment}\n                language={language}\n                method={method}\n                paymentForm={paymentForm}\n                storedCardValidationSchema={hostedStoredCardValidationSchema}\n            />\n            <Modal\n                isOpen={!!threeDSecureVerification}\n                onAfterOpen={appendPaymentPageContent}\n                onRequestClose={cancelWorldpayModalFlow}\n                shouldShowCloseButton={true}\n            >\n                <div ref={ref.current.paymentPageContentRef} />\n            </Modal>\n        </>\n    );\n};\n\nexport default toResolvableComponent<PaymentMethodProps, PaymentMethodResolveId>(\n    WorldpayCreditCardPaymentMethod,\n    [{ id: 'worldpayaccess' }],\n);\n"],"names":["checkoutService","isEmbedded","rest","initializePaypalExpressPayment","useCallback","options","initializePayment","paypalexpress","useRedirectFlow","deinitializePayment","id","initializeBraintreePaypalPaymentMethod","defaultOptions","onUnhandledError","language","method","paymentForm","braintree","containerId","submitForm","setSubmitted","onError","error","message","Error","translate","onRenderButton","hidePaymentSubmitButton","checkoutState","initializationData","embeddedOneClickEnabled","memoize","bic","required","toResolvableComponent","setValidationSchema","idealIssuers","idealIssuersSelectOptions","map","issuer","value","issuerId","label","issuerName","initializeIdeal","getIdealValidationSchema","gatewayId","gateway","methodId","deinitializeIdeal","useEffect","Fieldset","legend","Legend","hidden","style","paddingBottom","BlueSnapDirectSelectField","labelContent","name","helperLabel","items","BraintreeAchFieldType","OwnershipTypes","AccountTypes","accountTypeOptions","Savings","Checking","ownershipTypeOptions","Personal","Business","defaultBraintreeAchFormFields","AccountType","custom","fieldType","DynamicFormFieldType","DROPDOWM","AccountNumber","max","min","RoutingNumber","OwnershipType","personalBraintreeAchFormFields","FirstName","LastName","businessBraintreeAchFormFields","BusinessName","currentInstrument","setCurrentInstrument","useState","customer","data","getCustomer","instruments","getInstruments","setFieldValue","accountInstruments","useMemo","filter","isAchInstrument","isInstrumentFeatureAvailable","isGuest","Boolean","config","isVaultingEnabled","shouldShowInstrumentFieldset","length","shouldCreateNewInstrument","shouldConfirmInstrument","trustedShippingAddress","getDefaultInstrument","defaultInstrument","undefined","handleSelectInstrument","find","bigpayToken","handleUseNewInstrument","getValidationSchema","formFields","getFieldValue","requiredFieldErrorTranslationIds","reduce","schema","matches","validateBraintreeAchForm","braintreeAchFormValues","accountNumber","businessName","routingNumber","ownershipType","firstName","lastName","validationSchema","isValidAccountNumber","isValidRoutingNumber","isValidFirstName","isValidLastName","isValidBusinessName","Promise","all","fields","isValid","isValidDepositoryName","resetFormValidation","getTranslatedLabelByFieldName","fieldName","braintreeAchFormLabelsMap","accountType","Object","values","includes","isBraintreeAchFormFieldName","fieldValues","handleChange","fieldId","field","DynamicFormField","extraClass","key","onChange","updateMandateText","getFormValues","fullName","String","depositoryName","outstandingBalance","getCheckout","storeName","getConfig","storeProfile","symbol","getCart","currency","mandateTextTranslationKey","formattedDate","Date","now","toJSON","slice","split","reverse","join","mandateTextTranslationProps","toLowerCase","currentDate","mandateText","className","CheckboxFormField","isValidForm","setIsValidForm","disableSubmit","getBillingAddress","defaultFormValues","shouldSaveInstrument","shouldSetAsDefaultInstrument","instrumentId","orderConsent","entries","resetFormValues","shouldShowForm","shouldShowMandateTextCheckbox","validate","mandateTextConfirmationCheckboxValue","AccountInstrumentFieldset","A","onSelectInstrument","onUseNewInstrument","selectedInstrument","TranslatedString","StoreInstrumentFieldset","isAccountInstrument","currentMandateTextRef","useRef","braintreeach","getMandateText","current","loadInstruments","isLoading","statuses","isLoadingInstruments","isLoadingPaymentMethod","formContextProps","isSubmitted","FormContext","Provider","CheckoutContext","LocaleProvider","PaymentFormContext","LoadingOverlay","hideContentWhenLoading","currentMandateText","initializationComponentMap","card_ui","HostedCreditCardPaymentMethod","none","props","onMount","noop","onInit","onDeinit","catch","usePropsToOnMount","componentKey","initializationStrategy","type","Component","memo","bodyClassName","children","classNameSelected","headerClassName","headerClassNameSelected","headerContent","itemId","onToggle","selectedItemId","useContext","AccordionContext","isSelected","transitionEndListener","node","done","addEventListener","target","CSSTransition","addEndListener","classNames","in","mountOnEnter","timeout","unmountOnExit","Input","checked","Label","htmlFor","isDisabled","content","htmlId","kebabCase","Checklist","C","renderInput","memoizeOne","disabled","Function","selectedValue","renderHeaderContent","BasicFormField","render","placement","tooltip","shouldShow","setShouldShow","handleShow","handleHide","ref","onBlur","onFocus","onMouseEnter","onMouseLeave","modifiers","enabled","initializeBoltPayment","bolt","useBigCommerceCheckout","applepay","shippingLabel","subtotalLabel","PaymentMethodType","renderPayPalCardComponent","cardType","mapFromInstrumentCardType","brand","CreditCardIcon","last4","PoweredByPayPalFastlaneLabel","Button","onClick","result","size","Tiny","testId","variant","Secondary","showPayPalCardSelector","setSelectedInstrument","getPaymentProviderCustomer","paymentProviderCustomer","paypalFastlaneCustomer","instrument","useBraintreeFastlaneInstruments","shouldShowInstrumentsForm","paypalFastlaneComponentRef","isInitializingPayment","braintreefastlane","isAddingNewCard","setIsAddingNewCard","selectedInstrumentId","setSelectedInstrumentId","shouldShowCreditCardFieldset","getDefaultInstrumentId","defaultInstrumentId","CardInstrumentFieldset","onDeleteInstrument","display","tabIndex","getStylesFromElement","properties","container","document","querySelector","getAppliedStyles","copyStylesFromDummyFormFields","styleProps","default","input","focus","difference","mapToSquareStyles","styles","borderColor","borderRadius","borderWidth","borderColorIsFocus","borderWidthIsFocus","inputIsFocus","borderColorIsError","borderWidthIsError","color","colorIsError","squarev2","description","paymentDescriptor","paymentToken","initializeAmazonPayV2Payment","amazonpay","editButtonId","reload","window","location","setSubmit","isPaymentDataRequired","checkout","buttonId","hideWidget","isInstrumentCardCodeRequired","isInstrumentCardNumberRequired","isSignInRequired","isSignedIn","some","payments","providerId","onSignOut","shouldShowDescriptor","shouldShowEditButton","signOut","signOutCustomer","focusedFieldType","setFocusedFieldType","setFieldTouched","isInstrumentCardCodeRequiredProp","isInstrumentCardNumberRequiredProp","cardCode","showCardHolderName","isCardCodeRequired","isCardHolderNameRequired","getHostedFieldId","compact","getHostedFormOptions","styleContainerId","cardCodeVerification","accessibilityLabel","cardNumberVerification","cardExpiry","placeholder","cardName","cardNumber","Focus","onCardTypeChange","onEnter","onValidate","errors","forIn","fieldErrors","errorKey","hostedFieldset","additionalFields","requireCustomerCode","cardCodeId","cardExpiryId","cardNameId","cardNumberId","hostedValidationSchema","getHostedStoredCardValidationFieldset","initializeHostedCreditCardPayment","creditCard","form","hostedStoredCardValidationSchema","cardFieldset","cardValidationSchema","getStoredCardValidationFieldset","storedCardValidationSchema","initializeVisaCheckoutPayment","mergedOptions","braintreevisacheckout","onPaymentSelect","reinitializePayment","editButtonClassName","signInButtonClassName","BraintreeVisaCheckout","AdyenCardFields","getInitialValidationState","shouldShowNumberField","validationState","CardNumber","valid","SecurityCode","ExpiryDate","isFieldInvalid","fieldKey","fieldsValidation","verificationFieldsContainerId","paymentMethod","cardValidationState","setFieldsValidation","endDigits","showValidationIcon","transform","right","alt","src","UntrustedShippingCardVerificationType","shouldHideInstrumentExpiryDate","validateInstrument","shouldRenderAdditionalActionContentModal","isModalVisible","cancelAdditionalActionModalFlow","additionalActionContainerId","isInstrumentCardCodeRequiredSelector","isInstrumentCardNumberRequiredSelector","HostedWidgetPaymentComponent","hideContentWhenSignedOut","shouldRenderCustomInstrument","Modal","additionalBodyClassName","closeButtonLabel","isOpen","onRequestClose","shouldShowCloseButton","overlay","width","AdyenV3PaymentMethodType","shouldShowModal","setShouldRenderAdditionalActionContentModal","isAdditionalActionContentModalVisible","setIsAdditionalActionContentModalVisible","setCardValidationState","cardVerificationContainerId","component","bcmc","onBeforeLoad","shopperInteraction","onComplete","cancelAdditionalAction","onActionHandled","onLoad","cancel","initializeAdyenPayment","adyenOptions","scheme","hasHolderName","holderNameRequired","adyenv3","hasVaultedInstruments","additionalActionOptions","widgetSize","validateCardFields","state","isInitializing","isAddingNewInstrument","setIsAddingNewInstrument","derivedProps","filterAccountInstruments","filterTrustedInstruments","isUsingMultiShipping","isPaymentDataSubmitted","cart","currentMethodInstruments","trustedInstruments","isNewAddress","getHostedPaymentMethodDerivedProps","isInstrumentFeatureAvailableProp","currentSelectedInstrument","coupon","displayName","code","giftCertificate","ShopperCurrency","amount","used","remaining","height","viewBox","xmlns","d","isRemoving","onRemove","AppliedCouponChecklistItem","onRemoved","handleRemove","AppliedGiftCertificateChecklistItem","coupons","giftCertificates","isRemovingCoupon","isRemovingGiftCertificate","onRemovedCoupon","onRemovedGiftCertificate","RedeemableForm","appliedRedeemableError","isApplyingRedeemable","clearError","isSubmittingOrder","themeV2","handleSubmitForm","handleKeyDown","event","keyCode","preventDefault","handleSubmit","renderLabel","renderErrorMessage","errorCode","errorMessage","Alert","TextInput","onKeyDown","renderContent","FormField","withLanguage","mapPropsToValues","redeemableCode","applyCoupon","applyGiftCertificate","trim","shouldCollapseCouponCode","showAppliedRedeemables","formProps","Toggle","openByDefault","toggle","href","initializeGooglePayPayment","loadingContainerId","AdyenV2GooglePay","walletButton","AdyenV3GooglePay","AuthorizeNetGooglePay","BNZGooglePay","BigCommercePaymentsGooglePay","BraintreeGooglePay","PayPalCommerceGooglePay","StripeGooglePay","StripeUPEGooglePay","CybersourceV2GooglePay","OrbitalGooglePay","CheckoutcomGooglePay","WorldpayAccessGooglePay","TdOnlineMartGooglePay","StripeOCSGooglePay","createContext","unformatCreditCardNumber","separator","card","number","replace","RegExp","PaymentMethodProviderType","initializeMonerisPayment","paymentConfig","moneris","_shouldShowNumber","isLoadingIframe","setisLoadingIframe","paymentPageContent","setPaymentPageContent","paymentPageContentRef","createRef","cancelBlueSnapV2ModalFlow","cancelBlueSnapV2Payment","initializeBlueSnapV2Payment","bluesnapv2","border","appendPaymentPageContent","appendChild","additionalModalClassName","onAfterOpen","maxLength","useFloatingLabel","autoComplete","isFloatingLabelEnabled","HiddenInput","restField","selectedIssuer","_","helpers","setValue","IssuerSelectButton","OptionButton","image","size1x","issuers","paymentMethodsResponse","setSelectedIssuer","handleClick","currentTarget","_selectedIssuer","dataset","issuersList","DropdownTrigger","dropdown","isCreditCard","cardNumberElementOptions","cardHolderElementOptions","cardCvcElementOptions","TooltipTrigger","CreditCardCodeTooltip","IconHelp","cardExpiryElementOptions","MolliePaymentMethodType","paymentContext","localeContext","LocaleContext","getCreditCardInputStyles","HostedCreditCardValidation","initializeMolliePayment","mollieElements","getMolliesElementOptions","mollie","cardCvcId","cardHolderId","base","invalid","unsupportedMethodMessage","disableButton","creditcard","renderCustomPaymentForm","getHostedInstrumentValidationSchema","initializeKlarnaPayment","klarna","isBlueSnapDirectInitializationData","object","sepaCreditorCompanyName","array","Array","isArray","checkoutcomPaymentMethodsArray","checkoutComShemas","oxxo","ccDocument","qpay","notRequired","boleto","sepa","iban","sepaMandate","ideal","fawry","customerMobile","customerEmail","email","displayNamePrefix","isSepaInstrument","shouldRenderFields","setDisabled","toggleSubmitButton","shopperPermission","initializeSepa","deinitializeSepa","getSepaValidationSchema","BlueSnapDirectTextField","creditorName","mapToRedeemableProps","context","getCoupons","getGiftCertificates","isApplyingCoupon","isApplyingGiftCertificate","getApplyCouponError","getApplyGiftCertificateError","getRemoveCouponError","getRemoveGiftCertificateError","removeCoupon","removeGiftCertificate","removedRedeemableError","checkoutSettings","isCouponCodeCollapsed","braintreelocalmethods","buttonText","brandName","agreementTranslationOptions","privacyPolicyUrl","termsUrl","benefitsList","BoltCreateAccountCheckbox","TranslatedHtml","additionalClassName","showCreateAccountCheckbox","setShowCreateAccountCheckbox","boltEmbeddedContainerId","hasBoltAccount","isGuestCustomer","initializePayByBank","getPayByBankValidationSchema","deinitializePayByBank","BluesnapECPAccountType","DynamicInput","TELEPHONE","shouldRenderCompanyName","ConsumerChecking","ConsumerSavings","CorporateChecking","CorporateSavings","companyName","initializeEcp","deinitializeEcp","company","getEcpValidationSchema","defaultSelectedItemId","onSelect","setSelectedItemId","handleToggleItem","getContextValue","newSelectedItemId","ChecklistContext","connectFormik","formik","handleSelect","contextValue","forwardRef","body","header","renderModal","footer","Small","ModalTrigger","modal","line","Fragment","TermsConditionsType","TermsConditionsModalCheckboxField","terms","translatedLabel","url","parsedLabel","parseAnchor","ModalHeader","TermsConditionsCheckboxField","TermsConditionsTextField","defaultValue","readOnly","TextArea","isTermsConditionsTextArea","isTermsConditionModal","mapSubmitOrderErrorMessage","shouldLocalise","subtype","err","mapSubmitOrderErrorTitle","unformatCreditCardExpiryDate","month","year","test","getUniquePaymentMethodId","parseUniquePaymentMethodId","hasCreditCardNumber","hasCreditCardExpiry","TermsConditions","termsConditionsUrl","termsConditionsText","TermsConditionsField","Link","getPaymentValidationSchema","additionalValidation","isTermsConditionsRequired","schemaFields","paymentProviderRadio","schemaFieldsWithTerms","concat","oneOf","getTermsConditionsValidationSchema","BigCommercePaymentsPayLater","bigcommerce_payments_paylater","bannerContainerId","selectedCardType","cardTypes","filteredCardTypes","getPaymentMethodTitle","basePath","storeCountryCode","cdnPath","path","paymentWithLogo","methodsWithLogo","methodName","getPaymentMethodName","methodDisplayName","PaymentMethodId","PaypalCommerceCredit","BraintreePaypalCredit","payPalCreditProductBrandName","credit","AdyenV2","AdyenV3","getPaymentMethodDisplayName","customTitles","CreditCard","logoUrl","titleText","BraintreeVenmo","subtitle","PaypalCredit","BraintreeAch","BraintreeLocalPaymentMethod","BigCommercePaymentsPayPal","BigCommercePaymentsAlternativeMethod","PaypalCommerce","PaypalCommerceAlternativeMethod","VisaCheckout","Affirm","Afterpay","isExperimentEnabled","AmazonPay","ApplePay","Bolt","Clearpay","GooglePay","PayWithGoogle","Humm","Klarna","enableBillie","Laybuy","Masterpass","Paypal","Quadpay","Sezzle","Zip","Barclaycard","Mollie","Checkoutcom","StripeV3","StripeUPE","WorldpayAccess","BlueSnapDirect","PaypalCommerceVenmo","BigCommercePaymentsVenmo","PaypalPaymentsPro","Ratepay","withCheckout","cdnBasePath","getSubtitle","supportedCards","mapFromPaymentMethodCardType","instrumentSelected","provider","getInstrumentForMethod","hostedForm","ccNumber","getSelectedCardType","PaymentFormProvider","lazy","then","module","AdyenV2PaymentMethod","AdyenV3PaymentMethod","AffirmPaymentMethod","AfterpayPaymentMethod","AmazonPayV2PaymentMethod","ApplePayPaymentMethod","BarclaycardPaymentMethod","BigCommercePaymentsPaymentMethod","BigCommercePaymentsAPMsPaymentMethod","BigCommercePaymentsCreditCardsPaymentMethod","BigCommercePaymentsFastlanePaymentMethod","BigCommercePaymentsPayLaterPaymentMethod","BigCommercePaymentsVenmoPaymentMethod","BigCommercePaymentsRatePayPaymentMethod","BlueSnapDirectEcpPaymentMethod","BlueSnapDirectAlternativePaymentMethod","BlueSnapDirectSepaPaymentMethod","BlueSnapDirectIdealPaymentMethod","BlueSnapV2PaymentMethod","BlueSnapDirectPayByBankPaymentMethod","BoltClientPaymentMethod","BoltEmbeddedPaymentMethod","BoltPaymentMethod","BraintreeAchPaymentMethod","BraintreeFastlanePaymentMethod","BraintreePaypalPaymentMethod","VisaCheckoutPaymentMethod","BraintreeVenmoPaymentMethod","CheckoutcomCustomPaymentMethod","ClearpayPaymentMethod","GooglePayPaymentMethod","HostedPaymentMethod","KlarnaPaymentMethod","KlarnaV2PaymentMethod","MolliePaymentMethod","MonerisPaymentMethod","OfflinePaymentMethod","PayPalCommerceAPMsPaymentMethod","PayPalCommerceCreditPaymentMethod","PayPalCommerceCreditCardsPaymentMethod","PayPalCommerceFastlanePaymentMethod","PayPalCommercePaymentMethod","PayPalCommerceVenmoPaymentMethod","PaypalCommerceRatePayPaymentMethod","PaypalExpressPaymentMethod","PPSDKPaymentMethod","SquareV2PaymentMethod","StripeOCSPaymentMethod","StripeUPEPaymentMethod","StripeV3PaymentMethod","WorldpayCreditCardPaymentMethod","ComponentRegistry","BraintreeCreditCardPaymentMethod","MasterpassPaymentMethod","PaypalPaymentsProPaymentMethod","deinitializeCustomer","initializeCustomer","Suspense","Braintree","Hosted","Api","withPayment","withForm","formikContext","formContext","ResolvedPaymentMethod","query","useLazyLoad","components","resolveLazyComponent","resolveComponent","resolvePaymentMethod","PaymentMethod","validateForm","createPaymentFormService","getPaymentMethodFromListValue","methods","PaymentMethodListItem","renderPaymentMethod","PaymentMethodV2","renderPaymentMethodTitle","isCustomChecklistItem","ChecklistItem","role","get","navigator","userAgent","redeemableProps","Redeemable","providersWithCustomClasses","PaymentSubmitButtonText","methodType","methodGateway","initialisationStrategyType","isComplete","IconBolt","BlueSnapV2","PaypalVenmo","continueActionId","continueTranslationId","completeTranslationId","isInitializingCustomer","isSubmitting","isFullWidth","Large","Action","SpamProtectionField","shouldShowRetryButton","handleRetry","this","verify","componentDidMount","didExceedSpamLimit","isExecutingSpamCheck","executeSpamCheck","setState","isErrorWithType","withCurrency","availableStoreCredit","usableStoreCredit","isStoreCreditApplied","Tooltip","storeCredit","toCustomerCurrency","CheckboxInput","PaymentMethodSubmitButtonContainer","PaymentMethodListFieldset","onMethodSelect","resetForm","handlePaymentMethodSelect","updatedValues","ccCustomerCode","ccCvv","ccExpiry","ccName","shouldCreateAccount","Extension","region","paymentFormConfig","defaultGatewayId","defaultMethodId","onSubmit","omitBy","isNil","onStoreCreditChange","selectedMethod","shouldDisableSubmit","shouldHidePaymentSubmitButton","shouldExecuteSpamCheck","selectedMethodId","Form","Payment","isReady","validationSchemas","submitFunctions","uniqueId","handleBeforeUnload","defaultMethod","PPSDK","skipRedirectConfirmationAlert","returnValue","handleCloseModal","cartUrl","loadCheckout","errorType","headers","status","top","assign","handleStoreCreditChange","useStoreCredit","applyStoreCredit","e","handleError","errorLogger","log","loadPaymentMethods","onCartChangedError","onSubmitError","submitOrder","analyticsTracker","clickPayButton","customSubmit","payload","payment","paymentData","isEmpty","mapToOrderRequestBody","order","getOrder","paymentComplete","orderId","paymentRejected","isCartChangedError","setSelectedMethod","trackSelectedPaymentMethod","fn","finalizeOrderIfNeeded","onFinalize","onFinalizeError","onReady","checkoutServiceSubscribe","loadPaymentMethodsOrThrow","grandTotalChangeUnsubscribe","handleCartTotalChange","grandTotal","componentDidUpdate","checkEmbeddedSupport","componentWillUnmount","removeEventListener","finalizeOrderError","uniqueSelectedMethodId","PaymentContext","ChecklistSkeleton","renderOrderErrorModal","renderEmbeddedSupportErrorModal","shouldLocaliseErrorMessages","submitOrderError","ErrorModal","bind","onClose","title","selectedPaymentMethod","mapToPaymentProps","getConsignments","getPaymentMethod","getPaymentMethods","getFinalizeOrderError","getSubmitOrderError","consignments","stripeLinkAuthenticationState","stripeUpePaymentMethod","enableTermsAndConditions","isTermsConditionsEnabled","features","orderTermsAndConditionsType","termsConditionsType","orderTermsAndConditions","termsCondtitionsText","orderTermsAndConditionsLink","termsCondtitionsUrl","selectedPayment","providerType","filteredMethods","showInCheckout","multiShippingIncompatibleMethodIds","hasDefaultStoredInstrument","links","cartLink","subscribe","Math","withAnalytics","OriginalComponent","InnerComponent","prevFormik","prevProps","nextFormik","nextProps","DecoratedComponent","setIsOpen","canHandleEventRef","handleOpen","onKeyPress","keyboardEvent","showAdditionalActionContent","AdyenV2PaymentMethodType","setShowAdditionalActionContent","threeDS2ContainerId","showImage","adyenv2","rows","renderSelect","initializeKlarnaV2Payment","klarnav2","formatAccountMask","accountMask","padding","card_information","cardData","isWalletButtonInitializationData","expiryMonth","expMonth","expiryYear","expYear","accountNum","expDate","substr","niceType","translations","getTranslatedPaymentMethodName","MultiOption","capitalize","providerName","editButtonLabel","signInButtonLabel","onSignOutError","billingAddress","walletPaymentData","isPaymentSelected","toggleSubmit","currentIsPaymentDataRequired","handleSignOut","TextField","labelId","restProps","DropdownButton","ccDocumentField","debtor","creditor","sepaCreditor","sepaCreditorAddress","sepaCreditorPostalCode","sepaCreditorCity","sepaCreditorCountry","creditorId","sepaCreditorIdentifier","address1","postalCode","city","stateOrProvinceCode","countryCode","isChecked","bicValue","setBicValue","isIdealHostedPageExperimentOn","checkoutCustomMethod","CheckoutcomCustomFieldset","CreditCardPaymentMethodComponent","threeDSecureVerification","setThreeDSecureVerification","cancelWorldpayModalFlow","cancelThreeDSecureVerification","initializeWorldpayPayment","worldpay"],"sourceRoot":""}