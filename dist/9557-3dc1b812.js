"use strict";(self.webpackJsonpCheckout=self.webpackJsonpCheckout||[]).push([[9557],{12929:(e,t,r)=>{r.d(t,{A:()=>d});var n=r(70355),a=r(49655),o=r(88186),i=r(30680);const d=({appearFocused:e,id:t,name:r})=>{const d=(0,n.useCallback)((()=>n.createElement(o.A,{appearFocused:e,id:t})),[t,e]);return n.createElement(i.A,{additionalClassName:"form-field--ccExpiry",input:d,labelContent:n.createElement(a.A,{id:"payment.credit_card_expiration_label"}),name:r})}},29557:(e,t,r)=>{r.r(t),r.d(t,{StripeLinkV2Button:()=>O,StripeOCSPaymentMethod:()=>y,StripeUPEPaymentMethod:()=>v,StripeV3PaymentMethod:()=>N});var n=r(31635),a=r(69440),o=r(70355),i=r(89799),d=r(48407),c=r(31448),l=r(19285),s=r(32312),m=r(17080),u=r(59713);const p=(e,t,r)=>{const n=document.querySelector(e);return n?(0,u.A)(n,t,r):{}},h=(e=0)=>"number"!=typeof e?parseInt(e,10):e,b=(e='link[href*="font"]')=>{const t=document.querySelectorAll(e),r=[];return t.forEach((e=>{const t=null==e?void 0:e.getAttribute("href");t&&r.push({cssSrc:t})})),r},f=e=>{const t="18px",r="13px",n=p(`#${e}--input`,["color","background-color","border-color","box-shadow","font-family"]),o=p(`#${e}--label`,["color"]),i=p(`#${e}--error`,["color"]),d=p(`#${e}--accordion-header .form-label`,["color","font-size","font-family","font-weight","padding-top","padding-right","padding-bottom"]),c=p(`#${e}--accordion-header-selected`,["background-color"]),l=p(`#${e}--accordion-header.optimizedCheckout-form-checklist-item`,["border-bottom","border-color"]),{color:s,"font-size":m,"font-family":u,"font-weight":b,"padding-top":f=r,"padding-right":y=t,"padding-bottom":v=r}=d,g=(0,a.isEmpty)(d)?void 0:`${f} ${y} ${v} ${t}`,C=p(`#${e}--accordion-header .form-label`,["border-color","border-width","width","background-color"],"::before"),E=p(`#${e}--accordion-header .form-label`,["border-color","border-width","width","background-color"],"::after"),I=p(`#${e}--accordion-header-selected .form-label`,["border-color","background-color"],"::before");let k=p(".form-checklist-header--selected .form-label",["border-color","background-color","width","transform"],"::after");(0,a.isEmpty)(k)&&(k=p(`#${e}--accordion-header-selected .form-label`,["border-color","background-color","width","transform"],"::after"));const S=k.width||C.width,A=((e="")=>{const t=/matrix\(([^)]+)\)/.exec(e);if(!t)return;return t[1].split(",").map((e=>parseFloat(e.trim())))[0]})(k.transform)||.66,_=(e=>{const{radioIconOuterWidth:t=26,radioIconOuterStrokeWidth:r=1,radioIconInnerWidth:n=17}=e||{},a=h(t),o=h(r),i=h(n);return{outerWidth:`${(a/.88).toFixed(2)}px`,outerStrokeWidth:`${(o/a*88).toFixed(2)}px`,innerRadius:(i/a*88/2).toFixed(2)}})({radioIconOuterWidth:C.width,radioIconOuterStrokeWidth:C["border-width"],radioIconInnerWidth:S&&h(S)*A});return{variables:{colorPrimary:n["box-shadow"],colorBackground:n["background-color"],colorText:o.color,colorDanger:i.color,colorTextSecondary:o.color,colorTextPlaceholder:n.color,colorIcon:n.color,fontFamily:u||n["font-family"]},rules:{".Input":{borderColor:n["border-color"],color:n.color,boxShadow:n["box-shadow"]},".AccordionItem":{borderRadius:0,borderWidth:0,borderBottom:l["border-bottom"],borderColor:l["border-color"],boxShadow:"none",fontSize:m,fontWeight:b,color:s,padding:g},".AccordionItem:hover":{backgroundColor:c["background-color"],color:s},".AccordionItem--selected":{fontWeight:"bold",color:s,backgroundColor:c["background-color"]},".TabLabel":{color:s},".RadioIcon":{width:_.outerWidth},".RadioIconInner":{r:_.innerRadius,fill:E["background-color"]},".RadioIconOuter":{strokeWidth:_.outerStrokeWidth,stroke:C["border-color"],fill:C["background-color"]},".RadioIconInner--checked":{r:_.innerRadius,fill:k["background-color"]},".RadioIconOuter--checked":{stroke:I["border-color"],fill:I["background-color"]}}}},y=(0,l.A)((e=>{var{paymentForm:t,checkoutState:r,checkoutService:l,method:u,onUnhandledError:p=a.noop}=e,h=(0,n.__rest)(e,["paymentForm","checkoutState","checkoutService","method","onUnhandledError"]);const y=(0,o.useRef)(),v=(0,o.useRef)(),{onToggle:g,selectedItemId:C}=(0,o.useContext)(s.A),[E,I]=(0,o.useState)(C),[k,S]=(0,o.useState)(!1),A=`${u.gateway}-${u.id}`,_=`${A}-component-field`,F=t;(0,o.useEffect)((()=>{v.current&&(clearTimeout(v.current),v.current=void 0),E&&C!==E&&(v.current=setTimeout((()=>{g(E)}),100))}),[g]),(0,o.useEffect)((()=>{var e;C!==A&&(I(C),null===(e=y.current)||void 0===e||e.call(y))}),[C,A]),(0,o.useEffect)((()=>{E===A&&g(E)}),[E,A]);const w=(0,o.useCallback)((()=>{F.hidePaymentSubmitButton(u,!1)}),[F,u]),{hidePaymentSubmitButton:N,disableSubmit:x,setFieldValue:z,setSubmit:O,setValidationSchema:P}=t,$=r.data.getInstruments(u)||[],{data:{getCheckout:R,isPaymentDataRequired:T},statuses:{isLoadingInstruments:V}}=r,B=R(),W=(0,o.useCallback)((e=>(0,n.__awaiter)(void 0,void 0,void 0,(function*(){return S(!0),l.initializePayment(Object.assign(Object.assign({},e),{stripeocs:{containerId:_,layout:{type:"accordion",defaultCollapsed:C!==A,radios:!0,linkInAccordion:!0,spacedAccordionItems:!1,visibleAccordionItemsCount:0},appearance:f(_),fonts:b(),onError:p,render:w,paymentMethodSelect:I,handleClosePaymentMethod:e=>{y.current=e},togglePreloader:S}}))}))),[_,C,A,l,p,w,I,S]);return o.createElement(o.Fragment,null,k?o.createElement("div",{"data-test":"stripe-accordion-skeleton",style:{padding:"10px 18px"}},o.createElement(m.A,null)):o.createElement("style",null,`\n                .custom-checklist-item#radio-${A} {\n                    border-bottom: none;\n                }\n                .custom-checklist-item#radio-${A}:last-of-type {\n                    margin-bottom: -1px;\n                }\n            `),o.createElement(i.A,Object.assign({},h,{containerId:_,deinitializePayment:l.deinitializePayment,disableSubmit:x,hideContentWhenSignedOut:!0,hidePaymentSubmitButton:N,initializePayment:W,instruments:$,isInstrumentCardCodeRequired:(0,d.A)(r),isInstrumentCardNumberRequired:(0,c.A)(r),isInstrumentFeatureAvailable:!1,isLoadingInstruments:V(),isPaymentDataRequired:T(),isSignedIn:(0,a.some)(null==B?void 0:B.payments,{providerId:u.id}),loadInstruments:l.loadInstruments,method:u,setFieldValue:z,setSubmit:O,setValidationSchema:P,signOut:l.signOutCustomer})),o.createElement("div",{style:{display:"none"}},o.createElement("div",{className:"form-checklist-item optimizedCheckout-form-checklist-item",id:`${_}--accordion-header`},o.createElement("input",{className:"form-checklist-checkbox optimizedCheckout-form-checklist-checkbox",id:`${_}-radio-input`,type:"radio"}),o.createElement("div",{className:"form-label optimizedCheckout-form-label"})),o.createElement("div",{className:"form-checklist-header--selected",id:`${_}--accordion-header-selected`},o.createElement("input",{className:"form-checklist-checkbox optimizedCheckout-form-checklist-checkbox",defaultChecked:!0,id:`${_}-radio-input-selected`,type:"radio"}),o.createElement("div",{className:"form-label optimizedCheckout-form-label"})),o.createElement("div",{className:"optimizedCheckout-form-input",id:`${_}--input`},o.createElement("div",{className:"form-field--error"},o.createElement("div",{className:"optimizedCheckout-form-label",id:`${_}--error`})),o.createElement("div",{className:"optimizedCheckout-form-label",id:`${_}--label`}))))}),[{gateway:"stripeocs",id:"optimized_checkout"}]),v=(0,l.A)((e=>{var{paymentForm:t,checkoutState:r,checkoutService:l,method:s,onUnhandledError:m=a.noop}=e,p=(0,n.__rest)(e,["paymentForm","checkoutState","checkoutService","method","onUnhandledError"]);const h=`stripe-${s.id}-component-field`,b=t,f=(0,o.useCallback)((()=>{b.hidePaymentSubmitButton(s,!1)}),[b,s]),{hidePaymentSubmitButton:y,disableSubmit:v,setFieldValue:g,setSubmit:C,setValidationSchema:E}=t,I=r.data.getInstruments(s)||[],{data:{getCheckout:k,isPaymentDataRequired:S,getPaymentProviderCustomer:A},statuses:{isLoadingInstruments:_}}=r,F=k(),w=r.data.getCustomer(),N=A(),x=null==N?void 0:N.stripeLinkAuthenticationState,z=null==w?void 0:w.isGuest,O=(0,o.useMemo)((()=>!(!z&&x)),[z,x])&&!z&&Boolean(s.config.isVaultingEnabled),P=(e,t)=>{const r=document.getElementById(e);if(!r)throw new Error("Unable to retrieve input styles as the provided container ID is not valid.");return(0,u.A)(r,t)},$=(0,o.useCallback)((e=>(0,n.__awaiter)(void 0,void 0,void 0,(function*(){const t=P(`${h}--input`,["color","background-color","border-color","box-shadow"]),r=P(`${h}--label`,["color"]),n=P(`${h}--error`,["color"]);return b.hidePaymentSubmitButton(s,!0),l.initializePayment(Object.assign(Object.assign({},e),{stripeupe:{containerId:h,style:{labelText:r.color,fieldText:t.color,fieldPlaceholderText:t.color,fieldErrorText:n.color,fieldBackground:t["background-color"],fieldInnerShadow:t["box-shadow"],fieldBorder:t["border-color"]},onError:m,render:f}}))}))),[l,h,m,s,b,f]);return o.createElement(o.Fragment,null,o.createElement(i.A,Object.assign({},p,{containerId:h,deinitializePayment:l.deinitializePayment,disableSubmit:v,hideContentWhenSignedOut:!0,hidePaymentSubmitButton:y,initializePayment:$,instruments:I,isInstrumentCardCodeRequired:(0,d.A)(r),isInstrumentCardNumberRequired:(0,c.A)(r),isInstrumentFeatureAvailable:O,isLoadingInstruments:_(),isPaymentDataRequired:S(),isSignedIn:(0,a.some)(null==F?void 0:F.payments,{providerId:s.id}),loadInstruments:l.loadInstruments,method:s,setFieldValue:g,setSubmit:C,setValidationSchema:E,signOut:l.signOutCustomer})),o.createElement("div",{className:"optimizedCheckout-form-input",id:`${h}--input`},o.createElement("div",{className:"form-field--error"},o.createElement("div",{className:"optimizedCheckout-form-label",id:`${h}--error`})),o.createElement("div",{className:"optimizedCheckout-form-label",id:`${h}--label`})))}),[{gateway:"stripeupe"},{gateway:"stripeupe",id:"klarna"}]);var g=r(39527),C=r(49655),E=r(3375),I=r.n(E),k=r(90767),S=r(14456),A=r(97429),_=r(2224);const F=({options:e})=>o.createElement("div",{className:"form-ccFields"},o.createElement("div",{className:I()("form-field","form-field--stripe-ccNumber")},o.createElement("label",{className:"form-label optimizedCheckout-form-label",htmlFor:e.cardNumberElementOptions.containerId},o.createElement(C.A,{id:"payment.credit_card_number_label"})),o.createElement("div",{className:I()("form-input","optimizedCheckout-form-input","has-icon","widget-input--stripev3"),"data-cse":"CardNumber",id:e.cardNumberElementOptions.containerId}),o.createElement(S.A,null)),o.createElement("div",{className:"form-field form-field--ccExpiry"},o.createElement("label",{className:"form-label optimizedCheckout-form-label",htmlFor:e.cardExpiryElementOptions.containerId},o.createElement(C.A,{id:"payment.credit_card_expiration_label"})),o.createElement("div",{className:I()("form-input","optimizedCheckout-form-input","widget-input--stripev3"),"data-cse":"ExpiryDate",id:e.cardExpiryElementOptions.containerId})),o.createElement("div",{className:"form-field form-ccFields-field--ccCvv"},o.createElement("label",{className:"form-label optimizedCheckout-form-label",htmlFor:e.cardCvcElementOptions.containerId},o.createElement(C.A,{id:"payment.credit_card_cvv_label"}),o.createElement(A.A,{placement:"top-start",tooltip:o.createElement(k.A,null)},o.createElement("span",{className:"has-tip"},o.createElement(_.A,null)))),o.createElement("div",{className:I()("form-input","optimizedCheckout-form-input","has-icon","widget-input--stripev3"),"data-cse":"SecurityCode",id:e.cardCvcElementOptions.containerId}),o.createElement(S.A,null)));var w;!function(e){e.Alipay="alipay",e.Card="card",e.CardCvc="cardCvc",e.CardExpiry="cardExpiry",e.CardNumber="cardNumber",e.Iban="iban",e.IdealBank="idealBank"}(w||(w={}));const N=(0,l.A)((e=>{var{language:t,paymentForm:r,checkoutState:l,checkoutService:s,method:m,onUnhandledError:u=a.noop}=e,p=(0,n.__rest)(e,["language","paymentForm","checkoutState","checkoutService","method","onUnhandledError"]);const{useIndividualCardFields:h}=m.initializationData,b=m.id,f=b!==w.Alipay?"optimizedCheckout-form-input widget--stripev3":"",y=`stripe-${b}-component-field`,v=(0,o.useMemo)((()=>{const e={base:"form-input optimizedCheckout-form-input"};return{[w.Card]:{classes:e},[w.CardCvc]:{classes:e,placeholder:""},[w.CardExpiry]:{classes:e},[w.CardNumber]:{classes:e,showIcon:!0,placeholder:""},[w.Iban]:{classes:e,supportedCountries:["SEPA"]},[w.IdealBank]:{classes:e}}}),[]),{hidePaymentSubmitButton:E,disableSubmit:I,setFieldValue:k,setSubmit:S,setValidationSchema:A}=r,{data:{getCheckout:_,isPaymentDataRequired:N,getCustomer:x,getConfig:z},statuses:{isLoadingInstruments:O}}=l,P=_(),$=x(),R=z(),T=l.data.getInstruments(m)||[],V=!(null==$?void 0:$.isGuest)&&Boolean(m.config.isVaultingEnabled),B=(0,o.useMemo)((()=>R?R.links.siteLink:null),[R]),W=(0,o.useCallback)((e=>{"stripev3_error"===e.type&&"auth_failure"===e.subtype&&(e.message=t.translate("payment.stripev3_auth_3ds_fail")),u(e)}),[t,u]),D=(0,o.useCallback)((e=>({cardNumberElementOptions:Object.assign(Object.assign({},e[w.CardNumber]),{containerId:"stripe-card-number-component-field"}),cardExpiryElementOptions:Object.assign(Object.assign({},e[w.CardExpiry]),{containerId:"stripe-expiry-component-field"}),cardCvcElementOptions:Object.assign(Object.assign({},e[w.CardCvc]),{containerId:"stripe-cvc-component-field"})})),[]),j=(0,o.useCallback)((e=>h?D(e):e[b]),[b,D,h]),{getHostedStoredCardValidationFieldset:q,getHostedFormOptions:L}=(0,g.i)({checkoutState:l,method:m,language:t,paymentForm:r}),U=(0,o.useCallback)(((e,t)=>(0,n.__awaiter)(void 0,void 0,void 0,(function*(){return s.initializePayment(Object.assign(Object.assign({},e),{stripev3:Object.assign({containerId:y,options:j(v)},t&&{form:yield L(t)})}))}))),[y,j,v,s,L]);return o.createElement(o.Fragment,null,o.createElement(i.A,Object.assign({},p,{additionalContainerClassName:f,containerId:y,deinitializePayment:s.deinitializePayment,disableSubmit:I,hideContentWhenSignedOut:!0,hidePaymentSubmitButton:E,initializePayment:U,instruments:T,isInstrumentCardCodeRequired:(0,d.A)(l),isInstrumentCardNumberRequired:(0,c.A)(l),isInstrumentFeatureAvailable:V,isLoadingInstruments:O(),isPaymentDataRequired:N(),isSignedIn:(0,a.some)(null==P?void 0:P.payments,{providerId:m.id}),loadInstruments:s.loadInstruments,method:m,onUnhandledError:W,renderCustomPaymentForm:()=>{const e=D(v);return o.createElement(F,{options:e})},setFieldValue:k,setSubmit:S,setValidationSchema:A,shouldRenderCustomInstrument:h,signOut:s.signOutCustomer,validateInstrument:(e,t)=>q(t)})),"iban"===m.id&&o.createElement("p",{className:"stripe-sepa-mandate-disclaimer"},o.createElement(C.A,{data:{storeUrl:B},id:"payment.stripe_sepa_mandate_disclaimer"})))}),[{gateway:"stripev3"}]);var x=r(63582),z=r(4907);const O=(0,l.A)((e=>{const t={onComplete:z.A,loadingContainerId:"checkout-app",methodId:"optimized_checkout",gatewayId:"stripeocs"};return o.createElement(x.A,Object.assign({additionalInitializationOptions:t},e))}),[{id:"stripeocs"}])},36659:(e,t,r)=>{r.d(t,{A:()=>c});var n=r(70355),a=r(49655),o=r(88186),i=r(14456),d=r(30680);const c=({appearFocused:e,id:t,name:r})=>{const c=(0,n.useCallback)((()=>n.createElement(n.Fragment,null,n.createElement(o.A,{additionalClassName:"has-icon",appearFocused:e,id:t}),n.createElement(i.A,null))),[t,e]);return n.createElement(d.A,{additionalClassName:"form-field--ccNumber",input:c,labelContent:n.createElement(a.A,{id:"payment.credit_card_number_label"}),name:r})}},39527:(e,t,r)=>{r.d(t,{i:()=>s});var n=r(31635),a=r(69440),o=r(70355),i=r(48407),d=r(31448),c=r(82804),l=r(98363);const s=({checkoutState:e,method:t,language:r,paymentForm:s})=>{const{setFieldTouched:m,setFieldValue:u,setSubmitted:p,submitForm:h}=s,{config:b}=t,{cardCode:f}=b,y=f||null===f,v=(0,i.A)(e),g=(0,d.A)(e),C=(0,o.useCallback)((e=>`${(0,a.compact)([t.gateway,t.id]).join("-")}-${e}`),[t]),[E,I]=(0,o.useState)();return{getHostedStoredCardValidationFieldset:(0,o.useCallback)((e=>{const r=!!e&&g(e,t),n=!!e&&v(e,t);return o.createElement(l.A,{cardCodeId:n?C("ccCvv"):void 0,cardNumberId:r?C("ccNumber"):void 0,focusedFieldType:E})}),[E,C,v,g,t]),getHostedFormOptions:(0,o.useCallback)((e=>(0,n.__awaiter)(void 0,void 0,void 0,(function*(){const n=["color","fontFamily","fontSize","fontWeight"],o=!!e&&g(e,t),i=!!e&&v(e,t);let d;return e?i?d=C("ccCvv"):o&&(d=C("ccNumber")):d=C("ccNumber"),{fields:e?{cardCodeVerification:i&&e?{accessibilityLabel:r.translate("payment.credit_card_cvv_label"),containerId:C("ccCvv"),instrumentId:e.bigpayToken}:void 0,cardNumberVerification:o&&e?{accessibilityLabel:r.translate("payment.credit_card_number_label"),containerId:C("ccNumber"),instrumentId:e.bigpayToken}:void 0}:{cardCode:y?{accessibilityLabel:r.translate("payment.credit_card_cvv_label"),containerId:C("ccCvv")}:void 0,cardExpiry:{accessibilityLabel:r.translate("payment.credit_card_expiration_label"),containerId:C("ccExpiry"),placeholder:r.translate("payment.credit_card_expiration_placeholder_text")},cardName:{accessibilityLabel:r.translate("payment.credit_card_name_label"),containerId:C("ccName")},cardNumber:{accessibilityLabel:r.translate("payment.credit_card_number_label"),containerId:C("ccNumber")}},styles:d?{default:yield(0,c.A)(d,n),error:yield(0,c.A)(d,n,c.S.Error),focus:yield(0,c.A)(d,n,c.S.Focus)}:{},onBlur:({fieldType:e})=>{E===e&&I(void 0)},onCardTypeChange:({cardType:e})=>{u("hostedForm.cardType",e)},onEnter:()=>{p(!0),h()},onFocus:({fieldType:e})=>{I(e)},onValidate:({errors:e={}})=>{(0,a.forIn)(e,((e=[],t)=>{var r,n;const a=`hostedForm.errors.${t}`;u(a,null!==(n=null===(r=e[0])||void 0===r?void 0:r.type)&&void 0!==n?n:""),e[0]&&m(a)}))}}}))),[E,C,y,v,g,r,t,m,u,p,h])}}},47459:(e,t,r)=>{r.d(t,{A:()=>m});var n=r(70355),a=r(90767),o=r(49655),i=r(88186),d=r(14456),c=r(97429),l=r(2224),s=r(30680);const m=({appearFocused:e,id:t,name:r})=>{const m=(0,n.useCallback)((()=>n.createElement(n.Fragment,null,n.createElement(i.A,{additionalClassName:"has-icon",appearFocused:e,id:t}),n.createElement(d.A,null))),[t,e]),u=(0,n.useMemo)((()=>n.createElement(n.Fragment,null,n.createElement(o.A,{id:"payment.credit_card_cvv_label"}),n.createElement(c.A,{placement:"top-start",tooltip:n.createElement(a.A,null)},n.createElement("span",{className:"has-tip"},n.createElement(l.A,null))))),[]);return n.createElement(s.A,{additionalClassName:"form-ccFields-field--ccCvv",input:m,labelContent:u,name:r})}},63582:(e,t,r)=>{r.d(t,{A:()=>o});var n=r(31635),a=r(70355);const o=(0,r(19285).A)((({checkoutService:{deinitializeCustomer:e,initializeCustomer:t},checkoutButtonContainerClass:r,containerId:o,methodId:i,onUnhandledError:d,onWalletButtonClick:c,additionalInitializationOptions:l})=>((0,a.useEffect)((()=>((0,n.__awaiter)(void 0,void 0,void 0,(function*(){try{yield t({methodId:i,[i]:Object.assign({container:o,onUnhandledError:d,onClick:()=>c(i)},l)})}catch(e){"function"==typeof d&&e instanceof Error&&d(e)}})),()=>{(0,n.__awaiter)(void 0,void 0,void 0,(function*(){try{yield e({methodId:i})}catch(e){"function"==typeof d&&e instanceof Error&&d(e)}}))})),[]),a.createElement("div",{className:r,"data-test":o,id:o}))),[])},82804:(e,t,r)=>{r.d(t,{A:()=>m,S:()=>n});var n,a=r(69440),o=r(70355),i=r(54622),d=r(59713),c=r(9343),l=r(85216),s=r(10156);function m(e,t,r=n.Default){const m=document.createElement("div"),u=document.getElementById(e);if(!u)throw new Error("Unable to retrieve input styles as the provided container ID is not valid.");return u.appendChild(m),new Promise((e=>{i.render(o.createElement(c.Ay.Provider,{value:{isSubmitted:!0,setSubmitted:a.noop}},o.createElement(l.A,{hasError:r===n.Error},o.createElement(s.A,{appearFocused:r===n.Focus,ref:r=>{r&&(e((0,d.A)(r,t)),i.unmountComponentAtNode(m),m.parentElement&&m.parentElement.removeChild(m))}}))),m)}))}!function(e){e.Default="default",e.Error="error",e.Focus="focus"}(n||(n={}))},88186:(e,t,r)=>{r.d(t,{A:()=>d});var n=r(31635),a=r(3375),o=r.n(a),i=r(70355);const d=e=>{var{additionalClassName:t,appearFocused:r,testId:a}=e,d=(0,n.__rest)(e,["additionalClassName","appearFocused","testId"]);return i.createElement("div",Object.assign({},d,{className:o()("form-input","optimizedCheckout-form-input",{"form-input--focus":r},{"optimizedCheckout-form-input--focus":r},t),"data-test":a}))}},89799:(e,t,r)=>{r.d(t,{A:()=>g});var n=r(31635),a=r(69440),o=r(70355),i=r(52137),d=r(43125),c=r(11474),l=r(62677),s=r(40646),m=r(68801),u=r(3375),p=r.n(u),h=r(72769),b=r(49655);const f=({buttonId:e,shouldShowEditButton:t})=>{if(t){const t=o.createElement(b.A,{id:"remote.select_different_card_action"});return o.createElement("p",null,o.createElement("button",{className:p()("stepHeader","widget-link-amazonpay"),id:e,onClick:(0,h.A)(),type:"button"},t))}return null},y=({shouldShowDescriptor:e,paymentDescriptor:t})=>e&&t?o.createElement("div",{className:"payment-descriptor"},t):null,v=({additionalContainerClassName:e,containerId:t,hideContentWhenSignedOut:r,hideWidget:n,isSignInRequired:a,isSignedIn:i,method:d,renderCustomPaymentForm:c,shouldRenderCustomInstrument:l,shouldShowCreditCardFieldset:s})=>o.createElement("div",{className:p()("widget",`widget--${d.id}`,"payment-widget",l?"":e),id:t,style:{display:r&&a&&!i||!s||n?"none":void 0},tabIndex:-1},l&&c&&c()),g=({instruments:e,hideWidget:t=!1,isInitializing:r=!1,isAccountInstrument:u,isInstrumentFeatureAvailable:p,isLoadingInstruments:h,shouldHideInstrumentExpiryDate:b=!1,shouldShow:g=!0,hideVerificationFields:C,method:E,storedCardValidationSchema:I,isPaymentDataRequired:k,setValidationSchema:S,loadInstruments:A,onUnhandledError:_=a.noop,deinitializeCustomer:F,deinitializePayment:w,setSubmit:N,initializeCustomer:x,initializePayment:z,signInCustomer:O,isSignedIn:P,isSignInRequired:$,isInstrumentCardNumberRequired:R,validateInstrument:T,containerId:V,hideContentWhenSignedOut:B=!1,renderCustomPaymentForm:W,additionalContainerClassName:D,shouldRenderCustomInstrument:j=!1,paymentDescriptor:q,shouldShowDescriptor:L,shouldShowEditButton:U,buttonId:M,setFieldValue:H})=>{const[G,J]=(0,o.useState)(!1),[K,Q]=(0,o.useState)(void 0),X=(0,o.useCallback)((()=>{if(G)return;const t=e.find((e=>e.defaultInstrument))||e[0];return t?t.bigpayToken:void 0}),[G,e]),Y=(0,o.useCallback)((()=>{const t=K||X();return(0,a.find)(e,{bigpayToken:t})}),[e,K,X]),Z=(0,o.useCallback)((()=>{if(!k)return null;const e=Y();return p&&e&&I||null}),[Y,p,k,I]),ee=(0,o.useCallback)(((e,t)=>!e&&(0,i.T)(t)?t:void 0),[]),te=(0,o.useCallback)((t=>{if(0===e.length)return J(!0),Q(void 0),void H("instrumentId","");if(K===t){const e=X();Q(e),H("instrumentId",e)}}),[e,K,X]),re=(0,o.useCallback)((()=>(0,n.__awaiter)(void 0,void 0,void 0,(function*(){J(!0),Q(void 0),w&&(yield w({gatewayId:E.gateway,methodId:E.id})),z&&(yield z({gatewayId:E.gateway,methodId:E.id}))}))),[E,w,z]),ne=(0,o.useCallback)((e=>{J(!1),Q(e)}),[]),ae=(0,o.useCallback)((()=>{const t=K||X(),r=(0,a.find)(e,{bigpayToken:t});if(r){(0,d.A)(r);const e=R(r,E);if(C)return;if(T)return T(e,r)}}),[K,X,e,E,C,T]),oe=()=>(0,n.__awaiter)(void 0,void 0,void 0,(function*(){if(!k)return void N(E,null);if($&&!P)return N(E,O||null),x?x({methodId:E.id}):void 0;let t;if(N(E,null),!G){const r=K||X(),n=e.find((e=>e.bigpayToken===r))||e[0];n&&(0,d.a)(n)&&(t=n)}return z?z({gatewayId:E.gateway,methodId:E.id},t):void 0})),ie=K||X(),de=ie&&e.find((e=>e.bigpayToken===ie))||e[0],ce=e.filter((e=>!(0,i.T)(e))),le=e.filter((e=>(0,i.T)(e))),se=p&&e.length>0,me=!se||G,ue=(r||h)&&!t,pe=de?ee(G,de):void 0,he=e[0]&&(0,i.T)(e[0]);(0,o.useEffect)((()=>((0,n.__awaiter)(void 0,void 0,void 0,(function*(){S(E,Z());try{p&&(yield null==A?void 0:A()),yield oe()}catch(e){e instanceof Error&&_(e)}})),()=>{(0,n.__awaiter)(void 0,void 0,void 0,(function*(){S(E,null),N(E,null);try{w&&(yield w({gatewayId:E.gateway,methodId:E.id})),F&&(yield F({methodId:E.id}))}catch(e){e instanceof Error&&_(e)}}))})),[]);const be=(0,o.useRef)(!0),fe=(0,o.useRef)(e.length),ye=(0,o.useRef)(k),ve=(0,o.useRef)(K);return(0,o.useEffect)((()=>{if(be.current)return void(be.current=!1);S(E,Z());(ve.current!==K||Number(fe.current)>0&&0===e.length||ye.current!==k)&&(ve.current=K,fe.current=e.length,ye.current=k,(0,n.__awaiter)(void 0,void 0,void 0,(function*(){try{w&&(yield w({gatewayId:E.gateway,methodId:E.id})),yield oe()}catch(e){e instanceof Error&&_(e)}})))}),[K,e,k]),g?o.createElement(m.A,{hideContentWhenLoading:!0,isLoading:ue},o.createElement("div",{className:"paymentMethod--hosted"},he&&se&&o.createElement(c.A,{instruments:le,onSelectInstrument:ne,onUseNewInstrument:re,selectedInstrument:pe}),!he&&se&&o.createElement(l.A,{instruments:ce,onDeleteInstrument:te,onSelectInstrument:ne,onUseNewInstrument:re,selectedInstrumentId:ie,shouldHideExpiryDate:b,validateInstrument:ae()}),o.createElement(y,{paymentDescriptor:q,shouldShowDescriptor:L}),o.createElement(v,{additionalContainerClassName:D,containerId:V,hideContentWhenSignedOut:B,hideWidget:t,isSignInRequired:$,isSignedIn:P,method:E,renderCustomPaymentForm:W,shouldRenderCustomInstrument:j,shouldShowCreditCardFieldset:me}),p&&o.createElement(s.A,{instrumentId:ie,instruments:e,isAccountInstrument:Boolean(u||he)}),o.createElement(f,{buttonId:M,shouldShowEditButton:U}))):o.createElement("div",{style:{display:"none"}})}},98363:(e,t,r)=>{r.d(t,{A:()=>c});var n=r(70355),a=r(49655),o=r(36659),i=r(47459),d=r(12929);const c=({cardCodeId:e,cardNumberId:t,cardExpiryId:r,focusedFieldType:c})=>n.createElement(n.Fragment,null,t&&n.createElement("p",null,n.createElement("strong",null,n.createElement(a.A,{id:"payment.instrument_trusted_shipping_address_title_text"})),n.createElement("br",null),n.createElement(a.A,{id:"payment.instrument_trusted_shipping_address_text"})),n.createElement("div",{className:"form-ccFields"},t&&n.createElement(o.A,{appearFocused:"cardNumber"===c,id:t,name:"hostedForm.errors.cardNumberVerification"}),e&&n.createElement(i.A,{appearFocused:"cardCode"===c,id:e,name:"hostedForm.errors.cardCodeVerification"}),r&&n.createElement(d.A,{appearFocused:"cardExpiry"===c,id:r,name:"hostedForm.errors.cardExpiryVerification"})))}}]);
//# sourceMappingURL=9557-3dc1b812.js.map